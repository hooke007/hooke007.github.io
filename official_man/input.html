<!doctype html>
<html class="no-js" lang="zh-CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" />

    <link rel="shortcut icon" href="../_static/html_favicon.png"/><!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>命令接口 - mpv_CFanStation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-background-primary: #FFFBE8;
  --color-highlight-on-target: #007ACC;
  --color-toc-background: #F5F5F5;
  --color-toc-item-text: #646776;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">mpv_CFanStation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/html_logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">mpv_CFanStation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">导航：</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="index.html">mpv手册</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="mpv.html">mpv —— 媒体播放器</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../official_misc/index.html">mpv其它</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../official_misc/encoding.html">编码/压制的详细指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../official_misc/Interpolation.html">插值技术</a></li>
<li class="toctree-l2"><a class="reference internal" href="../official_misc/VO_shader_stages.html">着色器处理阶段</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">导航：</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../unofficial/index.html">非官方</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../unofficial/mpv_start.html">mpv播放器的使用引导</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unofficial/mpv_shaders.html">第三方用户着色器</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unofficial/mpv_profiles.html">配置预设</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unofficial/mpv_input.html">快捷键自定义与控制台</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unofficial/mpv_filters.html">音视频滤镜</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="id1">
<h1>命令接口<a class="headerlink" href="#id1" title="此标题的永久链接">#</a></h1>
<p>mpv的核心可以用命令和属性来控制。许多与播放器交互的方式都使用它们：按键绑定（ <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> ），OSD（用属性显示信息），JSON IPC，客户端API（ <code class="docutils literal notranslate"><span class="pre">libmpv</span></code> ），以及经典的slave mode 。</p>
<section id="input-conf">
<h2>input.conf<a class="headerlink" href="#input-conf" title="此标题的永久链接">#</a></h2>
<p>input.conf文件由一系列按键绑定的列表组成，例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="n">screenshot</span>      <span class="c1"># 用s键截屏</span>
<span class="n">LEFT</span> <span class="n">seek</span> <span class="mi">15</span>      <span class="c1"># 将向左键映射为向前搜寻15秒</span>
</pre></div>
</div>
<p>每一行映射一个按键到一个输入命令。按键被指定为其按键名（如果与 <code class="docutils literal notranslate"><span class="pre">Shift</span></code> 结合，则为大写），或者为特殊键指定一个名称。例如， <code class="docutils literal notranslate"><span class="pre">a</span></code> 映射到 <code class="docutils literal notranslate"><span class="pre">a</span></code> 键，不需要shift，而 <code class="docutils literal notranslate"><span class="pre">A</span></code> 映射到 <code class="docutils literal notranslate"><span class="pre">a</span></code> 键，需要shift 。</p>
<p>该文件位于mpv设置目录下（通常在 <code class="docutils literal notranslate"><span class="pre">~/.config/mpv/input.conf</span></code> ，取决于平台）。默认的绑定在这里定义:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">mpv</span><span class="o">-</span><span class="n">player</span><span class="o">/</span><span class="n">mpv</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="nb">input</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>特殊按键的列表可以通过以下方式获得</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">mpv</span> <span class="pre">--input-keylist</span></code></p>
</div></blockquote>
<p>一般来说，按键可以与 <code class="docutils literal notranslate"><span class="pre">Shift</span></code> <code class="docutils literal notranslate"><span class="pre">Ctrl</span></code> <code class="docutils literal notranslate"><span class="pre">Alt</span></code> 组合:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ctrl</span><span class="o">+</span><span class="n">q</span> <span class="n">quit</span>
</pre></div>
</div>
<p><strong>mpv</strong> 可以在输入测试模式下启动，在OSD上显示按键的绑定和它们所绑定的命令，而不会执行命令:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpv</span> <span class="o">--</span><span class="nb">input</span><span class="o">-</span><span class="n">test</span> <span class="o">--</span><span class="n">force</span><span class="o">-</span><span class="n">window</span> <span class="o">--</span><span class="n">idle</span>
</pre></div>
</div>
<p>（只有关闭窗口才能使 <strong>mpv</strong> 退出，按下普通的键只是显示绑定的命令，即使被映射为quit）</p>
<p>另参见 <a class="reference internal" href="#id3">按键名称</a></p>
</section>
<section id="id2">
<h2>input.conf语法<a class="headerlink" href="#id2" title="此标题的永久链接">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">[Shift+][Ctrl+][Alt+][Meta+]&lt;key&gt;</span> <span class="pre">[{&lt;section&gt;}]</span> <span class="pre">&lt;command&gt;</span> <span class="pre">(</span> <span class="pre">;</span> <span class="pre">&lt;command&gt;</span> <span class="pre">)*</span></code></p>
<p>注意，默认情况下，右Alt键可以被创建为特殊字符，因此两个Alt不会注册为单个修饰键。选项 <code class="docutils literal notranslate"><span class="pre">--no-input-right-alt-gr</span></code> 可以改变这一行为。</p>
<p>换行总是开始一个新的绑定。 <code class="docutils literal notranslate"><span class="pre">#</span></code> 开始一个注释（在被引用的字符串参数之外）。为了将命令与 <code class="docutils literal notranslate"><span class="pre">#</span></code> 键绑定，可以使用 <code class="docutils literal notranslate"><span class="pre">SHARP</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;key&gt;</span></code> 是该按键的字面字符（ASCII或Unicode字符），或者是一个符号名称（正如由 <code class="docutils literal notranslate"><span class="pre">--input-keylist</span></code> 输出的内容）。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;section&gt;</span></code> （用 <code class="docutils literal notranslate"><span class="pre">{</span></code> 和 <code class="docutils literal notranslate"><span class="pre">}</span></code> 括起来）是这个命令的输入部分。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> 是命令本身。它由命令名称和多个（或无）参数组成，所有参数都用空格隔开。字符串参数应被引用，一般用 <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> 。参见  <a class="reference internal" href="#flat">Flat命令语法</a></p>
<p>你可以绑定多个命令到一个按键上。例如：</p>
<div class="line-block">
<div class="line">a show-text “command 1” ; show-text “command 2”</div>
</div>
<p>也可以将一个命令与多个按键绑定：</p>
<div class="line-block">
<div class="line">a-b-c show-text “command run after a, b, c have been pressed”</div>
</div>
<p>（这在一般的命令语法中没有展示）</p>
<p>如果 <code class="docutils literal notranslate"><span class="pre">a</span></code> 或 <code class="docutils literal notranslate"><span class="pre">a-b</span></code> 或 <code class="docutils literal notranslate"><span class="pre">b</span></code> 已经被绑定，这将运行第一个匹配的命令，而多键命令将不会被调用。为了避免这个问题，可以将中间键重映射到 <code class="docutils literal notranslate"><span class="pre">ignore</span></code> 。多个键联合的最大数量（非修饰键）目前是4。</p>
</section>
<section id="id3">
<h2>按键名称<a class="headerlink" href="#id3" title="此标题的永久链接">#</a></h2>
<p>所有的鼠标和键盘的输入都要转换为mpv指定的按键名称。键名要么是代表物理键的特殊符号标识，要么是文本键名，它是UTF-8编码的unicode码点。这些都是键盘输入通常会产生的，例如， <code class="docutils literal notranslate"><span class="pre">a</span></code> 代表A键。因此，mpv使用由当前操作系统键盘布局转译的输入，而不是物理扫描代码。</p>
<p>目前有一个硬编码的假设，即每个文本键都可以表示为一个单一的unicode码点（NFKC形式）。</p>
<p>所有的键名都可以与修饰键 <code class="docutils literal notranslate"><span class="pre">Shift</span></code> <code class="docutils literal notranslate"><span class="pre">Ctrl</span></code> <code class="docutils literal notranslate"><span class="pre">Alt</span></code> <code class="docutils literal notranslate"><span class="pre">Meta</span></code> 结合。它们必须以实际的键名为前缀，每个修饰键后面都有一个 <code class="docutils literal notranslate"><span class="pre">+</span></code> （例如 <code class="docutils literal notranslate"><span class="pre">ctrl+q</span></code> ）。</p>
<p>需要注意一下 <code class="docutils literal notranslate"><span class="pre">Shift</span></code> 修饰键。例如， <code class="docutils literal notranslate"><span class="pre">Shift+2</span></code> 通常应该在 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 中指定为键名 <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> ，同样， <code class="docutils literal notranslate"><span class="pre">Alt+Shift+2</span></code> 的组合通常为 <code class="docutils literal notranslate"><span class="pre">Alt+&#64;</span></code> ，等等。特殊的键名，如 <code class="docutils literal notranslate"><span class="pre">Shift+LEFT</span></code> ，也能如期工作。如果有疑问 —— 使用 <code class="docutils literal notranslate"><span class="pre">--input-test</span></code> 来检查mpv是如何处理某个按键/组合的。</p>
<p>符号键名和修饰键名不区分大小写。Unicode键名是区分大小写的，因为输入绑定通常遵循shift键。</p>
<p>另一种类型的键名是十六进制键名，作为特殊键的后备键，既不是unicode，也没有特殊的mpv定义的名称。一旦mpv为它们添加了合适的名字，它们就会失效，但如果不这样做，你就可以使用一个键。</p>
<p>所有的符号键名都由 <code class="docutils literal notranslate"><span class="pre">--input-keylist</span></code> 列出。 <code class="docutils literal notranslate"><span class="pre">--input-test</span></code> 是一个特殊的模式，在OSD上输出出所有的输入。</p>
<p>对一些符号键名的注释：</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">KP*</span></code></dt><dd><p>小键盘名。行为因后端而异（是否实现，以及如何处理numlock），但通常情况下，mpv尝试将小键盘上的按键映射到独立的名称，即使它们能输出与一般按键相同的文本。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MOUSE_BTN*</span></code> <code class="docutils literal notranslate"><span class="pre">MBTN*</span></code></dt><dd><p>各种鼠标按钮</p>
<p>取决于后端，鼠标滚轮也可被表示为一个按钮。此外， <code class="docutils literal notranslate"><span class="pre">MOUSE_BTN3</span></code> <code class="docutils literal notranslate"><span class="pre">MOUSE_BTN4</span></code> <code class="docutils literal notranslate"><span class="pre">MOUSE_BTN5</span></code> <code class="docutils literal notranslate"><span class="pre">MOUSE_BTN6</span></code> 分别是 <code class="docutils literal notranslate"><span class="pre">WHEEL_UP</span></code> <code class="docutils literal notranslate"><span class="pre">WHEEL_DOWN</span></code> <code class="docutils literal notranslate"><span class="pre">WHEEL_LEFT</span></code> <code class="docutils literal notranslate"><span class="pre">WHEEL_RIGHT</span></code> 的过时的别名。</p>
<p><code class="docutils literal notranslate"><span class="pre">MBTN*</span></code> 是 <code class="docutils literal notranslate"><span class="pre">MOUSE_BTN*</span></code> 的别名</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">WHEEL_*</span></code></dt><dd><p>鼠标滚轮（通常）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">AXIS_*</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">WHEEL_*</span></code> 的别名，已过时</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">*_DBL</span></code></dt><dd><p>鼠标按键 双击</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">MOUSE_MOVE</span></code> <code class="docutils literal notranslate"><span class="pre">MOUSE_ENTER</span></code> <code class="docutils literal notranslate"><span class="pre">MOUSE_LEAVE</span></code></dt><dd><p>由鼠标移动事件触发。当光标进入或离开mpv窗口（或当前光标区域，使用已过时的鼠标区域输入部分机制）时ENTER/LEAVE发生。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">CLOSE_WIN</span></code></dt><dd><p>当使用操作系统窗口管理器关闭mpv窗口时发出的虚拟键（例如，通过点击窗口标题栏的关闭按钮）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">GAMEPAD_*</span></code></dt><dd><p>由SDL游戏手柄后端触发的键</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">UNMAPPED</span></code></dt><dd><p>匹配任何未映射的键的虚拟键（如果可能的话，你应该避免这样做，因为它可能会变更行为或在将来被移除）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ANY_UNICODE</span></code></dt><dd><p>匹配任何产生文本的键的虚拟键（如果可能的话，你应该避免这样做，因为它可能会变更行为或在将来被移除）</p>
</dd>
</dl>
</section>
<section id="flat">
<h2>Flat命令语法<a class="headerlink" href="#flat" title="此标题的永久链接">#</a></h2>
<p>这是在input.conf中使用的语法，并在其它的一些地方被“input.conf语法”提及。</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span>&#160; <span class="pre">::=</span> <span class="pre">[&lt;prefixes&gt;]</span> <span class="pre">&lt;command_name&gt;</span> <span class="pre">(&lt;argument&gt;)*</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;argument&gt;</span> <span class="pre">::=</span> <span class="pre">(&lt;unquoted&gt;</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&lt;double_quoted&gt;</span> <span class="pre">&quot;</span> <span class="pre">|</span> <span class="pre">'</span> <span class="pre">&lt;single_quoted&gt;</span> <span class="pre">'</span> <span class="pre">|</span> <span class="pre">`X</span> <span class="pre">&lt;custom_quoted&gt;</span> <span class="pre">X`)</span></code></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">command_name</span></code> 是一个不引用的包含命令名称本身的字符串。参见列表 <a class="reference internal" href="#id6">输入命令列表</a></p>
<p>参数之间用空格隔开，即使命令只有一个参数。带有空格或其他特殊字符的参数必须引用，否则命令不能被正确解析。</p>
<p>双引号引用解释JSON/C-style的转义，如 <code class="docutils literal notranslate"><span class="pre">\t</span></code> 或 <code class="docutils literal notranslate"><span class="pre">\&quot;</span></code> 或 <code class="docutils literal notranslate"><span class="pre">\\</span></code> 。JSON根据RFC 8259进行转义，减去surrogate pair转义。这是唯一一种允许在值上加换行的形式 —— 如 <code class="docutils literal notranslate"><span class="pre">\n</span></code></p>
<p>单引号引用解释字面内容，并且不能在值中包含单引号的字符。</p>
<p>自定义引用也是解释字面内容，但比单引号引用更灵活。它们以 <code class="docutils literal notranslate"><span class="pre">`</span></code> （反引号）开始，后面是任何ASCII字符，并以同一对的第一次出现为结束，顺序相反，例如： <code class="docutils literal notranslate"><span class="pre">`-foo-`</span></code> 或 <code class="docutils literal notranslate"><span class="pre">``bar``</span></code> 。最后一对序列不允许出现在值中 —— 例子分别是 <code class="docutils literal notranslate"><span class="pre">-`</span></code> 和 <code class="docutils literal notranslate"><span class="pre">``</span></code> 。在第二个例子中，值的最后一个字符也不能是反引号。</p>
<p>不支持对同一个参数的进行混合引用，如 <code class="docutils literal notranslate"><span class="pre">'foo'&quot;bar&quot;</span></code> 。</p>
<p>请注意，参数解析和属性扩展发生在不同阶段。首先，参数如上所述被确定，然后，如果适用的话，属性被扩展 —— 无视参数的引用。然而，仍然可以用 <code class="docutils literal notranslate"><span class="pre">raw</span></code> 前缀或 <code class="docutils literal notranslate"><span class="pre">$&gt;</span></code> 防止被扩展。参见 <a class="reference internal" href="#id9">输入命令前缀</a> 和 <a class="reference internal" href="#id16">属性扩展</a></p>
</section>
<section id="id4">
<h2>指定为数组的命令<a class="headerlink" href="#id4" title="此标题的永久链接">#</a></h2>
<p>这适用于部分API，例如Lua脚本中的 <code class="docutils literal notranslate"><span class="pre">mp.commandv()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">mp.command_native()</span></code> （带有数组参数），或者C语言libmpv客户端API中的 <code class="docutils literal notranslate"><span class="pre">mpv_command()</span></code> 或 <code class="docutils literal notranslate"><span class="pre">mpv_command_node()</span></code> （带有 MPV_FORMAT_NODE_ARRAY ）。</p>
<p>命令以及所有的参数都以一个数组的形式传递。类似于 <a class="reference internal" href="#flat">Flat命令语法</a> ，你可以先把前缀作为字符串传递（每个都是单独的数组项），然后把命令名称作为字符串，然后把每个参数作为字符串或原生值。</p>
<p>由于这些API将参数作为单独的字符串或原生值来传递，所以它们不需要引用，并且支持转义。技术上讲，有一个input.conf解析器，它首先将命令字符串分割成数个参数，然后为每个参数调用解析器。input.conf解析器通常处理引号和转义。上面提到的数组命令API直接将字符串传递给参数解析器，或者可以通过传递非字符串值的职能回避它们。</p>
<p>对于这些API，属性扩展默认是禁用的。这可以用 <code class="docutils literal notranslate"><span class="pre">expand-properties</span></code> 前缀来改变。参见 <a class="reference internal" href="#id9">输入命令前缀</a></p>
<p>有时命令的参数是字符串，而这些参数实际上是由其它组件解析的（例如，用 <code class="docutils literal notranslate"><span class="pre">vf</span> <span class="pre">add</span></code> 的滤镜字符串） —— 在这些情况下，你不得不在input.conf中进行双击，但在数组API中则不必。</p>
<p>对于复杂的命令，可以考虑使用 <a class="reference internal" href="#id5">命名参数</a> 来代替，这样应该会更具兼容性。不过有些命令不支持命名参数，而是采用数组参数。</p>
</section>
<section id="id5">
<h2>命名参数<a class="headerlink" href="#id5" title="此标题的永久链接">#</a></h2>
<p>这适用于部分API，例如Lua脚本中的 <code class="docutils literal notranslate"><span class="pre">mp.command_native()</span></code> （有字符串键的表），或者C语言libmpv客户端API中的 <code class="docutils literal notranslate"><span class="pre">mpv_command_node()</span></code> （带有 MPV_FORMAT_NODE_MAP ）。</p>
<p>命令的名称是由 <code class="docutils literal notranslate"><span class="pre">name</span></code> 字符串字段提供的。每个命令的名称在 <a class="reference internal" href="#id6">输入命令列表</a> 中的每个命令描述内都有定义。 <code class="docutils literal notranslate"><span class="pre">--input-cmdlist</span></code> 也可以列出它们。参见 <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> 命令为例。</p>
<p>有些命令不支持命名参数（例如 <code class="docutils literal notranslate"><span class="pre">run</span></code> 命令）。你需要使用以数组形式传递参数的API。</p>
<p>命名参数在 “flat” 的input.conf语法中不被支持，这意味着你根本无法在input.conf中使用它们作为按键的绑定。</p>
<p>对于这些API，属性扩展默认是禁用的。这可以通过 <code class="docutils literal notranslate"><span class="pre">expand-properties</span></code> 前缀来改变。参见 <a class="reference internal" href="#id9">输入命令前缀</a></p>
</section>
<section id="id6">
<h2>输入命令列表<a class="headerlink" href="#id6" title="此标题的永久链接">#</a></h2>
<p>带参数的命令中，参数名称用符号 <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> / <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> 括起来。不要在实际命令中加入这些符号。可选参数用 <code class="docutils literal notranslate"><span class="pre">[</span></code> / <code class="docutils literal notranslate"><span class="pre">]</span></code> 符号括起来。如果你不传递它们，它们将被设置为默认值。</p>
<p>记住在input.conf中引用字符串参数（参见 <a class="reference internal" href="#flat">Flat命令语法</a> ）</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">ignore</span></code></dt><dd><p>用它来“屏蔽”应该被取消绑定的按键，不触发任何命令。对禁用部分默认绑定很有用，而不必用 <code class="docutils literal notranslate"><span class="pre">--no-input-default-bindings</span></code> 禁用所有绑定。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seek</span> <span class="pre">&lt;target&gt;</span> <span class="pre">[&lt;flags&gt;]</span></code></dt><dd><p>变更播放位置。默认情况下，以相对的秒数来跳转。</p>
<p>第二个参数是跳转模式：</p>
<dl class="simple">
<dt>relative （默认）</dt><dd><p>相对当前位置跳转（负值向前跳转）</p>
</dd>
<dt>absolute</dt><dd><p>跳转到一个指定的时间（负值从文件的末尾开始）</p>
</dd>
<dt>absolute-percent</dt><dd><p>跳转到一个指定的百分比位置</p>
</dd>
<dt>relative-percent</dt><dd><p>跳转到相对当前位置的百分比位置</p>
</dd>
<dt>keyframes</dt><dd><p>始终在关键帧处重新开始播放（快）</p>
</dd>
<dt>exact</dt><dd><p>始终做精确跳转（慢）</p>
</dd>
</dl>
<p>多个标志可以合并，例如： <code class="docutils literal notranslate"><span class="pre">absolute+keyframes</span></code></p>
<p>默认情况下， <code class="docutils literal notranslate"><span class="pre">keyframes</span></code> 用于 <code class="docutils literal notranslate"><span class="pre">relative</span></code>, <code class="docutils literal notranslate"><span class="pre">relative-percent</span></code> 和 <code class="docutils literal notranslate"><span class="pre">absolute-percent</span></code> 跳转，而 <code class="docutils literal notranslate"><span class="pre">exact</span></code> 用于 <code class="docutils literal notranslate"><span class="pre">absolute</span></code> 跳转。</p>
<p>在mpv 0.9之前， <code class="docutils literal notranslate"><span class="pre">keyframes</span></code> 和 <code class="docutils literal notranslate"><span class="pre">exact</span></code> 标志必须作为第3个参数传递（基本上是用空格代替 <code class="docutils literal notranslate"><span class="pre">+</span></code>）。第3个参数仍然被解析，但被认为是过时的语法。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">revert-seek</span> <span class="pre">[&lt;flags&gt;]</span></code></dt><dd><p>撤销 <code class="docutils literal notranslate"><span class="pre">seek</span></code> 命令，以及其他的跳转命令（但不一定是所有的）。调用这个命令一次会回到跳转前的播放位置。第二次调用它将撤销 <code class="docutils literal notranslate"><span class="pre">revert-seek</span></code> 命令本身。这只在同一个文件中有效。</p>
<p>第一个参数是可选的，它可以改变行为：</p>
<dl class="simple">
<dt>mark</dt><dd><p>标记当前的时间位置。下一次正常的 <code class="docutils literal notranslate"><span class="pre">revert-seek</span></code> 命令将返回到这个时间点，不管上次之后发生了多少次搜索。</p>
</dd>
<dt>mark-permanent</dt><dd><p>如果设置，标记当前时间位置，在下一个设置了 <code class="docutils literal notranslate"><span class="pre">mark</span></code> 或 <code class="docutils literal notranslate"><span class="pre">mark-permanent</span></code> 的 <code class="docutils literal notranslate"><span class="pre">revert-seek</span></code> 命令之前（或当前文件的播放结束），不改变标记位置。在这之前, <code class="docutils literal notranslate"><span class="pre">revert-seek</span></code> 将一直跳转到被标记的时间点. 这个标志不能与 <code class="docutils literal notranslate"><span class="pre">mark</span></code> 结合使用。</p>
</dd>
</dl>
<p>在没有任何参数的情况下使用默认行为。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">frame-step</span></code></dt><dd><p>播放一帧，然后暂停。对纯音频播放无效。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">frame-back-step</span></code></dt><dd><p>后退一帧，然后暂停。注意，这可能非常慢（它尝试精确，而不是快速），有时不能达到预期效果。这样做的效果如何，取决于精确跳转是否正常工作（例如，参见 <code class="docutils literal notranslate"><span class="pre">--hr-seek-demuxer-offset</span></code> 选项）。视频滤镜或其它修改帧计时的视频后处理（例如去隔行扫描）通常应该有效，但在边缘情况下可能会使反向步进暗中发生错误。使用 <code class="docutils literal notranslate"><span class="pre">--hr-seek-framedrop=no</span></code> 应该会有帮助，尽管它可能会使精确跳转更慢。</p>
<p>这对纯音频播放无效。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;value&gt;</span></code></dt><dd><p>将指定的属性或选项设置为指定的值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">&lt;name&gt;</span></code></dt><dd><p>删除指定的属性。大多数属性不能被删除。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">&lt;name&gt;</span> <span class="pre">[&lt;value&gt;]</span></code></dt><dd><p>向属性或选项添加指定的值。在上溢或下溢时，将属性钳制为最大值。如果省略了 <code class="docutils literal notranslate"><span class="pre">&lt;value&gt;</span></code> ，则假定为 <code class="docutils literal notranslate"><span class="pre">1</span></code> 。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cycle</span> <span class="pre">&lt;name&gt;</span> <span class="pre">[&lt;value&gt;]</span></code></dt><dd><p>循环指定的属性或选项。第二个参数可以是 <code class="docutils literal notranslate"><span class="pre">up</span></code> 或 <code class="docutils literal notranslate"><span class="pre">down</span></code> 来设置循环方向。上溢时，将属性设回最小值，下溢时，将其设为最大值。如果省略了 <code class="docutils literal notranslate"><span class="pre">up</span></code> 或 <code class="docutils literal notranslate"><span class="pre">down</span></code>  ，则假定为 <code class="docutils literal notranslate"><span class="pre">up</span></code> 。</p>
<p>默认情况下是否启用按键可重复，取决于属性。目前具有连续性的值的属性默认是可重复的（如 <code class="docutils literal notranslate"><span class="pre">volume</span></code> ），而离散值则不是（如 <code class="docutils literal notranslate"><span class="pre">osd-level</span></code> ）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">multiply</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;value&gt;</span></code></dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">add</span></code> ，但将属性或选项与数值相乘。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">screenshot</span> <span class="pre">&lt;flags&gt;</span></code></dt><dd><p>拍摄屏幕截图。</p>
<p>有多个标志可供选择（有些可与 <code class="docutils literal notranslate"><span class="pre">+</span></code> 组合）：</p>
<dl class="simple">
<dt>&lt;subtitles&gt; （默认）</dt><dd><p>以原始分辨率保存视频图像，带有字幕。在某些情况下，一些视频输出可能仍然包括OSD。</p>
</dd>
<dt>&lt;video&gt;</dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">subtitles</span></code> ，但通常没有OSD或字幕。具体行为取决于所选的视频输出。</p>
</dd>
<dt>&lt;window&gt;</dt><dd><p>保存mpv窗口的内容。通常视频是缩放过的，有OSD和字幕。具体行为取决于所选的视频输出，如果不支持，表现和 <code class="docutils literal notranslate"><span class="pre">video</span></code> 一样。</p>
</dd>
<dt>&lt;each-frame&gt;</dt><dd><p>每一帧截一次屏。再次发出这个命令可以停止截图。注意，使用这种模式时，你应该禁用frame-dropping功能 —— 否则在丢帧的情况下，你可能会收到重复的图像。这个标志可以和其他标志结合使用，例如 <code class="docutils literal notranslate"><span class="pre">video+each-frame</span></code></p>
</dd>
</dl>
<p>旧版本mpv需要把 <code class="docutils literal notranslate"><span class="pre">single</span></code> 和 <code class="docutils literal notranslate"><span class="pre">each-frame</span></code> 作为第二个参数传递（且无标志）。这种语法仍然可以被解析，但已经过时，将来可能会被移除。</p>
<p>如果你使用 <code class="docutils literal notranslate"><span class="pre">;</span></code> 把这个命令和另一个命令结合起来，你可以使用 <code class="docutils literal notranslate"><span class="pre">async</span></code> 标志来使编码/写入图像文件成为异步的。对于普通的独立命令，它总是异步的，这个标志没有影响。（该行为在mpv0.29.0中被更改）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">screenshot-to-file</span> <span class="pre">&lt;filename&gt;</span> <span class="pre">&lt;flags&gt;</span></code></dt><dd><p>截图并保存到一个指定的文件。文件的格式将由扩展名来猜测（并且 <code class="docutils literal notranslate"><span class="pre">--screenshot-format</span></code> 被忽略 —— 当扩展名丢失或未知时，行为是随机的）。</p>
<p>第二个参数和 <code class="docutils literal notranslate"><span class="pre">screenshot</span></code> 的第一个参数一样，支持 <code class="docutils literal notranslate"><span class="pre">subtitles</span></code> <code class="docutils literal notranslate"><span class="pre">video</span></code> <code class="docutils literal notranslate"><span class="pre">window</span></code></p>
<p>如果文件已存在，它将被覆盖写入。</p>
<p>像所有的输入命令参数一样，文件名符合属性扩展，如 <a class="reference internal" href="#id16">属性扩展</a> 中所述。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-next</span> <span class="pre">&lt;flags&gt;</span></code></dt><dd><p>转到播放列表的下一个条目。</p>
<p>第一个参数：</p>
<dl class="simple">
<dt>weak （默认）</dt><dd><p>如果播放列表的最后一个文件是当前播放的文件，则无操作</p>
</dd>
<dt>force</dt><dd><p>如果播放列表没有更多的文件，就终止播放</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-prev</span> <span class="pre">&lt;flags&gt;</span></code></dt><dd><p>转到播放列表的上一个条目。</p>
<p>第一个参数：</p>
<dl class="simple">
<dt>weak （默认）</dt><dd><p>如果播放列表的第一个文件是当前播放的文件，则无操作</p>
</dd>
<dt>force</dt><dd><p>如果第一个文件正在播放，就终止播放</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-play-index</span> <span class="pre">&lt;integer|current|none&gt;</span></code></dt><dd><p>开始（或重新开始）播放指定的播放列表索引。除了基于0的播放列表条目索引外，它还支持以下值：</p>
<dl class="simple">
<dt>&lt;current&gt;</dt><dd><p>当前的播放列表条目（如 <code class="docutils literal notranslate"><span class="pre">playlist-current-pos</span></code> ）将被再次播放（卸载和重新加载）。如果没有设置，播放就会停止。(在边缘情况下， <code class="docutils literal notranslate"><span class="pre">playlist-current-pos</span></code> 可以指向一个播放列表条目，即使当前的播放状态未激活。</p>
</dd>
<dt>&lt;none&gt;</dt><dd><p>播放被停止。如果空闲模式（ <code class="docutils literal notranslate"><span class="pre">--idle</span></code> ）被启用，播放器将进入空闲模式，否则将退出。</p>
</dd>
</dl>
<p>该命令和 <code class="docutils literal notranslate"><span class="pre">loadfile</span></code> 类似，它只操作下一个将播放文件的状态，而不等待当前文件被退出，或下一个文件被加载。</p>
<p>设置 <code class="docutils literal notranslate"><span class="pre">playlist-pos</span></code> 或类似的属性可以产生与此命令近似的效果。然而它更明确，例如，新的播放列表条目与旧的相同，它将保证重启播放。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loadfile</span> <span class="pre">&lt;url&gt;</span> <span class="pre">[&lt;flags&gt;</span> <span class="pre">[&lt;options&gt;]]</span></code></dt><dd><p>加载指定的文件或URL并播放它。从技术上讲，这只是一个播放列表的操作命令（它要么替换播放列表，要么添加一个条目）。实际的文件加载是独立发生的。例如，一个用新文件替换当前文件的 <code class="docutils literal notranslate"><span class="pre">loadfile</span></code> 命令会在当前文件停止之前返回，而后才开始加载新文件。</p>
<p>第二个参数：</p>
<dl class="simple">
<dt>&lt;replace&gt; （默认）</dt><dd><p>停止播放当前文件，并立即播放新文件</p>
</dd>
<dt>&lt;append&gt;</dt><dd><p>将文件追加到播放列表中</p>
</dd>
<dt>&lt;append-play&gt;</dt><dd><p>添加文件，如果当前没有文件播放，则开始播放（始终从添加的文件开始播放，即使在运行这个命令之前的播放列表不是空的）</p>
</dd>
</dl>
<p>第三个参数是一个选项和值的列表，应该在文件播放时设置。它的形式是 <code class="docutils literal notranslate"><span class="pre">opt1=value1,opt2=value2,..</span></code> 。当使用client API时，这可以是一个 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE_MAP</span></code> （或一个Lua表），但当前的值本身必须是字符串。这些选项在播放过程中设置，并在播放结束时恢复到之前的值（参见 <a href="#id18"><span class="problematic" id="id19">`单文件选项`_</span></a> ）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loadlist</span> <span class="pre">&lt;url&gt;</span> <span class="pre">[&lt;flags&gt;]</span></code></dt><dd><p>加载指定的列表文件或URL（类似 <code class="docutils literal notranslate"><span class="pre">--playlist</span></code> ）。</p>
<p>第二个参数：</p>
<dl class="simple">
<dt>&lt;replace&gt; （默认）</dt><dd><p>停止播放，用新的列表替换播放器内部的播放列表</p>
</dd>
<dt>&lt;append&gt;</dt><dd><p>在当前的内部播放列表的末尾追加新的播放列表</p>
</dd>
<dt>&lt;append-play&gt;</dt><dd><p>追加新的播放列表，如果当前没有文件播放，则开始播放（始终从新的列表开始播放，即使在运行这个命令之前的内部播放列表不是空的）</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-clear</span></code></dt><dd><p>清除播放列表，除了当前播放的文件。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-remove</span> <span class="pre">&lt;index&gt;</span></code></dt><dd><p>移除指定索引的播放列表条目。索引值从0开始计算。 特殊值 <code class="docutils literal notranslate"><span class="pre">current</span></code> 移除当前的条目。注意，移除当前条目也会停止播放并开始播放下一个条目。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-move</span> <span class="pre">&lt;index1&gt;</span> <span class="pre">&lt;index2&gt;</span></code></dt><dd><p>移动索引1的播放列表条目，使其取代索引2的条目（矛盾的是，如果index1低于index2，移动后的播放列表条目将没有index2的索引值，因为index2指的是目标条目，而不是该条目移动后的索引）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-shuffle</span></code></dt><dd><p>随机洗牌播放列表。这与使用 <code class="docutils literal notranslate"><span class="pre">--shuffle</span></code> 选项时启动的情况类似。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-unshuffle</span></code></dt><dd><p>尝试恢复之前的 <code class="docutils literal notranslate"><span class="pre">playlist-shuffle</span></code> 命令。这只起一次作用（对多个连续的 <code class="docutils literal notranslate"><span class="pre">playlist-unshuffle</span></code> 命令无效）。如果在 <code class="docutils literal notranslate"><span class="pre">playlist-shuffle</span></code> 命令之后，有新的递归播放列表被打开，可能无法正常起效。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">&lt;command&gt;</span> <span class="pre">[&lt;arg1&gt;</span> <span class="pre">[&lt;arg2&gt;</span> <span class="pre">[...]]]</span></code></dt><dd><p>运行指定的命令。与MPlayer/mplayer2和mpv的早期版本（0.2.x和更早的版本）不同，这不会调用shell。相反，命令被直接运行，每个参数单独传递。每个参数都如 <a class="reference internal" href="#id16">属性扩展</a> 中那样被扩展。</p>
<p>此命令具有可变数量的参数，也不能与命名参数一起使用。</p>
<p>程序以分离的方式运行，mpv不会等待命令完成，但会在生成命令后立即继续播放。</p>
<p>要获得旧版的行为，使用 <code class="docutils literal notranslate"><span class="pre">/bin/sh</span></code> 和 <code class="docutils literal notranslate"><span class="pre">-c</span></code> 作为前两个参数。</p>
<div class="admonition- admonition">
<p class="admonition-title">示例</p>
<p><code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">&quot;/bin/sh&quot;</span> <span class="pre">&quot;-c&quot;</span> <span class="pre">&quot;echo</span> <span class="pre">${title}</span> <span class="pre">&gt;</span> <span class="pre">/tmp/playing&quot;</span></code></p>
<p>这不是一个特别好的例子，因为它没有处理转义，而一个特别准备的文件可能允许攻击者执行任意的shell命令。建议编写一个小的shell脚本，然后用 <code class="docutils literal notranslate"><span class="pre">run</span></code> 来调用。</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">subprocess</span></code></dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">run</span></code> ，但给予调用者更多关于进程执行的控制权，并且不分离进程。</p>
<p>你可以通过异步运行这个命令来避免阻塞，直到进程终止（例如Lua脚本中的 <code class="docutils literal notranslate"><span class="pre">mp.command_native_async()</span></code> ）。</p>
<p>这个命令有以下命名参数。它们的顺序是不保证的，所以你应该始终用命名参数来调用它们，参见 <a class="reference internal" href="#id5">命名参数</a></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">args</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE_ARRAY[MPV_FORMAT_STRING]</span></code>)</dt><dd><p>字符串的数组，命令是第一个参数，后接的是后续的命令行参数。这就像 <code class="docutils literal notranslate"><span class="pre">run</span></code> 命令的参数列表。</p>
<p>第一个数组条目是可执行文件的绝对路径，或者是没有路径成分的文件名，在这种情况下，可执行文件会在环境变量 <code class="docutils literal notranslate"><span class="pre">PATH</span></code> 的目录中搜索。在Unix上，这相当于 <code class="docutils literal notranslate"><span class="pre">posix_spawnp</span></code> 和 <code class="docutils literal notranslate"><span class="pre">execvp</span></code> 的行为。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playback_only</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_FLAG</span></code>)</dt><dd><p>布尔值，表示当播放结束时，进程是否应该被终止（可选，默认： yes）。如果启用，停止播放将自动结束该进程，且你不能在播放之外启动它。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">capture_size</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_INT64</span></code>)</dt><dd><p>整数，设置可以捕获的最大stdout加stderr字节数（可选，默认： 64MB）。如果字节数超过该数，捕获将被停止。此限制是针对每个被捕获的流。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">capture_stdout</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_FLAG</span></code>)</dt><dd><p>捕获进程输出到stdout的所有数据，并在进程结束后返回（可选，默认： no）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">capture_stderr</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_FLAG</span></code>)</dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">capture_stdout</span></code> 相同，但针对stderr 。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">detach</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_FLAG</span></code>)</dt><dd><p>是否以分离模式运行进程（可选，默认： no）。在这种模式下，进程会在一个新的进程会话中运行，命令不会等待进程终止。如果 <code class="docutils literal notranslate"><span class="pre">capture_stdout</span></code> 和 <code class="docutils literal notranslate"><span class="pre">capture_stderr</span></code> 都没有设置为 yes ，命令在新进程启动后立即返回，否则，只要管道开启，命令就会读取。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">env</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE_ARRAY[MPV_FORMAT_STRING]</span></code>)</dt><dd><p>为新进程设置一个环境变量的列表（默认为空）。如果传递了一个空列表，则使用mpv进程的环境来代替（不同于底层操作系统的机制，mpv命令不能以空环境启动一个进程。幸运的是那完全无用）。列表的格式和 <code class="docutils literal notranslate"><span class="pre">execle()</span></code> 系统调用中的一样。每个字符串项都定义了一个环境变量，比如 <code class="docutils literal notranslate"><span class="pre">NAME=VALUE</span></code></p>
<p>在Lua上，你可以使用 <code class="docutils literal notranslate"><span class="pre">utils.get_env_list()</span></code> 来检索当前环境，比如假设你想添加一个新的变量。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stdin_data</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_STRING</span></code>)</dt><dd><p>向新进程的stdin输入给定的字符串。由于这是一个字符串，你不能传递任意的二进制数据。如果进程在所有数据写入前终止或关闭管道，剩余的数据将被默默地丢弃。可能在win32上不起效。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">passthrough_stdin</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_FLAG</span></code>)</dt><dd><p>如果启用，将新进程的stdin连接到mpv的stdin（默认： no）。在mpv 0.33.0之前，这个参数不存在，但其行为类似于被设置为 yes 。</p>
</dd>
</dl>
<p>该命令返回以下结果（作为 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE_MAP</span></code> ）。</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_INT64</span></code>)</dt><dd><p>通常情况下，如果进程正常结束，这就是进程的退出代码（0或正数），如果出现其它错误（启动失败、被mpv中止等），则为负数。负值的意义未被定义，除了表示错误（不对应操作系统的低级别退出状态值）。</p>
<p>在Windows上，即使进程优雅地退出，也可能会返回一个负值，因为win32的 <code class="docutils literal notranslate"><span class="pre">UINT</span></code> 退出代码在被设置为结果集中的 <code class="docutils literal notranslate"><span class="pre">int64_t</span></code> 字段之前被分配给了一个``int`` 变量。这个问题以后可能会被修复。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stdout</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_BYTE_ARRAY</span></code>)</dt><dd><p>被捕获的stdout流，受限于 <code class="docutils literal notranslate"><span class="pre">capture_size</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stderr</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_BYTE_ARRAY</span></code>)</dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">stdout</span></code> 相同，但用于stderr 。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error_string</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_STRING</span></code>)</dt><dd><p>如果进程正常退出，则为空字符串。如果进程以不寻常的方式终止，则为字符串 <code class="docutils literal notranslate"><span class="pre">killed</span></code> . 如果进程不能被启动，则为字符串  <code class="docutils literal notranslate"><span class="pre">init</span></code> 。</p>
<p>在Windows系统中，只有当进程被mpv杀死时， <code class="docutils literal notranslate"><span class="pre">killed</span></code> 才会被返回，因为 <code class="docutils literal notranslate"><span class="pre">playback_only</span></code> 被设置为true</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">killed_by_us</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_FLAG</span></code>)</dt><dd><p>进程是否被mpv杀死，例如由于 <code class="docutils literal notranslate"><span class="pre">playback_only</span></code> 被设置为true，中止命令（比如通过 <code class="docutils literal notranslate"><span class="pre">mp.abort_async_command()</span></code> ），或者播放器即将退出。</p>
</dd>
</dl>
<p>注意，只要参数正确，命令本身将总是返回success。进程是否可以被生成，或者是否以某种方式被杀死或返回错误状态，必须从结果值中查询。</p>
<p>这个命令可以通过API异步中止。另参见 <a class="reference internal" href="#id11">异步命令详情</a> 。只有 <code class="docutils literal notranslate"><span class="pre">run</span></code> 命令可以以真正分离的方式启动进程。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>如果子进程不是以分离模式启动的，即使 <code class="docutils literal notranslate"><span class="pre">playback_only</span></code> 为false，它也会在播放器退出时被终止。</p>
</div>
<div class="admonition- admonition">
<p class="admonition-title">警告</p>
<p>如果你想在播放器处于空闲状态时运行命令，或者你不想让播放结束时终结命令，不要忘记设置 <code class="docutils literal notranslate"><span class="pre">playback_only</span></code> 的字段为false</p>
</div>
<div class="admonition- admonition">
<p class="admonition-title">示例</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">r</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">command_native</span><span class="p">({</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;subprocess&quot;</span><span class="p">,</span>
    <span class="n">playback_only</span> <span class="o">=</span> <span class="n">false</span><span class="p">,</span>
    <span class="n">capture_stdout</span> <span class="o">=</span> <span class="n">true</span><span class="p">,</span>
    <span class="n">args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="s2">&quot;/proc/cpuinfo&quot;</span><span class="p">},</span>
<span class="p">})</span>
<span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">0</span> <span class="n">then</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;result: &quot;</span> <span class="o">..</span> <span class="n">r</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="n">end</span>
</pre></div>
</div>
<p>这是一个相当无用的Lua例子，它演示了如何以阻塞的方式运行一个进程，并检索其stdout输出。</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">quit</span> <span class="pre">[&lt;code&gt;]</span></code></dt><dd><p>退出播放器。如果给出了一个参数，它将作为进程的退出代码。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">quit-watch-later</span> <span class="pre">[&lt;code&gt;]</span></code></dt><dd><p>退出播放器，并存储当前的播放位置。以后播放该文件时，将跳转到先前的位置。（可选的）参数与 <code class="docutils literal notranslate"><span class="pre">quit</span></code> 命令完全一样。参见 <a href="#id20"><span class="problematic" id="id21">`恢复播放`_</span></a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-add</span> <span class="pre">&lt;url&gt;</span> <span class="pre">[&lt;flags&gt;</span> <span class="pre">[&lt;title&gt;</span> <span class="pre">[&lt;lang&gt;]]]</span></code></dt><dd><p>加载指定的字幕文件或流。默认情况下，加载后它被选为当前字幕。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">flags</span></code> 参数是以下值之一：</p>
</div></blockquote>
<p>&lt;select&gt;</p>
<blockquote>
<div><p>立即选择字幕（默认）</p>
</div></blockquote>
<p>&lt;auto&gt;</p>
<blockquote>
<div><p>不选择字幕（或者在某些特殊情况下，让默认的流选择机制决定）</p>
</div></blockquote>
<p>&lt;cached&gt;</p>
<blockquote>
<div><p>选择字幕。如果已经添加了一个相同文件名的字幕，则选择该字幕，而不是加载一个重复的条目（在这种情况下，标题/语言被忽略，如果在加载后发生了变化，这些变化将不会被反映出来）</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">title</span></code> 参数设置UI中的曲轨道标题。</p>
<p><code class="docutils literal notranslate"><span class="pre">lang</span></code> 参数设置轨道语言，如果 <code class="docutils literal notranslate"><span class="pre">flags</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">auto</span></code> ，也会影响流的选择。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-remove</span> <span class="pre">[&lt;id&gt;]</span></code></dt><dd><p>移除指定的字幕轨。如果缺少 <code class="docutils literal notranslate"><span class="pre">id</span></code> 参数，则移除当前轨道。（只对外部字幕文件有效）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-reload</span> <span class="pre">[&lt;id&gt;]</span></code></dt><dd><p>重新加载指定的字幕轨。如果缺少 <code class="docutils literal notranslate"><span class="pre">id</span></code> 参数，则重新加载当前轨道。（只对外部字幕文件有效）</p>
<p>这通过卸载和重新添加字幕轨道来工作。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-step</span> <span class="pre">&lt;skip&gt;</span> <span class="pre">&lt;flags&gt;</span></code></dt><dd><p>改变字幕时间，使下一个 <code class="docutils literal notranslate"><span class="pre">&lt;skip&gt;</span></code> 字幕事件之后的字幕事件被显示。 <code class="docutils literal notranslate"><span class="pre">&lt;skip&gt;</span></code> 可以是负数以便后退。</p>
<p>第二个参数：</p>
<dl class="simple">
<dt>primary （默认）</dt><dd><p>在主字幕中步进</p>
</dd>
<dt>secondary</dt><dd><p>在次字幕中步进</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-seek</span> <span class="pre">&lt;skip&gt;</span> <span class="pre">&lt;flags&gt;</span></code></dt><dd><p>跳转到下一个（skip设置为1）或上一个（skip设置为-1）字幕。这类似于 <code class="docutils literal notranslate"><span class="pre">sub-step</span></code> ，只是它跳转视频和音频，而不是调整字幕延迟。</p>
<p>第二个参数：</p>
<dl class="simple">
<dt>primary （默认）</dt><dd><p>通过主字幕步进</p>
</dd>
<dt>secondary</dt><dd><p>通过次字幕步进</p>
</dd>
</dl>
<p>对于嵌入式字幕（如Matroska），这只适用于已经显示过的字幕事件，或在一个短的预取范围内。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">print-text</span> <span class="pre">&lt;text&gt;</span></code></dt><dd><p>输出文本到stdout。字符串可以包含属性（参见 <a class="reference internal" href="#id16">属性扩展</a> ）。注意把参数放在引号里。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">show-text</span> <span class="pre">&lt;text&gt;</span> <span class="pre">[&lt;duration&gt;|-1</span> <span class="pre">[&lt;level&gt;]]</span></code></dt><dd><p>在OSD上显示文本。字符串可以包含属性，如 <a class="reference internal" href="#id16">属性扩展</a> 中所述。这可以用来显示播放时间、文件名，等等。</p>
<dl class="simple">
<dt>&lt;duration&gt;</dt><dd><p>显示信息的时间，单位是ms。默认情况下，它使用与 <code class="docutils literal notranslate"><span class="pre">--osd-duration</span></code> 相同的值</p>
</dd>
<dt>&lt;level&gt;</dt><dd><p>显示文本的最小OSD层级（参见 <code class="docutils literal notranslate"><span class="pre">--osd-level</span></code> ）</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">expand-text</span> <span class="pre">&lt;string&gt;</span></code></dt><dd><p>对参数进行属性扩展，并返回扩展后的字符串。这只能通过client API或脚本中的 <code class="docutils literal notranslate"><span class="pre">mp.command_native</span></code> 来使用。（见 <a class="reference internal" href="#id16">属性扩展</a> ）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">expand-path</span> <span class="pre">&quot;&lt;string&gt;&quot;</span></code></dt><dd><p>将一个路径的double-tilde占位符扩展为一个特定平台的路径。与 <code class="docutils literal notranslate"><span class="pre">expand-text</span></code> 一样，这只能通过client API或脚本中的 <code class="docutils literal notranslate"><span class="pre">mp.command_native</span></code> 来使用。</p>
<div class="admonition- admonition">
<p class="admonition-title">示例</p>
<p><code class="docutils literal notranslate"><span class="pre">mp.osd_message(mp.command_native({&quot;expand-path&quot;,</span> <span class="pre">&quot;~~home/&quot;}))</span></code></p>
<p>这一行Lua将在OSD上显示用户的mpv设置目录的位置。</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">show-progress</span></code></dt><dd><p>在OSD上显示进度条、已用时间和文件的总时间。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write-watch-later-config</span></code></dt><dd><p>写入 <code class="docutils literal notranslate"><span class="pre">quit-watch-later</span></code> 命令所写的恢复设置文件，但继续正常播放。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delete-watch-later-config</span> <span class="pre">[&lt;filename&gt;]</span></code></dt><dd><p>删除任何由 <code class="docutils literal notranslate"><span class="pre">quit-watch-later</span></code> 或 <code class="docutils literal notranslate"><span class="pre">write-watch-later-config</span></code> 写入的现有恢复设置文件。如果指定了文件名，那么删除的是该文件的设置；否则，就是在当前情况下由 <code class="docutils literal notranslate"><span class="pre">quit-watch-later</span></code> 或 <code class="docutils literal notranslate"><span class="pre">write-watch-later-config</span></code> 写入的设置。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stop</span> <span class="pre">[&lt;flags&gt;]</span></code></dt><dd><p>停止播放并清除播放列表。在默认设置下，这基本上类似 <code class="docutils literal notranslate"><span class="pre">quit</span></code> 。对client API很有用：可以在不终止播放器的情况下停止播放。</p>
<p>第一个参数是可选的，并支持以下标志：</p>
<dl class="simple">
<dt>keep-playlist</dt><dd><p>不清除播放列表。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mouse</span> <span class="pre">&lt;x&gt;</span> <span class="pre">&lt;y&gt;</span> <span class="pre">[&lt;button&gt;</span> <span class="pre">[&lt;mode&gt;]]</span></code></dt><dd><p>向指定的坐标（ <code class="docutils literal notranslate"><span class="pre">&lt;x&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;y&gt;</span></code> ）发送一个鼠标事件。</p>
<p>第二个参数：</p>
<dl class="simple">
<dt>&lt;button&gt;</dt><dd><p>被点击的鼠标按钮的按钮编号。这应该是0-19中的一个。如果 <code class="docutils literal notranslate"><span class="pre">&lt;button&gt;</span></code> 被省略，只有位置会被更新</p>
</dd>
</dl>
<p>第三个参数：</p>
<dl class="simple">
<dt>&lt;single&gt; （默认）</dt><dd><p>鼠标事件代表常规的单击</p>
</dd>
<dt>&lt;double&gt;</dt><dd><p>鼠标事件代表双击</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keypress</span> <span class="pre">&lt;name&gt;</span></code></dt><dd><p>通过mpv的输入处理程序发送一个key event，触发为该按键设置的任何行为。 <code class="docutils literal notranslate"><span class="pre">name</span></code> 使用 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 的命名方案来命名按键和修饰键。对client API很有用：key events可以被发送到libmpv内部来处理。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keydown</span> <span class="pre">&lt;name&gt;</span></code></dt><dd><p>类似于 <code class="docutils literal notranslate"><span class="pre">keypress</span></code> ，但设置了 <code class="docutils literal notranslate"><span class="pre">KEYDOWN</span></code> 标志，因此，如果按键被绑定到一个可重复的命令，它将随着mpv的按键重复计时重复运行，直到 <code class="docutils literal notranslate"><span class="pre">keyup</span></code> 命令被再次调用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keyup</span> <span class="pre">[&lt;name&gt;]</span></code></dt><dd><p>设置 <code class="docutils literal notranslate"><span class="pre">KEYUP</span></code> 标志，停止任何已经触发的重复行为。 <code class="docutils literal notranslate"><span class="pre">name</span></code> 是可选的。如果 <code class="docutils literal notranslate"><span class="pre">name</span></code> 没有指定或为空字符串， <code class="docutils literal notranslate"><span class="pre">KEYUP</span></code> 将被设置在所有按键上。否则， <code class="docutils literal notranslate"><span class="pre">KEYUP</span></code> 将只设置在 <code class="docutils literal notranslate"><span class="pre">name</span></code> 指定的键上。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keybind</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;command&gt;</span></code></dt><dd><p>将一个键与一个输入命令绑定。 <code class="docutils literal notranslate"><span class="pre">command</span></code> 必须是一个完整的命令，包含所有需要的参数和标志。 <code class="docutils literal notranslate"><span class="pre">name</span></code> 和 <code class="docutils literal notranslate"><span class="pre">command</span></code> 都使用 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 的命名方式。这主要对client API有用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-add</span> <span class="pre">&lt;url&gt;</span> <span class="pre">[&lt;flags&gt;</span> <span class="pre">[&lt;title&gt;</span> <span class="pre">[&lt;lang&gt;]]]</span></code></dt><dd><p>加载指定的音频文件。参见 <code class="docutils literal notranslate"><span class="pre">sub-add</span></code> 命令。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-remove</span> <span class="pre">[&lt;id&gt;]</span></code></dt><dd><p>移除指定的音轨。参见 <code class="docutils literal notranslate"><span class="pre">sub-remove</span></code> 命令。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-reload</span> <span class="pre">[&lt;id&gt;]</span></code></dt><dd><p>重新加载指定的音轨。参见 <code class="docutils literal notranslate"><span class="pre">sub-reload</span></code> 命令。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-add</span> <span class="pre">&lt;url&gt;</span> <span class="pre">[&lt;flags&gt;</span> <span class="pre">[&lt;title&gt;</span> <span class="pre">[&lt;lang&gt;</span> <span class="pre">[&lt;albumart&gt;]]]]</span></code></dt><dd><p>加载指定的视频文件。常见选项参见 <code class="docutils literal notranslate"><span class="pre">sub-add</span></code> 命令。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">albumart</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_FLAG</span></code>)</dt><dd><p>如果启用，mpv将加载指定视频作为专辑封面。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-remove</span> <span class="pre">[&lt;id&gt;]</span></code></dt><dd><p>移除指定的视频轨道。参见 <code class="docutils literal notranslate"><span class="pre">sub-remove</span></code> 命令。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-reload</span> <span class="pre">[&lt;id&gt;]</span></code></dt><dd><p>重新加载指定的视频轨道。参见 <code class="docutils literal notranslate"><span class="pre">sub-reload</span></code> 命令。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rescan-external-files</span> <span class="pre">[&lt;mode&gt;]</span></code></dt><dd><p>根据当前的 <code class="docutils literal notranslate"><span class="pre">--sub-auto</span></code>, <code class="docutils literal notranslate"><span class="pre">--audio-file-auto</span></code> 和 <code class="docutils literal notranslate"><span class="pre">--cover-art-auto</span></code> 设置重新扫描外部文件。这可以用来自动加载外部文件，在文件被加载 <em>之后</em> 。</p>
<p><code class="docutils literal notranslate"><span class="pre">mode</span></code> 参数是以下之一：</p>
<dl class="simple">
<dt>&lt;reselect&gt; （默认）</dt><dd><p>选择默认的音频和字幕流，这通常会选择具有最高优先级的外部文件（这个实现并不完美，可以根据要求进行改进）</p>
</dd>
<dt>&lt;keep-selection&gt;</dt><dd><p>不改变当前的音轨选择</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="id7">
<h2>可能变更的输入命令<a class="headerlink" href="#id7" title="此标题的永久链接">#</a></h2>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">af</span> <span class="pre">&lt;operation&gt;</span> <span class="pre">&lt;value&gt;</span></code></dt><dd><p>变更音频滤镜链。参见 <code class="docutils literal notranslate"><span class="pre">vf</span></code> 命令。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vf</span> <span class="pre">&lt;operation&gt;</span> <span class="pre">&lt;value&gt;</span></code></dt><dd><p>变更视频滤镜链。</p>
<p>其语义与选项解析完全相同（参见 <a href="#id22"><span class="problematic" id="id23">`视频滤镜`_</span></a> ）。因此，下面的文字是一个多余的、不完整的总结。</p>
<p>第一个参数决定发生什么：</p>
<dl>
<dt>&lt;set&gt;</dt><dd><p>用新的滤镜链覆盖之前的滤镜链</p>
</dd>
<dt>&lt;add&gt;</dt><dd><p>将新的滤镜链追加到之前的滤镜链后方</p>
</dd>
<dt>&lt;toggle&gt;</dt><dd><p>检查指定的滤镜（有准确的参数）是否已经存在视频滤镜链中。如果存在，移除该滤镜。如果不存在，则追加该滤镜（如果多个滤镜被传递到命令中，逐个滤镜执行）</p>
<p>一个特殊的变量是把它和标签结合起来，用 <code class="docutils literal notranslate"><span class="pre">&#64;name</span></code> 不带滤镜名称和参数作为滤镜条目。这样就可以切换启用/禁用标志。</p>
</dd>
<dt>&lt;remove&gt;</dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">toggle</span></code> ，但始终移除滤镜链上的指定滤镜</p>
</dd>
<dt>&lt;del&gt;</dt><dd><p>从视频链中移除指定的滤镜。与其他情况不同，第二个参数是一个用逗号分隔的滤镜名称或整数索引列表。 <code class="docutils literal notranslate"><span class="pre">0</span></code> 将表示第一个滤镜。负数的索引从最后一个滤镜开始， <code class="docutils literal notranslate"><span class="pre">-1</span></code> 表示最后一个滤镜。已过时，使用 <code class="docutils literal notranslate"><span class="pre">remove</span></code> 。</p>
</dd>
<dt>&lt;clr&gt;</dt><dd><p>移除所有滤镜。注意，和其他子命令一样，这并不能控制自动插入的滤镜</p>
</dd>
</dl>
<p>参数总是需要的。例如，如果 <code class="docutils literal notranslate"><span class="pre">clr</span></code> ，使用 <code class="docutils literal notranslate"><span class="pre">vf</span> <span class="pre">clr</span> <span class="pre">&quot;&quot;</span></code></p>
<p>你可以通过在滤镜前加上 <code class="docutils literal notranslate"><span class="pre">&#64;name:</span></code> （其中 <code class="docutils literal notranslate"><span class="pre">name</span></code> 是用户选择的任意标识符）为滤镜指定标签。标签可以用来在所有的滤镜链修改命令中用名字来指代滤镜。对于 <code class="docutils literal notranslate"><span class="pre">add</span></code> 来说，使用一个已经使用过的标签将取代现有的滤镜。</p>
<p><code class="docutils literal notranslate"><span class="pre">vf</span></code> 命令在修改滤镜链后在OSD上显示所请求的滤镜列表。这大致相当于 <code class="docutils literal notranslate"><span class="pre">show-text</span> <span class="pre">${vf}</span></code> 。注意，用于格式转换的自动插入的滤镜不显示在列表中，只显示用户请求的内容。</p>
<p>通常情况下，命令会检查视频链是否重新创建成功，失败时将撤销操作。如果命令在视频设置之前运行（如果命令在打开文件后，在视频帧被解码之前立即运行，就可能发生），这个检查就不能运行。那么就可能发生创建视频链失败的情况。</p>
<div class="admonition-input-conf admonition">
<p class="admonition-title">input.conf的示例</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">vf</span> <span class="pre">set</span> <span class="pre">vflip</span></code> <code class="docutils literal notranslate"><span class="pre">a</span></code> 键把视频上下颠倒</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">vf</span> <span class="pre">set</span> <span class="pre">&quot;&quot;</span></code> <code class="docutils literal notranslate"><span class="pre">b</span></code> 键移除所有视频滤镜</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">vf</span> <span class="pre">toggle</span> <span class="pre">gradfun</span></code> <code class="docutils literal notranslate"><span class="pre">c</span></code> 键切换去色带</p></li>
</ul>
</div>
<div class="admonition- admonition">
<p class="admonition-title">如何在运行时切换禁用的滤镜的示例</p>
<ul class="simple">
<li><p>在 <code class="docutils literal notranslate"><span class="pre">mpv.conf</span></code> 中加入类似 <code class="docutils literal notranslate"><span class="pre">vf-add=&#64;deband:!gradfun</span></code> 的内容。 <code class="docutils literal notranslate"><span class="pre">&#64;deband:</span></code> 是标签，是用户为这个滤镜条目任意起的名字。滤镜名称前的 <code class="docutils literal notranslate"><span class="pre">!</span></code> 默认情况下禁用该过滤器。之后的内容是正常的滤镜名称和可能的滤镜参数，就像正常的 <code class="docutils literal notranslate"><span class="pre">--vf</span></code> 语法一样。</p></li>
<li><p>在 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 中添加 <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">vf</span> <span class="pre">toggle</span> <span class="pre">&#64;deband</span></code> 。当按下 <code class="docutils literal notranslate"><span class="pre">a</span></code> 键时，这将切换标签为 <code class="docutils literal notranslate"><span class="pre">deband</span></code> 的过滤器的 “disable” 标志。</p></li>
</ul>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cycle-values</span> <span class="pre">[&lt;&quot;!reverse&quot;&gt;]</span> <span class="pre">&lt;property&gt;</span> <span class="pre">&lt;value1&gt;</span> <span class="pre">[&lt;value2&gt;</span> <span class="pre">[...]]</span></code></dt><dd><p>循环一系列值的列表。每次调用该命令将把指定的属性设置为列表中的下一个值。该命令将使用属性/选项的当前值，并利用它来确定当前在值列表中的位置。一旦找到它，将设置为列表中的下一个值（如果需要的话，将回到第一个项目）。</p>
<p>这个命令的参数数量不定，不能与命名参数一起使用。</p>
<p>特殊参数 <code class="docutils literal notranslate"><span class="pre">!reverse</span></code> 可以用来反向循环值列表。唯一的好处是，在添加第二个按键绑定的时候，你不需要自己反转值列表进行循环。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enable-section</span> <span class="pre">&lt;name&gt;</span> <span class="pre">[&lt;flags&gt;]</span></code></dt><dd><p>除mpv内部使用外，此命令已过时。</p>
<p>启用命名的输入部分的所有按键绑定。</p>
<p>启用的输入部分形成一个堆栈。在堆栈顶部的部分的绑定比下部的部分优先。这条命令将该部分放在堆栈的顶部。如果该部分已经在堆栈上，它将被事先隐式地移除（一个部分不能在堆栈中出现多次）。</p>
<p>参数 <code class="docutils literal notranslate"><span class="pre">flags</span></code> 可以是下列标志的组合（用 <code class="docutils literal notranslate"><span class="pre">+</span></code> 分隔）：</p>
<dl class="simple">
<dt>&lt;exclusive&gt;</dt><dd><p>在新启用的部分之前启用的所有部分都被禁用。一旦它们上面的所有独占部分被移除，它们将被重新启用。换句话说，新的部分会影射所有之前的部分。</p>
</dd>
<dt>&lt;allow-hide-cursor&gt;</dt><dd><p>此功能不能通过公开API使用。</p>
</dd>
<dt>&lt;allow-vo-dragging&gt;</dt><dd><p>同上。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable-section</span> <span class="pre">&lt;name&gt;</span></code></dt><dd><p>除mpv内部使用外，此命令已过时。</p>
<p>禁用命名的输入部分。撤销 <code class="docutils literal notranslate"><span class="pre">enable-section</span></code> 。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">define-section</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;contents&gt;</span> <span class="pre">[&lt;flags&gt;]</span></code></dt><dd><p>除mpv内部使用外，此命令已过时。</p>
<p>创建一个命名的输入部分，或者替换一个已经存在的输入部分的内容。 <code class="docutils literal notranslate"><span class="pre">contents</span></code> 参数使用与 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 文件相同的语法（除了不允许在其中使用section的语法），包括需要用换行符来分隔绑定的内容。</p>
<p>如果 <code class="docutils literal notranslate"><span class="pre">contents</span></code> 参数是一个空字符串，则该部分被移除。</p>
<p>名为 <code class="docutils literal notranslate"><span class="pre">default</span></code> 的部分是正常的输入部分。</p>
<p>一般来说，输入部分必须用 <code class="docutils literal notranslate"><span class="pre">enable-section</span></code> 命令启用，否则会被忽略。</p>
<p>最后一个参数有如下含义：</p>
<dl class="simple">
<dt>&lt;default&gt; （如果省略了该参数也可）</dt><dd><p>只有当用户还没有把这个键绑定到一个命令时，才使用这个部分定义的按键绑定。</p>
</dd>
<dt>&lt;force&gt;</dt><dd><p>始终绑定一个按键（如果有歧义，则使用最近被激活的输入部分）。</p>
</dd>
</dl>
<p>这个命令可以用来给脚本或客户端API用户分配任意的键。如果输入部分定义了 <code class="docutils literal notranslate"><span class="pre">script-binding</span></code> 的命令，也可以获得单独的按键up/down事件，以及相对详细的按键状态信息。特殊的键名 <code class="docutils literal notranslate"><span class="pre">unmapped</span></code> 可以用来匹配任何未映射的按键。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">overlay-add</span> <span class="pre">&lt;id&gt;</span> <span class="pre">&lt;x&gt;</span> <span class="pre">&lt;y&gt;</span> <span class="pre">&lt;file&gt;</span> <span class="pre">&lt;offset&gt;</span> <span class="pre">&lt;fmt&gt;</span> <span class="pre">&lt;w&gt;</span> <span class="pre">&lt;h&gt;</span> <span class="pre">&lt;stride&gt;</span></code></dt><dd><p>添加一个来自原始数据的OSD叠加层。这对控制mpv的脚本和应用程序可能很有用，它们想在视频窗口上面显示内容。</p>
<p>叠加层通常是以屏幕分辨率显示的，但对于某些视频输出驱动来说，分辨率会降低到视频的分辨率。你可以阅读 <code class="docutils literal notranslate"><span class="pre">osd-width</span></code> 和 <code class="docutils literal notranslate"><span class="pre">osd-height</span></code> 属性。至少对于 <code class="docutils literal notranslate"><span class="pre">--vo-xv</span></code> 和变形视频（如DVD）， <code class="docutils literal notranslate"><span class="pre">osd-par</span></code> 也应该被读取，并且覆盖层应该遵循是宽高比补偿的。</p>
<p>这有以下命名参数。它们的顺序是不被保证的，所以你应该始终用命名参数来调用它们，参见 <a class="reference internal" href="#id5">命名参数</a></p>
<p><code class="docutils literal notranslate"><span class="pre">id</span></code> 是一个介于0到63之间的整数，用于识别叠加元素。这个ID可以用来添加多个覆盖部分，通过使用这个命令更新一个已经存在的ID的部分，或者用 <code class="docutils literal notranslate"><span class="pre">overlay-remove</span></code> 来移除一个部分。使用一个先前未使用的ID将添加一个新的覆盖层，而重复使用一个ID将更新它。</p>
<p><code class="docutils literal notranslate"><span class="pre">x</span></code> 和 <code class="docutils literal notranslate"><span class="pre">y</span></code> 指定OSD应该显示的位置。</p>
<p><code class="docutils literal notranslate"><span class="pre">file</span></code> 指定从原始图像数据读取的文件。它可以是以 <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> 为前缀的数字UNIX文件描述符（例如： <code class="docutils literal notranslate"><span class="pre">&#64;4</span></code> ），也可以是文件名。文件将被 <code class="docutils literal notranslate"><span class="pre">mmap()</span></code> 映射到内存中，被复制，并在命令返回前解除映射（在mpv 0.18.1中已改变）。</p>
<p>也可以通过传递内存地址作为整数前缀的 <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> 字符来传递原始内存地址作为位图内存使用。在这里传递错误的东西会使播放器崩溃。这种模式在与libmpv一起使用时可能很有用。 <code class="docutils literal notranslate"><span class="pre">offset</span></code> 参数被简单地添加到内存地址中（从mpv 0.8.0开始，之前被忽略）。</p>
<p><code class="docutils literal notranslate"><span class="pre">offset</span></code> 是源文件中第一个像素的字节偏移（目前的实现总是将整个文件从位置0到图像的末端进行mmap，所以应该避免大的偏移量。在mpv 0.8.0之前，偏移量实际上是直接传递给 <code class="docutils literal notranslate"><span class="pre">mmap</span></code> 的，但为了使用更方便，它被改变了）。</p>
<p><code class="docutils literal notranslate"><span class="pre">fmt</span></code> 是一个标识图像格式的字符串。目前，只有 <code class="docutils literal notranslate"><span class="pre">bgra</span></code> 被定义。这种格式每个像素有4个字节，每个部分有8位。最不重要的8位是蓝色，最重要的8位是alpha（在little endian中，组成是B-G-R-A，B是第一个字节）。这使用了预乘alpha：每个颜色分量都已经与alpha分量相乘。这意味着每个分量的数值都等于或小于alpha分量（违反这个规则会导致不同视频输出驱动的不同结果：由于混合损坏的alpha值而导致的数值溢出被认为是不应该发生的事情，因此，在这种情况下，该实现并不能确保你得到可预测的行为）。</p>
<p><code class="docutils literal notranslate"><span class="pre">w</span></code> , <cite>h`</cite> 和 <code class="docutils literal notranslate"><span class="pre">stride</span></code> 指定覆盖层的尺寸。 <code class="docutils literal notranslate"><span class="pre">w</span></code> 是覆盖层的可见宽度，而 <code class="docutils literal notranslate"><span class="pre">stride</span></code> 给出的是内存中的字节宽度。在简单的情况下，使用 <code class="docutils literal notranslate"><span class="pre">bgra</span></code> 格式， <code class="docutils literal notranslate"><span class="pre">stride==4*w</span></code> 。一般来说，访问的内存总量是 <code class="docutils literal notranslate"><span class="pre">stride</span> <span class="pre">*</span> <span class="pre">h</span></code> （从技术上讲，最小的尺寸是 <code class="docutils literal notranslate"><span class="pre">stride</span> <span class="pre">*</span> <span class="pre">(h</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">+</span> <span class="pre">w</span> <span class="pre">*</span> <span class="pre">4</span></code> ，但是为了简单起见，播放器将访问所有 <code class="docutils literal notranslate"><span class="pre">stride</span> <span class="pre">*</span> <span class="pre">h</span></code> 的字节）。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>在mpv 0.18.1之前，当更新一个覆盖层时，你必须手动进行“双重缓冲”，用一个不同的内存缓冲区来替换它。从mpv 0.18.1开始，内存被简单地复制，并且在提交返回后不引用任何由命令参数指示的内存。如果你想在mpv 0.18.1之前使用这个命令，请阅读旧的文档，看看如何正确处理这个问题。</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">overlay-remove</span> <span class="pre">&lt;id&gt;</span></code></dt><dd><p>移除用 <code class="docutils literal notranslate"><span class="pre">overlay-add</span></code> 添加的相同ID的覆盖层。如果没有这个ID的覆盖层，则不做任何处理。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-overlay</span></code></dt><dd><p>添加/更新/移除一个OSD覆盖层。</p>
<p>（尽管这听起来与 <code class="docutils literal notranslate"><span class="pre">overlay-add</span></code> 相似， <code class="docutils literal notranslate"><span class="pre">osd-overlay</span></code> 是用于文本覆盖，而 <code class="docutils literal notranslate"><span class="pre">overlay-add</span></code> 是用于位图。也许 <code class="docutils literal notranslate"><span class="pre">overlay-add</span></code> 将被合并到 <code class="docutils literal notranslate"><span class="pre">osd-overlay</span></code> 中，以消除这种奇怪的现象。）</p>
<p>你可以用它来添加ASS格式的文本覆盖层。ASS有高级的定位和渲染标签，可以用来渲染几乎所有种类的矢量图形。</p>
<p>这个命令接受以下参数：</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt><dd><p>识别覆盖层的任意整数。用不同的 <code class="docutils literal notranslate"><span class="pre">id</span></code> 参数调用此命令，可以添加多个覆盖层。用相同的 <code class="docutils literal notranslate"><span class="pre">id</span></code> 调用这个命令，会替换之前设置的覆盖层。</p>
<p>每个libmpv客户端（即IPC连接、脚本）都有一个单独的命名空间，所以ID可以由API用户编排和分配，而不会与其他API用户冲突。</p>
<p>如果libmpv客户端被销毁，所有与之相关的覆盖层也会被移除。特别是，通过 <code class="docutils literal notranslate"><span class="pre">--input-ipc-server</span></code> 连接，添加一个覆盖层，然后断开连接，将再次立即移除该覆盖层。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>给出覆盖层类型的字符串。接受以下值（HTML渲染已损坏，请查看生成的手册，或原始RST源）：</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">ass-events</span></code></dt><dd><p>参数 <code class="docutils literal notranslate"><span class="pre">data</span></code> 是一个字符串。该字符串在换行符上被分隔。每一行都被转化为 <code class="docutils literal notranslate"><span class="pre">Dialogue</span></code> ASS事件的 <code class="docutils literal notranslate"><span class="pre">Text</span></code> 部分。计时是不使用的（但依赖计时的ASS标签的行为可能会在未来的mpv版本中改变）。</p>
<p>注意，最好把多行放入 <code class="docutils literal notranslate"><span class="pre">data</span></code> ，而不是添加多个OSD覆盖。</p>
<p>这提供了2个ASS的 <code class="docutils literal notranslate"><span class="pre">Styles</span></code> 。 <code class="docutils literal notranslate"><span class="pre">OSD</span></code> 包含由当前 <code class="docutils literal notranslate"><span class="pre">--OSD-...</span></code> 选项定义的文本样式。 <code class="docutils literal notranslate"><span class="pre">Default</span></code> 也是类似的，包含 <code class="docutils literal notranslate"><span class="pre">OSD</span></code> 在所有选项都设置为默认情况下的风格。</p>
<p>此外， <code class="docutils literal notranslate"><span class="pre">res_x</span></code> 和 <code class="docutils literal notranslate"><span class="pre">res_y</span></code> 选项指定 ASS <code class="docutils literal notranslate"><span class="pre">PlayResX</span></code> 和 <code class="docutils literal notranslate"><span class="pre">PlayResY</span></code> 头部域的值。如果 <code class="docutils literal notranslate"><span class="pre">res_y</span></code> 被设置为0， <code class="docutils literal notranslate"><span class="pre">PlayResY</span></code> 将被初始化为一个任意的默认值（但注意这个命令的默认值是720，不是0）。如果 <code class="docutils literal notranslate"><span class="pre">res_x</span></code> 被设置为0， <code class="docutils literal notranslate"><span class="pre">PlayResX</span></code> 将根据 <code class="docutils literal notranslate"><span class="pre">res_y</span></code> 来设置，这样虚拟的ASS像素就有一个方形的像素宽高比。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">none</span></code></dt><dd><p>特殊值，导致覆盖层被移除。除了 <code class="docutils literal notranslate"><span class="pre">id</span></code> 和 <code class="docutils literal notranslate"><span class="pre">format</span></code> 以外的大多数参数都被忽略。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt><dd><p>根据 <code class="docutils literal notranslate"><span class="pre">format</span></code> 参数，定义覆盖内容的字符串。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">res_x</span></code> , <code class="docutils literal notranslate"><span class="pre">res_y</span></code></dt><dd><p>如果 <code class="docutils literal notranslate"><span class="pre">format</span></code> 被设置为 <code class="docutils literal notranslate"><span class="pre">ass-events</span></code> （参见那部分的描述），则使用。这是可选的，默认为0/720。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">z</span></code></dt><dd><p>叠加的Z顺序。这是可选的，默认为0。</p>
<p>注意，不同格式的覆盖层之间的Z顺序是静态的，不能改变（目前，这意味着由 <code class="docutils literal notranslate"><span class="pre">overlay-add</span></code> 添加的位图覆盖层总是在由 <code class="docutils literal notranslate"><span class="pre">osd-overlay</span></code> 添加的ASS覆盖层之上）。此外，内置的OSD组件总是在任何自定义OSD的下方（这包括任何形式的字幕以及由 <code class="docutils literal notranslate"><span class="pre">show-text</span></code> 渲染的文本）。</p>
<p>未来的mpv版本可能会随机改变不同OSD格式和内置OSD之间的Z顺序的处理方式。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hidden</span></code></dt><dd><p>如果设置为 true，就不显示它（默认： false）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compute_bounds</span></code></dt><dd><p>如果设置为 true，尝试确定边界并将其作为 <code class="docutils literal notranslate"><span class="pre">x0</span></code>, <code class="docutils literal notranslate"><span class="pre">x1</span></code>, <code class="docutils literal notranslate"><span class="pre">y0</span></code>, <code class="docutils literal notranslate"><span class="pre">y1</span></code> 的矩形写入命令的结果值（默认： false）。如果矩形是空的，未知的，或者某种程度上是退化的，则不设置。 <code class="docutils literal notranslate"><span class="pre">x1</span></code>/<code class="docutils literal notranslate"><span class="pre">y1</span></code> 是矩形的底端独占角的坐标。</p>
<p>结果值可能取决于视频输出驱动窗口的大小，并且是基于调用时最后已知的窗口大小。这意味着结果可能与实际渲染的内容不同。</p>
<p>对于 <code class="docutils literal notranslate"><span class="pre">ass-events</span></code> ，结果矩形被重新计算为 <code class="docutils literal notranslate"><span class="pre">PlayRes</span></code> 坐标（ <code class="docutils literal notranslate"><span class="pre">res_x</span></code> / <code class="docutils literal notranslate"><span class="pre">res_y</span></code> ）。如果窗口尺寸未知，就会选择一个回退值。</p>
<p>你应该意识到这个机制是非常低效的，因为它渲染了全部的结果，然后使用渲染的位图列表的边界框（即使 <code class="docutils literal notranslate"><span class="pre">hidden</span></code> 被设置）。它将刷新各种缓存。它的结果也取决于所使用的libass版本。</p>
<p>该功能是实验性的，可能会以某种方式再次改变。</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>始终使用命名参数（ <code class="docutils literal notranslate"><span class="pre">mpv_command_node()</span></code> ）。Lua脚本应该使用 <code class="docutils literal notranslate"><span class="pre">mp.create_osd_overlay()</span></code> 帮助器，而不是直接调用这个命令。</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">script-message</span> <span class="pre">[&lt;arg1&gt;</span> <span class="pre">[&lt;arg2&gt;</span> <span class="pre">[...]]]</span></code></dt><dd><p>向所有clients发送一条消息，并把以下参数列表传递给它。这个消息是什么意思，它需要多少个参数，以及这些参数是什么意思，完全由接收方和发送方决定。每个client都会收到这个消息，所以要注意命名的冲突（或者使用 <code class="docutils literal notranslate"><span class="pre">script-message-to</span></code> ）。</p>
<p>这个命令的参数数量不定，不能与命名参数一起使用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">script-message-to</span> <span class="pre">&lt;target&gt;</span> <span class="pre">[&lt;arg1&gt;</span> <span class="pre">[&lt;arg2&gt;</span> <span class="pre">[...]]]</span></code></dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">script-message</span></code> 相同，但只发送给名为 <code class="docutils literal notranslate"><span class="pre">&lt;target&gt;</span></code> 的client。每个client（脚本等）都有一个唯一的名字。例如，Lua脚本可以通过 <code class="docutils literal notranslate"><span class="pre">mp.get_script_name()</span></code> 获得其名称。注意，clients名只能由字母数字字符和 <code class="docutils literal notranslate"><span class="pre">_</span></code> 组成。</p>
<p>这个命令的参数数量不定，不能与命名参数一起使用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">script-binding</span> <span class="pre">&lt;name&gt;</span></code></dt><dd><p>调用一个脚本提供的按键绑定。这可以用来重新映射由外部Lua脚本提供的按键绑定。</p>
<p>参数是绑定的名称。</p>
<p>它可以选择以脚本的名称为前缀，使用 <code class="docutils literal notranslate"><span class="pre">/</span></code> 作为分隔符，例如 <code class="docutils literal notranslate"><span class="pre">script-binding</span> <span class="pre">scriptname/bindingname</span></code> 。注意，脚本名称只能由字母数字字符和 <code class="docutils literal notranslate"><span class="pre">_</span></code> 组成。</p>
<p>为了完整起见，这里是这个命令的内部工作方式。细节可能随时改变。在任何匹配的按键事件中， <code class="docutils literal notranslate"><span class="pre">script-message-to</span></code> 或 <code class="docutils literal notranslate"><span class="pre">script-message</span></code> 被调用（取决于是否包含脚本名称），参数如下：</p>
<ol class="arabic simple">
<li><p>字符串 <code class="docutils literal notranslate"><span class="pre">key-binding</span></code></p></li>
<li><p>绑定的名称（如上所述）</p></li>
<li><p>作为字符串的按键状态（见下文）</p></li>
<li><p>按键名称（从mpv0.15.0开始）</p></li>
<li><p>该键将产生的文本，如果不适用，则为空字符串</p></li>
</ol>
<p>第5个参数只有在没有修饰键的情况下才会被设置（将shift键与字母一起使用通常不会发出带有修饰键的消息，而是会生成大写文本，但某些后端可能会出错）。</p>
<p>按键状态由2个字符组成：</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">d``（键被按下），</span> <span class="pre">``u</span></code> （被释放）， <code class="docutils literal notranslate"><span class="pre">r</span></code> （键仍然在下，并且被重复；只有当此绑定的键重复被启用时）， <code class="docutils literal notranslate"><span class="pre">p</span></code> （键被按下；如果上/下不能被追踪，则发生）</p></li>
<li><p>事件是否来自鼠标， <code class="docutils literal notranslate"><span class="pre">m</span></code> （鼠标按钮）或 <code class="docutils literal notranslate"><span class="pre">-</span></code> （其它）</p></li>
</ol>
<p>未来的版本可能增加更多的参数和更多的按键状态字符，以支持更多的输入特性。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ab-loop</span></code></dt><dd><p>在A-B循环状态中循环。第一次命令将设置 <code class="docutils literal notranslate"><span class="pre">A</span></code> 点（ <code class="docutils literal notranslate"><span class="pre">ab-loop-a</span></code> 属性）；第二次是 <code class="docutils literal notranslate"><span class="pre">B</span></code> 点，第三次将清除两个点。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">drop-buffers</span></code></dt><dd><p>删除音频/视频/解复用器的缓存，并从新开始刷新。这可能有助于处理无法同步的流。这个命令在将来可能会被修改或移除。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">screenshot-raw</span> <span class="pre">[&lt;flags&gt;]</span></code></dt><dd><p>在内存中返回一个屏幕截图。这只能通过client API使用。这个命令返回的MPV_FORMAT_NODE_MAP的 <code class="docutils literal notranslate"><span class="pre">w</span></code>, <code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">stride</span></code> 字段被设置为明显的内容。 <code class="docutils literal notranslate"><span class="pre">format</span></code> 字段默认设置为 <code class="docutils literal notranslate"><span class="pre">bgr0</span></code> 。这个格式被组织为 <code class="docutils literal notranslate"><span class="pre">B8G8R8X8</span></code> （其中 <code class="docutils literal notranslate"><span class="pre">B</span></code> 是LSB）。填充物 <code class="docutils literal notranslate"><span class="pre">X</span></code> 的内容是未定义的。 <code class="docutils literal notranslate"><span class="pre">data</span></code> 字段是MPV_FORMAT_BYTE_ARRAY类型，包含实际图像数据。当结果mpv_node被释放时，图像也被释放。像通常的client API语义一样，你不允许写入图像数据。</p>
<p><code class="docutils literal notranslate"><span class="pre">stride</span></code> 是指从 <code class="docutils literal notranslate"><span class="pre">(x0,</span> <span class="pre">y0)</span></code> 的像素到 <code class="docutils literal notranslate"><span class="pre">(x0,</span> <span class="pre">y0</span> <span class="pre">+</span> <span class="pre">1)</span></code> 的像素的字节数。如果图像被裁剪，或者有边距，这个数字可以大于 <code class="docutils literal notranslate"><span class="pre">w</span> <span class="pre">*</span> <span class="pre">4</span></code> 。这个数字也可以是负数。你可以用 <code class="docutils literal notranslate"><span class="pre">byte_index</span> <span class="pre">=</span> <span class="pre">y</span> <span class="pre">*</span> <span class="pre">stride</span> <span class="pre">+</span> <span class="pre">x</span> <span class="pre">*</span> <span class="pre">4</span></code> 访问一个像素（假设是 <code class="docutils literal notranslate"><span class="pre">bgr0</span></code> 格式）。</p>
<p><code class="docutils literal notranslate"><span class="pre">flags</span></code> 参数与 <code class="docutils literal notranslate"><span class="pre">screenshot</span></code> 的第一个参数一样，支持 <code class="docutils literal notranslate"><span class="pre">subtitles</span></code>, <code class="docutils literal notranslate"><span class="pre">video</span></code>, <code class="docutils literal notranslate"><span class="pre">window</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vf-command</span> <span class="pre">&lt;label&gt;</span> <span class="pre">&lt;command&gt;</span> <span class="pre">&lt;argument&gt;</span></code></dt><dd><p>向滤镜发送一个命令，带有指定的 <code class="docutils literal notranslate"><span class="pre">&lt;label&gt;</span></code> 。使用 <code class="docutils literal notranslate"><span class="pre">all</span></code> 可以一次性发送给所有滤镜。命令和参数字符串是针对滤镜的。目前，这只适用于 <code class="docutils literal notranslate"><span class="pre">lavfi</span></code> 滤镜 —— 参见libavfilter文档，了解滤镜支持的命令。</p>
<p>注意， <code class="docutils literal notranslate"><span class="pre">&lt;label&gt;</span></code> 是mpv滤镜的标签，不是libavfilter滤镜的名称。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">af-command</span> <span class="pre">&lt;label&gt;</span> <span class="pre">&lt;command&gt;</span> <span class="pre">&lt;argument&gt;</span></code></dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">vf-command</span></code> 相同，但用于音频滤镜。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">apply-profile</span> <span class="pre">&lt;name&gt;</span> <span class="pre">[&lt;mode&gt;]</span></code></dt><dd><p>应用一个已命名的配置预设的内容。这就像在设置文件中使用 <code class="docutils literal notranslate"><span class="pre">profile=name</span></code> ，你除了可以把它映射到一个按键绑定，也可在运行时更改它。</p>
<p>模式参数：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">default</span></code></dt><dd><p>应用该配置文件。如果省略该参数，则为默认。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">restore</span></code></dt><dd><p>恢复执行 <code class="docutils literal notranslate"><span class="pre">apply-profile</span></code> 命令应用该配置预设之前的选项。只有当配置预设的 <code class="docutils literal notranslate"><span class="pre">profile-restore</span></code> 设置为相关的模式时才有效。如果没有操作执行，则输出一个警告。详情参见 <a href="#id24"><span class="problematic" id="id25">`运行时的配置预设`_</span></a></p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">load-script</span> <span class="pre">&lt;filename&gt;</span></code></dt><dd><p>加载一个脚本，类似于 <code class="docutils literal notranslate"><span class="pre">--script</span></code> 选项。这是否等待脚本完成初始化已被改变了多次，未来的行为未被定义。</p>
<p>成功后，返回一个 <code class="docutils literal notranslate"><span class="pre">mpv_node</span></code> ，其 <code class="docutils literal notranslate"><span class="pre">client_id</span></code> 字段设置为新创建的脚本句柄的 <code class="docutils literal notranslate"><span class="pre">mpv_client_id()</span></code> API调用的返回值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">change-list</span> <span class="pre">&lt;name&gt;</span> <span class="pre">&lt;operation&gt;</span> <span class="pre">&lt;value&gt;</span></code></dt><dd><p>该命令改变一系列的选项列表，如 <a href="#id26"><span class="problematic" id="id27">`列表选项`_</span></a> 中所述。 <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> 参数是普通的选项名称，而 <code class="docutils literal notranslate"><span class="pre">&lt;operation&gt;</span></code> 是选项的后缀或操作。</p>
<p>有些操作不取值，但命令仍然需要值参数。在这些情况下，值必须是一个空字符串。</p>
<div class="admonition- admonition">
<p class="admonition-title">示例</p>
<p><code class="docutils literal notranslate"><span class="pre">change-list</span> <span class="pre">glsl-shaders</span> <span class="pre">append</span> <span class="pre">file.glsl</span></code></p>
<p>将一个文件添加到 <code class="docutils literal notranslate"><span class="pre">glsl-shaders</span></code> 列表中。在命令行中相当于 <code class="docutils literal notranslate"><span class="pre">--glsl-shaders-append=file.glsl</span></code> 或者 <code class="docutils literal notranslate"><span class="pre">--glsl-shader=file.glsl</span></code></p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dump-cache</span> <span class="pre">&lt;start&gt;</span> <span class="pre">&lt;end&gt;</span> <span class="pre">&lt;filename&gt;</span></code></dt><dd><p>将当前的缓存转储到指定的文件名。如果名为 <code class="docutils literal notranslate"><span class="pre">&lt;filename&gt;</span></code> 的文件已经存在，它将被覆盖。 <code class="docutils literal notranslate"><span class="pre">&lt;start&gt;</span></code> 和 <code class="docutils literal notranslate"><span class="pre">&lt;end&gt;</span></code> 给出要转储的时间范围。如果在给定的时间范围内没有数据被缓存，则可能没有数据被转储（创建一个没有数据包的文件）。</p>
<p>转储较大部分的缓存将冻结播放器。我们没有努力去解决这个问题，因为这个功能主要是为了创建小的摘录。</p>
<p>请参见 <code class="docutils literal notranslate"><span class="pre">--stream-record</span></code> 的各种注意事项，这些注意事项大多也适用于这个命令，因为两者都使用相同的底层代码来编写输出文件。</p>
<p>如果 <code class="docutils literal notranslate"><span class="pre">&lt;filename&gt;</span></code> 是一个空字符串，正在进行的 <code class="docutils literal notranslate"><span class="pre">dump-cache</span></code> 将被停止。</p>
<p>如果 <code class="docutils literal notranslate"><span class="pre">&lt;end&gt;</span></code> 是 <code class="docutils literal notranslate"><span class="pre">no</span></code> ，则启用连续转储。然后，在转储现有的缓存部分后，从网络上读取的任何内容也会被追加到缓存中。这与 <code class="docutils literal notranslate"><span class="pre">--stream-record</span></code> 相似（尽管它与该选项不冲突，而且它们可以同时激活）。</p>
<p>如果 <code class="docutils literal notranslate"><span class="pre">&lt;end&gt;</span></code> 时间在缓存之后，该命令将 _不_ 等待并将新收到的数据写入缓存。</p>
<p>结果文件的结尾处可能会有轻微的损坏或不完整（没有做出足够的努力来保证末端的正确对齐）。</p>
<p>注意，这个命令只有在转储结束后才会结束。这意味着它的工作原理与 <code class="docutils literal notranslate"><span class="pre">screenshot</span></code> 命令类似，只是它可以阻挡更长的时间。如果使用连续转储，该命令将不会结束，直到停止播放、发生错误、运行另一个 <code class="docutils literal notranslate"><span class="pre">dump-cache</span></code> 命令，或者调用 <code class="docutils literal notranslate"><span class="pre">mp.abort_async_command</span></code> 这样的API来明确停止该命令。请看 <a class="reference internal" href="#id10">同步与异步</a></p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>这主要是为网络流创建的。对于本地文件，可能有更好的方法来创建摘录之类的。有很多更友好的Lua脚本，通过催生一个单独的 <code class="docutils literal notranslate"><span class="pre">ffmpeg</span></code> 实例来重新编码文件的一部分。对于网络流，这不是那么容易做到的，因为流必须再次被下载。即使使用 <code class="docutils literal notranslate"><span class="pre">--stream-record</span></code> 将流记录到本地文件系统，也可能会有问题，因为记录的文件仍然被写入。</p>
</div>
<p>这个命令是实验性的，关于它的所有细节在将来可能会改变。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ab-loop-dump-cache</span> <span class="pre">&lt;filename&gt;</span></code></dt><dd><p>本质上是调用``dump-cache``，以当前AB循环点为参数。与 <code class="docutils literal notranslate"><span class="pre">dump-cache</span></code> 一样，这将覆盖名为 <code class="docutils literal notranslate"><span class="pre">&lt;filename&gt;</span></code> 的文件。同样地，如果B点被设置为 <code class="docutils literal notranslate"><span class="pre">no</span></code> ，它将在现有的缓存被转储后进入连续转储。</p>
<p>如果发现有足够的动力将这个功能转移到一个微不足道的Lua脚本中，作者保留删除这个命令的权利。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ab-loop-align-cache</span></code></dt><dd><p>在 <code class="docutils literal notranslate"><span class="pre">ab-loop-dump-cache</span></code> 命令将（可能）转储的缓存内，重新调整A/B循环点的起点和终点。基本上，它将关键帧上的时间对齐。猜测可能会有偏差，特别是在结尾处（由于重新转换带来的精度问题）。如果缓存在此期间缩小了，该命令设置的点也不会是有效参数。</p>
<p>这个命令的未来比 <code class="docutils literal notranslate"><span class="pre">ab-loop-dump-cache</span></code> 更不确定，如果作者认为它没有用，可能会消失而不被替换。</p>
</dd>
</dl>
<p>未记录的命令： <code class="docutils literal notranslate"><span class="pre">ao-reload</span></code> （实验性的/内部的）。</p>
<section id="id8">
<h3>事件列表<a class="headerlink" href="#id8" title="此标题的永久链接">#</a></h3>
<p>这是一个部分的事件列表。本节描述了 <code class="docutils literal notranslate"><span class="pre">mpv_event_to_node()</span></code> 返回的内容，也就是脚本API和JSON IPC看到的内容。注意，C语言API有单独的C语言级别的声明与 <code class="docutils literal notranslate"><span class="pre">mpv_event</span></code> ，可能略有不同。</p>
<p>请注意，事件是异步的：当事件被传递给脚本和其他它户端时，播放器核心继续运行。在某些情况下，你可以用hooks来强制执行同步执行。</p>
<p>所有的事件都可以有以下字段：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">event</span></code></dt><dd><p>事件的名称（如由 <code class="docutils literal notranslate"><span class="pre">mpv_event_name()</span></code> 返回）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">id</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">reply_userdata</span></code> 字段（不透明的用户值）。如果 <code class="docutils literal notranslate"><span class="pre">reply_userdata</span></code> 是0，该字段不被添加。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error</span></code></dt><dd><p>设置为一个错误字符串（如由 <code class="docutils literal notranslate"><span class="pre">mpv_error_string()</span></code> 返回）。如果没有发生错误，或者事件类型不报告错误，这个字段就会丢失。大多数事件不设置这个字段。</p>
</dd>
</dl>
<p>这个列表使用事件名称字段的值，以及括号中的C API符号：</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">start-file</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_START_FILE</span></code> )</dt><dd><p>发生在一个新文件被加载之前。当你收到它时，播放器正在加载文件（或者可能已经完成）。</p>
<p>它有以下字段：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">playlist_entry_id</span></code></dt><dd><p>现在正在加载的文件的播放列表条目ID。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">end-file</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_END_FILE</span></code> )</dt><dd><p>发生在一个文件被卸载后。通常情况下，播放器将立即加载下一个文件，如果这是最后一个文件，则退出。</p>
<p>该事件有以下字段：</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">reason</span></code></dt><dd><p>有这些值之一：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">eof</span></code></dt><dd><p>该文件已经结束。这可以（但不一定）包括不完整的文件或网络连接中断的情况。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stop</span></code></dt><dd><p>播放被一个命令结束。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">quit</span></code></dt><dd><p>播放是通过发送退出命令结束的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error</span></code></dt><dd><p>发生了一个错误。在这种情况下，有一个 <code class="docutils literal notranslate"><span class="pre">error</span></code> 字段和错误字符串。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">redirect</span></code></dt><dd><p>发生在播放列表和类似的情况。详情见C API中的 <code class="docutils literal notranslate"><span class="pre">MPV_END_FILE_REASON_REDIRECT</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unknown</span></code></dt><dd><p>未知。通常不会发生，除非Lua的API与C的API不同步（同样，也可能发生你的脚本得到的原因字符串在你写入脚本的时候还不存在）。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist_entry_id</span></code></dt><dd><p>正在播放或试图播放的文件的播放列表条目ID。这个值与相应的 <code class="docutils literal notranslate"><span class="pre">start-file</span></code> 事件中的 <code class="docutils literal notranslate"><span class="pre">playlist_entry_id</span></code> 字段相同。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file_error</span></code></dt><dd><p>设置为mpv错误字符串，描述播放失败的大致原因。如果不知道错误，就不设置（在Lua脚本中，这个值是直接设置在 <code class="docutils literal notranslate"><span class="pre">error</span></code> 字段上。从mpv 0.33.0开始，这已经被废弃了。在未来，这个 <code class="docutils literal notranslate"><span class="pre">error</span></code> 字段对于这个特定事件将被取消设置）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist_insert_id</span></code></dt><dd><p>如果加载结束，因为要播放的播放列表条目是例如一个播放列表，而当前的播放列表条目被一些其它条目所取代。这种情况至少在 MPV_END_FILE_REASON_REDIRECT 中可能发生（其它事件类型将来可能出于类似但不同的目的使用这个）。在这种情况下， playlist_insert_id 将被设置为第一个插入条目的播放列表条目ID，而 playlist_insert_num_entries 则是插入的播放列表条目的总数。注意，在这种特定情况下，最后插入的条目的ID是 playlist_insert_id+num-1 。请注意，根据情况，你可能会在看到事件之前观察到新的播放列表条目（例如，在收到事件之前读取 “playlist” 属性或获得属性变化通知）。如果在C API中为0，这个字段就不会被添加。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist_insert_num_entries</span></code></dt><dd><p>参见 playlist_insert_id 。只有当 playlist_insert_id 存在时才会出现。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file-loaded</span></code>  ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_FILE_LOADED</span></code> )</dt><dd><p>发生在一个文件被加载并开始播放之后。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seek</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_SEEK</span></code> )</dt><dd><p>发生在跳转时（这可能包括播放器内部跳转的情况，即使没有用户交互。这包括例如播放有序章节的Matroska文件时的片段变化）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playback-restart</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_PLAYBACK_RESTART</span></code> )</dt><dd><p>在跳转后或文件被加载后的开始播放。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shutdown</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_SHUTDOWN</span></code> )</dt><dd><p>当播放器退出时发送，脚本应该终止。通常是自动处理。参见 <a href="#id28"><span class="problematic" id="id29">`Details on the script initialization and lifecycle`_</span></a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">log-message</span></code> (<code class="docutils literal notranslate"><span class="pre">MPV_EVENT_LOG_MESSAGE</span></code>)</dt><dd><p>接收用 <code class="docutils literal notranslate"><span class="pre">mpv_request_log_messages()</span></code> 启用的信息（Lua:  <code class="docutils literal notranslate"><span class="pre">mp.enable_messages</span></code> ）。</p>
<p>除了默认的事件字段外，它还包含以下字段：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>模块前缀，识别消息的发件人。当使用 <code class="docutils literal notranslate"><span class="pre">--v</span></code> 选项时，这是终端播放器放在消息文本前面的东西，也是用于 <code class="docutils literal notranslate"><span class="pre">--msg-level</span></code> 的东西。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">level</span></code></dt><dd><p>日志级别为字符串。参见 <code class="docutils literal notranslate"><span class="pre">msg.log</span></code> 了解可能的日志级别名称。请注意，mpv的后续版本可能会增加新的级别或移除（未记录的）现有级别。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">text</span></code></dt><dd><p>日志信息。该文本将以换行符结束。有时它可能包含多行。</p>
</dd>
</dl>
<p>请记住，这些信息是为了提供人性化的提示。你不应该解析它们，而且信息的前缀/级别/文本可能随时改变。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hook</span></code></dt><dd><p>该事件有以下字段：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">hook_id</span></code></dt><dd><p>要传递给 <code class="docutils literal notranslate"><span class="pre">mpv_hook_continue()</span></code> 的ID。Lua脚本包装器通过 <code class="docutils literal notranslate"><span class="pre">mp.add_hook()</span></code> 提供了一个更好的API。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get-property-reply</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_GET_PROPERTY_REPLY</span></code> )</dt><dd><p>参见C API.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set-property-reply</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_SET_PROPERTY_REPLY</span></code> )</dt><dd><p>参见C API.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command-reply</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_COMMAND_REPLY</span></code> )</dt><dd><p>这是 <code class="docutils literal notranslate"><span class="pre">error</span></code> 字段有意义的命令之一。</p>
<p>JSON IPC和Lua以及可能的其它后端会特别处理这个问题，可能不会将实际的事件传递给用户。参见C API。</p>
<p>该事件有以下字段：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">result</span></code></dt><dd><p>任何 <code class="docutils literal notranslate"><span class="pre">mpv_node</span></code> 类型的结果（成功时），如果有的话。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">client-message</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_CLIENT_MESSAGE</span></code> )</dt><dd><p>Lua和可能的其它后端对其进行特殊处理，可能不会将实际事件传递给用户。</p>
<p>该事件有以下字段：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">args</span></code></dt><dd><p>包含信息数据的字符串数组。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-reconfig</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_VIDEO_RECONFIG</span></code> )</dt><dd><p>发生在视频输出或过滤器的重新配置上。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-reconfig</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_AUDIO_RECONFIG</span></code> )</dt><dd><p>发生在音频输出或过滤器的重新配置上。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">property-change</span></code> ( <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_PROPERTY_CHANGE</span></code> )</dt><dd><p>当被观察的属性改变值时发生。</p>
<p>该事件有以下字段：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>属性的名称。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt><dd><p>该属性的新值。</p>
</dd>
</dl>
</dd>
</dl>
<p>以下事件也会发生，但已过时。 <code class="docutils literal notranslate"><span class="pre">idle</span></code> , <code class="docutils literal notranslate"><span class="pre">tick</span></code> 使用 <code class="docutils literal notranslate"><span class="pre">mpv_observe_property()</span></code> (Lua: <code class="docutils literal notranslate"><span class="pre">mp.observe_property()</span></code> ) 来替代。</p>
</section>
<section id="hooks">
<h3>Hooks<a class="headerlink" href="#hooks" title="此标题的永久链接">#</a></h3>
<p>Hooks是播放器核心和脚本或类似的东西之间的同步事件。这适用于客户端API（包括Lua脚本接口）。通常情况下，事件应该是异步的，而hook API提供了一种笨拙而不明显的方式来处理需要更严格协调的事件。没有做出任何API稳定性的保证。不完全遵循协议会使播放器随机冻结。基本上，没有人应该使用这个API。</p>
<p>C API在头文件里有描述。Lua API在Lua部分有描述。</p>
<p>在对API客户端实际调用hook之前，它将尝试为所有在hook之前被改变的观察到的属性返回新的值。这可能使应用程序更容易通过注册hook在属性变化通知之间设置定义的“障碍”（这意味着这些hooks会有效果，即使您什么也不做并使它们立即继续）。</p>
<p>目前定义了以下hooks：</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">on_load</span></code></dt><dd><p>当一个文件要被打开时，在实际做任何事情之前被调用。例如，你可以读写 <code class="docutils literal notranslate"><span class="pre">stream-open-filename</span></code> 属性来重定向一个URL到其它地方（考虑支持很少给用户一个直接的媒体URL的流媒体网站），或者你可以通过设置 <code class="docutils literal notranslate"><span class="pre">file-local-options/&lt;option</span> <span class="pre">name&gt;</span></code> 属性来设置每个文件选项。播放器将等待，直到所有hooks都运行。</p>
<p>排序在 <code class="docutils literal notranslate"><span class="pre">start-file</span></code> 之后和 <code class="docutils literal notranslate"><span class="pre">playback-restart</span></code> 之前。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on_load_fail</span></code></dt><dd><p>在文件被打开后调用但失败时。这可以用来在本地解复用器无法识别文件的情况下提供一个回退，而不是像 <code class="docutils literal notranslate"><span class="pre">on_load</span></code> 那样总是在本地解复用器之前运行。只有当 <code class="docutils literal notranslate"><span class="pre">stream-open-filename</span></code> 被改变时，才会重试解复用。如果它再次失败，这个hook就不会再被调用，并且加载肯定会失败。</p>
<p>排序在 <code class="docutils literal notranslate"><span class="pre">on_load</span></code> 之后， <code class="docutils literal notranslate"><span class="pre">playback-restart</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end-file</span></code> 之前。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on_preloaded</span></code></dt><dd><p>在文件被打开后，在轨道被选择和解码器被创建前被调用。如果API用户想根据可用的音轨集手动选择音轨，这有一定的用处。这对于通过API以特定方式初始化 <code class="docutils literal notranslate"><span class="pre">--lavfi-complex</span></code> 也很有用，而不必一开始就“探测”可用的流。</p>
<p>注意，这还没有应用默认的轨道选择。究竟哪些操作可以做，哪些不可以做，哪些信息可以用，哪些还不能用，都有待于改变。</p>
<p>排序在 <code class="docutils literal notranslate"><span class="pre">on_load_fail</span></code> 等之后， <code class="docutils literal notranslate"><span class="pre">playback-restart</span></code> 之前。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on_unload</span></code></dt><dd><p>在关闭文件之前运行，在实际取消一切初始化之前。在这种状态下不可能恢复播放。</p>
<p>排序在 <code class="docutils literal notranslate"><span class="pre">end-file</span></code> 之前。在错误的情况下也会发生（那就在 <code class="docutils literal notranslate"><span class="pre">on_load_fail</span></code> 之后）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on_before_start_file</span></code></dt><dd><p>在发送 <code class="docutils literal notranslate"><span class="pre">start-file</span></code> 事件之前运行（如果任何客户端改变了当前的播放列表条目，或者向播放器发送了退出命令，相应的事件在hook返回后将不会实际发生）。在加载新的文件之前，对排出属性的变化很有用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">on_after_end_file</span></code></dt><dd><p>在 <code class="docutils literal notranslate"><span class="pre">end-file</span></code> 事件后运行。有助于在文件结束后排出属性变化。</p>
</dd>
</dl>
</section>
</section>
<section id="id9">
<h2>输入命令前缀<a class="headerlink" href="#id9" title="此标题的永久链接">#</a></h2>
<p>这些前缀放在按键名和实际命令之间。可以指定多个前缀。它们之间用空格隔开。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">osd-auto</span></code></dt><dd><p>使用该命令的默认行为。这是 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 中命令的默认值。一些libmpv/scripting/IPC APIs不使用它作为默认，而是使用 <code class="docutils literal notranslate"><span class="pre">no-osd</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">no-osd</span></code></dt><dd><p>不要为该命令使用任何OSD。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-bar</span></code></dt><dd><p>如果可能的话，为该命令显示一个条状图。跳转命令会显示进度条，改变属性的命令可能会显示新设定的值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-msg</span></code></dt><dd><p>如果可能的话，为该命令显示一个OSD信息。跳转命令会显示当前的播放时间，改变属性的命令会以文本形式显示新设定的值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-msg-bar</span></code></dt><dd><p>结合osd-bar和osd-msg。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">raw</span></code></dt><dd><p>不在字符串参数中展开属性（如 <code class="docutils literal notranslate"><span class="pre">&quot;${property-name}&quot;</span></code> ）。这是一些libmpv/scripting/IPC APIs的默认设置。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">expand-properties</span></code></dt><dd><p>所有的字符串参数都按照 <a class="reference internal" href="#id16">属性扩展</a> 中的描述进行扩展。这是 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 中命令的默认设置。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">repeatable</span></code></dt><dd><p>对于某些命令来说，一直按着一个按键不会重复运行命令。这个前缀在任何情况下都强制启用按键重复。对于一个命令列表：第一个命令决定了整个列表的可重复性（到0.33版本为止 —— 一个列表总是可重复的）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">async</span></code></dt><dd><p>允许异步执行（如果可能）。注意，只有少数命令会支持这一点（通常这一点有明确的记录）。有些命令默认是异步的（或者说，它们的效果可能会在命令完成后表现出来）。这个标志的语义在未来可能会改变。只有当你不依赖这个命令的效果在它返回时完全实现时才设置它。参见 <a class="reference internal" href="#id10">同步与异步</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sync</span></code></dt><dd><p>允许同步执行（如果可能）。通常情况下，所有的命令默认都是同步的，但有些命令默认是异步的，以便与旧版的行为兼容。</p>
</dd>
</dl>
<p>所有的osd前缀仍然被全局的 <code class="docutils literal notranslate"><span class="pre">--osd-level</span></code> 设置所覆盖。</p>
</section>
<section id="id10">
<h2>同步与异步<a class="headerlink" href="#id10" title="此标题的永久链接">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">async</span></code> 和 <code class="docutils literal notranslate"><span class="pre">sync</span></code> 的前缀只关系到命令发出方如何等待命令的完成。通常情况下，它不会影响命令本身的表现方式。有以下几种情况：</p>
<ul class="simple">
<li><p>正常的input.conf命令总是以异步方式运行。慢速运行的命令排队或并行运行。</p></li>
<li><p>“多个” input.conf命令（1个按键绑定，用 <code class="docutils literal notranslate"><span class="pre">;</span></code> 串联）将被依次执行，但那些异步的命令除外（要么以 <code class="docutils literal notranslate"><span class="pre">async</span></code> 为前缀，要么某些命令默认为异步）。这些异步命令会以分离的方式运行，可能与列表中其余的同步命令并行。</p></li>
<li><p>普通的Lua和libmpv命令（例如 <code class="docutils literal notranslate"><span class="pre">mpv_command()</span></code> ）是以阻塞方式运行的，除非使用了 <code class="docutils literal notranslate"><span class="pre">async</span></code> 前缀，或者该命令默认为异步的。这意味着在同步的情况下，调用者会阻塞，即使核心继续播放。异步模式是以分离的方式运行命令。</p></li>
<li><p>异步libmpv命令API（例如 <code class="docutils literal notranslate"><span class="pre">mpv_command_async()</span></code> ）永远不会阻塞调用者，并且总是用消息通知他们完成。 <code class="docutils literal notranslate"><span class="pre">sync</span></code> 和 <code class="docutils literal notranslate"><span class="pre">async</span></code> 的前缀没有区别。</p></li>
<li><p>Lua还提供了运行异步命令的API，其行为类似于C语言的对应命令。</p></li>
<li><p>在所有情况下，异步模式仍然可以以同步的方式运行命令，甚至在分离模式下。例如，当一个命令没有异步实现的时候，就会发生这种情况。在这种情况下，异步libmpv API仍然不会阻塞调用者。</p></li>
</ul>
<p>在mpv 0.29.0之前， <code class="docutils literal notranslate"><span class="pre">async</span></code> 前缀只被截图命令使用，并使它们以分离的方式运行文件保存代码。现在这是默认的， <code class="docutils literal notranslate"><span class="pre">async</span></code> 只在上面提到的方面改变行为。</p>
<p>目前，以下命令在同步与异步下有不同的等待特性：sub-add, audio-add, sub-reload, audio-reload, rescan-external-files, screenshot, screenshot-to-file, dump-cache, ab-loop-dump-cache</p>
</section>
<section id="id11">
<h2>异步命令详情<a class="headerlink" href="#id11" title="此标题的永久链接">#</a></h2>
<p>在API层面上，每个异步命令都与启动它的上下文绑定。例如，由 <code class="docutils literal notranslate"><span class="pre">mpv_command_async</span></code> 启动的异步命令被绑定到传递给函数的 <code class="docutils literal notranslate"><span class="pre">mpv_handle</span></code> 。只有这个 <code class="docutils literal notranslate"><span class="pre">mpv_handle</span></code> 能收到完成通知（ <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_COMMAND_REPLY</span></code> ），而且只有这个句柄能直接中止仍在运行的命令。如果 <code class="docutils literal notranslate"><span class="pre">mpv_handle</span></code> 被销毁，由它启动的任何仍在运行的异步命令都会被终止。</p>
<p>脚本API和JSON IPC给每个脚本/连接提供了自己的隐式 <code class="docutils literal notranslate"><span class="pre">mpv_handle</span></code></p>
<p>如果播放器被关闭，核心可能会自行中止所有悬而未决的异步命令（就像代表API用户对每个悬而未决的命令强制调用 <code class="docutils literal notranslate"><span class="pre">mpv_abort_async_command()</span></code> 。这发生在发送 <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_SHUTDOWN</span></code> 的同时，而且没有办法阻止它。</p>
</section>
<section id="id12">
<h2>输入区<a class="headerlink" href="#id12" title="此标题的永久链接">#</a></h2>
<p>输入区将一套绑定分组，并一次性启用或禁用它们。在 <code class="docutils literal notranslate"><span class="pre">input.conf</span></code> 中，每个按键的绑定都被分配到一个输入区，而不是实际有明确的文本区。</p>
<p>另参见： <code class="docutils literal notranslate"><span class="pre">enable-section</span></code> 和 <code class="docutils literal notranslate"><span class="pre">disable-section</span></code> 命令。</p>
<p>预定义的绑定：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">default</span></code></dt><dd><p>没有输入区的绑定被隐含地分配给这个区。它在正常播放时默认是启用的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encode</span></code></dt><dd><p>在编码模式下激活的区。它被独立启用，所以在 <code class="docutils literal notranslate"><span class="pre">default</span></code> 区的绑定被忽略。</p>
</dd>
</dl>
</section>
<section id="id13">
<h2>属性<a class="headerlink" href="#id13" title="此标题的永久链接">#</a></h2>
<p>属性被用于在运行时设置mpv选项，或者查询任意信息。它们可以用 <code class="docutils literal notranslate"><span class="pre">set</span></code>/<code class="docutils literal notranslate"><span class="pre">add</span></code>/<code class="docutils literal notranslate"><span class="pre">cycle</span></code> 命令操作，用 <code class="docutils literal notranslate"><span class="pre">show-text</span></code> 检索，或者其它任何使用属性扩展的方法。(参见 <a class="reference internal" href="#id16">属性扩展</a> ）。</p>
<p>属性名称用RW注释的，表示该属性通常是可写的。</p>
<p>如果一个选项被引用，该属性通常会采取/返回与该选项完全相同的值。在这些情况下，属性只是一种在运行时改变选项的方法。</p>
</section>
<section id="id14">
<h2>属性列表<a class="headerlink" href="#id14" title="此标题的永久链接">#</a></h2>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>大多数选项也可以通过属性在运行时设置。只需从选项名称中移除前面的 <code class="docutils literal notranslate"><span class="pre">--</span></code> 。下面没有记录这些内容，参见 <a href="#id30"><span class="problematic" id="id31">`选项`_</span></a> 。只有那些不存在同名的选项的属性，或者与选项有非常不同的行为的属性才会在下面记录。</p>
<p>标记为(RW)的属性是可写的，而那些没有标记的是只读的。</p>
</div>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">audio-speed-correction</span></code> <code class="docutils literal notranslate"><span class="pre">video-speed-correction</span></code></dt><dd><p>与播放器尝试播放文件的 <code class="docutils literal notranslate"><span class="pre">speed</span></code> 相乘的系数。通常情况下，它正好是1。（显示同步模式将使其有用）</p>
<p>OSD格式将以 <code class="docutils literal notranslate"><span class="pre">+1.23456%</span></code> 的形式显示，数字是 <code class="docutils literal notranslate"><span class="pre">(raw</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">*</span> <span class="pre">100</span></code> ，用于给定的原始属性值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">display-sync-active</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">--video-sync=display</span></code> 是否实际激活。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filename</span></code></dt><dd><p>当前播放的文件，路径已剥离。如果这是一个URL，也尝试取消百分比编码。（结果不一定正确，但看起来更适合显示。使用 <code class="docutils literal notranslate"><span class="pre">path</span></code> 属性来获取未修改的文件名）</p>
<p>这有一个子属性：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filename/no-ext</span></code></dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">filename</span></code> 属性，但如果文本中包含 <code class="docutils literal notranslate"><span class="pre">.</span></code> ，则剥离最后一个 <code class="docutils literal notranslate"><span class="pre">.</span></code> 后的所有文本。通常这将移除文件扩展名。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file-size</span></code></dt><dd><p>源文件/流的长度，以字节为单位。（这与 <code class="docutils literal notranslate"><span class="pre">${stream-end}</span></code> 相同。对于分段/多段的文件，这将返回主文件或清单文件的大小，无视它的格式）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">estimated-frame-count</span></code></dt><dd><p>当前文件中的总帧数。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>这只是一个估计值。（它是由两个不可靠的数量计算出来的：帧数和流长度）</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">estimated-frame-number</span></code></dt><dd><p>当前数据流中的当前帧数。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>这只是一个估计值。（它是由两个不可靠的数量计算出来的：帧数和可能是取整的时间戳）</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pid</span></code></dt><dd><p>mpv的进程ID。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code></dt><dd><p>当前播放文件的完整路径。通常这和你在mpv命令行或 <code class="docutils literal notranslate"><span class="pre">loadfile</span></code> 命令中传递的字符串完全一样，即使它是一个相对路径。如果你期望一个绝对路径，你将不得不自行检测，例如通过使用 <code class="docutils literal notranslate"><span class="pre">working-directory</span></code> 属性。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream-open-filename</span></code></dt><dd><p>当前播放的媒体的完整路径。这只在特殊情况下与 <code class="docutils literal notranslate"><span class="pre">path</span></code> 不同。特别是，如果使用了 <code class="docutils literal notranslate"><span class="pre">--ytdl=yes</span></code> ，并且URL是由 <code class="docutils literal notranslate"><span class="pre">youtube-dl</span></code> 检测的，那么脚本将把这个属性设置为实际的媒体URL。这个属性应该只在 <code class="docutils literal notranslate"><span class="pre">on_load</span></code> 或 <code class="docutils literal notranslate"><span class="pre">on_load_fail</span></code> hook期间设置，否则它将没有效果（或者可能在未来做一些实现定义的事情）。如果当前媒体播放结束，该属性将被重置。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">media-title</span></code></dt><dd><p>如果当前播放的文件有一个 <code class="docutils literal notranslate"><span class="pre">title</span></code> 标签，则使用该标签。</p>
<p>否则，返回 <code class="docutils literal notranslate"><span class="pre">filename</span></code> 属性。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file-format</span></code></dt><dd><p>文件格式的符号名称。在某些情况下，这是一个用逗号分隔的格式名称列表，例如mp4是 <code class="docutils literal notranslate"><span class="pre">mov,mp4,m4a,3gp,3g2,mj2</span></code> （对于任何格式，这个列表在将来可能会增加）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current-demuxer</span></code></dt><dd><p>当前解复用器的名称。（这个没有用处）</p>
<p>（由 <code class="docutils literal notranslate"><span class="pre">demuxer</span></code> 重命名而来）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream-path</span></code></dt><dd><p>流层面的文件名（完整路径）。（这可能没有用处，几乎不会与 <code class="docutils literal notranslate"><span class="pre">path</span></code> 不同）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream-pos</span></code></dt><dd><p>源流中的原始字节位置。从技术上讲，它返回传递给解码器的最新数据包的位置。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stream-end</span></code></dt><dd><p>源流中的原始结束位置，以字节为单位。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">duration</span></code></dt><dd><p>当前文件的持续时间，以秒为单位。如果持续时间未知，该属性不可用。注意，文件的持续时间并不总是准确的，所以这是一个估计值。</p>
<p>它取代了 <code class="docutils literal notranslate"><span class="pre">length</span></code> 属性，该属性在mpv0.9发布后已过时。（语义是一样的）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">avsync</span></code></dt><dd><p>最近的A/V同步差异。如果音频或视频被禁用，则不可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">total-avsync-change</span></code></dt><dd><p>已完成的总A-V同步校正。如果音频或视频被禁用，则不可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">decoder-frame-drop-count</span></code></dt><dd><p>解码器的丢帧数，由于视频进度远落后于音频（当使用 <code class="docutils literal notranslate"><span class="pre">--framedrop=decoder</span></code> 时）。有时，在其它情况下，例如视频封装损坏，或解码器不遵循通常的规则，这可能会增加丢帧数。如果视频被禁用，则不可用。</p>
<p><code class="docutils literal notranslate"><span class="pre">drop-frame-count</span></code> 是一个已过时的别名</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">frame-drop-count</span></code></dt><dd><p>视频输出驱动的丢帧数（当使用 <code class="docutils literal notranslate"><span class="pre">--framedrop=vo</span></code> 时）。</p>
<p><code class="docutils literal notranslate"><span class="pre">vo-drop-frame-count</span></code> 是一个已过时的别名</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mistimed-frame-count</span></code></dt><dd><p>为了保持A/V同步，在显示同步模式下没有正确计时的视频帧数。这不包括外部情况，例如视频渲染太慢或图形驱动程序以某种方式跳过垂直同步。它也不包括取整的错误（特别是在源时间戳不正常的情况下可能发生）。例如，使用 <code class="docutils literal notranslate"><span class="pre">display-desync</span></code> 模式时，不应该把这个值从0改变。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vsync-ratio</span></code></dt><dd><p>对于一个帧平均显示多少个垂直同步。这只在display-sync被激活时可用。对于60Hz屏幕上的30FPS视频，这将是2。这是实际预定的动态平均数，所以60Hz时的24FPS不会永远精确地保持在2.5，而是根据最后显示的帧抖动。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-delayed-frame-count</span></code></dt><dd><p>在显示同步模式下，由于外部条件造成的延迟帧数的估计值。注意一般来说，mpv不得不猜测这种情况的发生，而且猜测的结果可能不准确。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">percent-pos</span></code> (RW)</dt><dd><p>当前文件中的位置（0-100）。使用它而不是从其它属性中计算的好处是，如果文件的持续时间未知，它可以正确地退回从字节位置到估计的播放位置。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time-pos</span></code> (RW)</dt><dd><p>当前文件中的位置，以秒为单位。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time-start</span></code></dt><dd><p>已过时。在mpv0.14之前，它用于返回文件的开始时间（可能影响例如传输流）。参见 <code class="docutils literal notranslate"><span class="pre">--rebase-start-time</span></code> 选项。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">time-remaining</span></code></dt><dd><p>文件的剩余长度，以秒为单位。注意，文件的持续时间并不总是准确已知的，所以这是一个估计值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-pts</span></code></dt><dd><p>当前文件中的音频播放位置（秒）。与time-pos不同，它的更新频率高于每帧一次。对于纯音频文件，它几乎等同于时间位置，而对于纯视频文件，这个属性不可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playtime-remaining</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">time-remaining</span></code> 与当前的 <code class="docutils literal notranslate"><span class="pre">speed</span></code> 相乘。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playback-time</span></code> (RW)</dt><dd><p>在当前文件中的位置，以秒为单位。与 <code class="docutils literal notranslate"><span class="pre">time-pos</span></code> 不同，时间被钳制在文件的范围内。（不准确的文件持续时间等可能使它超出范围。在尝试跳转到文件范围以外时很有用，因为跳转的目标时间被认为是跳转过程中的当前位置）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chapter</span></code> (RW)</dt><dd><p>当前的章节编号。第一章的编号是0。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">edition</span></code> (RW)</dt><dd><p>当前的MKV edition编号。将此属性设置为一个不同的值将重新开始播放。第一个edition的号码是0。</p>
<p>在mpv0.31.0之前，如果你没有手动设置选项或属性，这显示的是在运行时选择的实际版本。在mpv0.31.0及以后的版本中，这严格地返回用户设置的选项或属性值，并且增加了 <code class="docutils literal notranslate"><span class="pre">current-edition</span></code> 属性来返回运行时选择的版本（默认情况下这与 <code class="docutils literal notranslate"><span class="pre">--edition=auto</span></code> 有关）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current-edition</span></code></dt><dd><p>当前选择的edition。如果没有加载文件，或者文件没有版本，该属性就不可用。（Matroska文件在没有editions和单一edition之间有区别，这将反映在该属性中，尽管在实际中并不重要）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chapters</span></code></dt><dd><p>章节的数量。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">editions</span></code></dt><dd><p>MKV editions的数量。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">edition-list</span></code></dt><dd><p>editions的列表，当前条目被标记。目前，原始属性值是无用的。</p>
<p>这有一系列子属性。用基于0来取代 <code class="docutils literal notranslate"><span class="pre">N</span></code> 的edition索引</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">edition-list/count</span></code></dt><dd><p>edition的数量。如果没有edition，它可以是0或1（如果有一个无用的伪版本，就是1）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">edition-list/N/id</span></code> (RW)</dt><dd><p>edition ID为整数。用它来设置 <code class="docutils literal notranslate"><span class="pre">edition</span></code> 属性。目前，这与edition索引相同</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">edition-list/N/default</span></code></dt><dd><p>这是否是默认的edition</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">edition-list/N/title</span></code></dt><dd><p>存储在文件中的edition标题。不总是可获取的</p>
</dd>
</dl>
<p>当用client API使用 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性时，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，这将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">(</span><span class="k">for</span> <span class="n">each</span> <span class="n">edition</span><span class="p">)</span>
        <span class="s2">&quot;id&quot;</span>                <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;title&quot;</span>             <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;default&quot;</span>           <span class="n">MPV_FORMAT_FLAG</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">metadata</span></code></dt><dd><p>元数据键/值对。</p>
<p>如果用Lua的 <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> 访问该属性，这将返回一个元数据键与元数据值映射的表。如果是通过client API访问，则返回一个 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE_MAP</span></code> ，其中标签键映射到标签值。</p>
<p>对于OSD，它返回一个格式化的列表。尝试以原始字符串的形式检索这个属性是无效的。</p>
<p>这有一系列子属性：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">metadata/by-key/&lt;key&gt;</span></code></dt><dd><p>元数据条目 <code class="docutils literal notranslate"><span class="pre">&lt;key&gt;</span></code> 的值</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">metadata/list/count</span></code></dt><dd><p>元数据条目的数量</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">metadata/list/N/key</span></code></dt><dd><p>第N个元数据条目的键名（第一个条目是 <code class="docutils literal notranslate"><span class="pre">0</span></code> ）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">metadata/list/N/value</span></code></dt><dd><p>第N个元数据条目的值</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">metadata/&lt;key&gt;</span></code></dt><dd><p>旧版本的 <code class="docutils literal notranslate"><span class="pre">metadata/by-key/&lt;key&gt;</span></code> 。不鼓励使用，因为元数据的关键字符串可能与其他子属性冲突</p>
</dd>
</dl>
<p>这个属性的布局可能会有变化。欢迎提出建议，这个属性到底应该如何工作。</p>
<p>当使用client API使用 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性时，或使用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，这将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_MAP</span>
    <span class="p">(</span><span class="n">key</span> <span class="ow">and</span> <span class="n">string</span> <span class="n">value</span> <span class="k">for</span> <span class="n">each</span> <span class="n">metadata</span> <span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">filtered-metadata</span></code></dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">metadata</span></code> ，但只包括 <code class="docutils literal notranslate"><span class="pre">--display-tags</span></code> 选项中列出的字段。这也是输出到终端的标签集。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chapter-metadata</span></code></dt><dd><p>当前章节的元数据。作用类似于 <code class="docutils literal notranslate"><span class="pre">metadata</span></code> 属性。它也允许同样的访问方法（使用子属性）。</p>
<p>每一章的元数据是非常罕见的。通常情况下，只有章节名称（ <code class="docutils literal notranslate"><span class="pre">title</span></code> ）被设置。</p>
<p>为了访问其它信息，如章节的开始，参见 <code class="docutils literal notranslate"><span class="pre">chapter-list</span></code> 属性。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vf-metadata/&lt;filter-label&gt;</span></code></dt><dd><p>由视频滤镜添加的元数据。通过滤镜标签获取，如果没有使用 <code class="docutils literal notranslate"><span class="pre">&#64;filter-label:</span></code> 语法明确指定，将是 <code class="docutils literal notranslate"><span class="pre">&lt;filter-name&gt;NN</span></code></p>
<p>工作原理类似于 <code class="docutils literal notranslate"><span class="pre">metadata</span></code> 属性。它允许同样的访问方法（使用子属性）。</p>
<p>这种元数据的一个例子是由 <code class="docutils literal notranslate"><span class="pre">--vf=lavfi=cropdetect</span></code> 添加的剪裁参数。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">af-metadata/&lt;filter-label&gt;</span></code></dt><dd><p>相当于 <code class="docutils literal notranslate"><span class="pre">vf-metadata/&lt;filter-label&gt;</span></code> ，但用于音频滤镜。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">idle-active</span></code></dt><dd><p>如果没有文件被加载，但由于 <code class="docutils literal notranslate"><span class="pre">--idle</span></code> 选项，播放器在附近驻留，返回 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true。</p>
<p>（由 <code class="docutils literal notranslate"><span class="pre">idle</span></code> 改名而来）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">core-idle</span></code></dt><dd><p>播放核心是否暂停。在特殊情况下，这可能与 <code class="docutils literal notranslate"><span class="pre">pause</span></code> 不同，例如当播放器由于网络缓存不足而自行暂停。</p>
<p>如果播放正在重启或根本没有播放，这也会返回 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true。换句话说，只有在真正有视频播放的情况下，才会返回 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false。（从mpv0.7.0开始的行为）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache-speed</span></code></dt><dd><p>缓存和下层（如网络）之间的当前I/O读取速度。这给出了1秒内的字节数（使用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_INT64</span></code> 类型）</p>
<p>这与 <code class="docutils literal notranslate"><span class="pre">demuxer-cache-state/raw-input-rate</span></code> 相同</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">demuxer-cache-duration</span></code></dt><dd><p>视频在解复用器中缓存的大致持续时间，以秒为单位。这个猜测非常不可靠，通常无法获取这个属性，即使数据已缓存。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">demuxer-cache-time</span></code></dt><dd><p>视频在解复用器中缓存的大致时间，以秒为单位。与 <code class="docutils literal notranslate"><span class="pre">demuxer-cache-duration</span></code> 相同，但返回解复用器中缓冲数据的最后时间戳。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">demuxer-cache-idle</span></code></dt><dd><p>解复用器是否处于空闲状态，这意味着解复用器的缓存已经填充到要求的数量，目前没有读取更多数据。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">demuxer-cache-state</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">seekable-ranges</span></code> 中的每个条目代表了解复用器缓存中可以被搜索到的区域，其中的 <code class="docutils literal notranslate"><span class="pre">start</span></code> 和 <code class="docutils literal notranslate"><span class="pre">end</span></code> 字段包含各自的时间戳。如果有多个解复用器在运行，这只返回关于“主”解复用器的信息，但将来可能会改变为返回所有解复用器的统一信息。这些范围的顺序是任意的。通常情况下，范围在被合并之前会有一些重叠。在边缘情况下，范围可能多处重叠。</p>
<p>跳转范围的末端通常比 <code class="docutils literal notranslate"><span class="pre">demuxer-cache-time</span></code> 属性返回的值小，因为该属性返回的是猜测的缓冲量，而跳转范围代表的是实际可用于缓冲跳转的缓冲数据。</p>
<p><code class="docutils literal notranslate"><span class="pre">bof-cached</span></code> 表示具有最低时间戳的跳转范围是否指向流的开始（BOF）。这意味着你完全不能在这个位置之前跳转。 <code class="docutils literal notranslate"><span class="pre">eof-cached</span></code> 表示具有最高时间戳的跳转范围是否指向流的末端（EOF）。如果 <code class="docutils literal notranslate"><span class="pre">bof-cached</span></code> 和 <code class="docutils literal notranslate"><span class="pre">eof-cached</span></code> 都为true，并且只有一个缓存范围，则整个数据流都被缓存。</p>
<p><code class="docutils literal notranslate"><span class="pre">fw-bytes</span></code> 是在当前解码位置开始的范围内缓冲的数据包的字节数。这是一个粗略的估计（可能没有正确考虑到各种开销），并在解复用器的位置停止（它忽略了之后的跳转范围）。</p>
<p><code class="docutils literal notranslate"><span class="pre">file-cache-bytes</span></code> 是存储在文件缓存中的字节数。这包括所有的开销，以及可能的未使用的数据（如修剪的数据）。如果文件缓存没有和 <code class="docutils literal notranslate"><span class="pre">--cache-on-disk=yes</span></code> 一起启用，就缺失这个数据。</p>
<p><code class="docutils literal notranslate"><span class="pre">cache-end</span></code> 是 <code class="docutils literal notranslate"><span class="pre">demuxer-cache-time</span></code> 。如果不可用则缺失。</p>
<p><code class="docutils literal notranslate"><span class="pre">reader-pts</span></code> 是缓冲范围开始的大致时间戳。如果不可用则缺失。</p>
<p><code class="docutils literal notranslate"><span class="pre">cache-duration``是`demuxer-cache-duration</span></code> 。如果不可用则缺失。</p>
<p><code class="docutils literal notranslate"><span class="pre">raw-input-rate</span></code> 是网络层（或任何其他层级向字节的输入层）的估计输入率，单位是字节每秒。可能不准确或丢失。</p>
<p>当用client API用 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性时，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，这将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_MAP</span>
    <span class="s2">&quot;seekable-ranges&quot;</span>   <span class="n">MPV_FORMAT_NODE_ARRAY</span>
        <span class="n">MPV_FORMAT_NODE_MAP</span>
            <span class="s2">&quot;start&quot;</span>             <span class="n">MPV_FORMAT_DOUBLE</span>
            <span class="s2">&quot;end&quot;</span>               <span class="n">MPV_FORMAT_DOUBLE</span>
    <span class="s2">&quot;bof-cached&quot;</span>        <span class="n">MPV_FORMAT_FLAG</span>
    <span class="s2">&quot;eof-cached&quot;</span>        <span class="n">MPV_FORMAT_FLAG</span>
    <span class="s2">&quot;fw-bytes&quot;</span>          <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;file-cache-bytes&quot;</span>  <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;cache-end&quot;</span>         <span class="n">MPV_FORMAT_DOUBLE</span>
    <span class="s2">&quot;reader-pts&quot;</span>        <span class="n">MPV_FORMAT_DOUBLE</span>
    <span class="s2">&quot;cache-duration&quot;</span>    <span class="n">MPV_FORMAT_DOUBLE</span>
    <span class="s2">&quot;raw-input-rate&quot;</span>    <span class="n">MPV_FORMAT_INT64</span>
</pre></div>
</div>
<p>其他字段（将来可能被改变或删除）：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">eof</span></code></dt><dd><p>读取器线程是否达到了文件的末端</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">underrun</span></code></dt><dd><p>读者器线程是否不能满足解码器对新数据包的请求</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">idle</span></code></dt><dd><p>线程是否目前没有在被读取</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">total-bytes</span></code></dt><dd><p>整个数据包队列的数据包字节数之和（加上一些开销的估计），包括缓存的可跳转范围</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">demuxer-via-network</span></code></dt><dd><p>通过主解复用器解复用的流是否最可能通过网络播放。构成“网络”的部分并不总是清楚的，可能用于其他类型的不可信任的流，在某些情况下可能是错误的，而且它的定义可能正在改变。另外，外部文件（如独立的音频文件或流）并不影响这个属性的值（目前）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">demuxer-start-time</span></code></dt><dd><p>解复用器报告的开始时间，以带小数的秒为单位。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">paused-for-cache</span></code></dt><dd><p>播放是否因等待缓存而暂停。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cache-buffering-state</span></code></dt><dd><p>缓存填充状态的百分比（0-100），直到播放器取消暂停（与 <code class="docutils literal notranslate"><span class="pre">paused-for-cache</span></code> 有关）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">eof-reached</span></code></dt><dd><p>是否到达播放进度的结束。注意通常只有当 <code class="docutils literal notranslate"><span class="pre">--keep-open</span></code> 被启用时，这才有意义，因为否则播放器会立即播放下一个文件（或退出或进入空闲模式），在这些情况下， <code class="docutils literal notranslate"><span class="pre">eof-reach</span></code> 属性被设置后，在逻辑上将立即被清除。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seeking</span></code></dt><dd><p>播放器目前是否正在跳转，或以其他方式尝试重新开始播放（有可能在文件加载时返回 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true。这是因为相同的底层代码被用于跳转和重新同步）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mixer-active</span></code></dt><dd><p>音频混音器是否激活。</p>
<p>这个选项相对来说是无用的。在mpv0.18.1之前，它可以用来推断 <code class="docutils literal notranslate"><span class="pre">volume</span></code> 属性的行为。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ao-volume</span></code> (RW)</dt><dd><p>系统音量。这个属性只有在mpv音频输出当前处于激活状态时才可用，并且只有在底层实现支持音量控制时才可用。这个选项的作用取决于API。例如，在ALSA上，这通常会改变整个系统的音频，而在PulseAudio上，这控制每个应用的音量。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ao-mute</span></code> (RW)</dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">ao-volume</span></code> 相似，但控制静音状态。即使 <code class="docutils literal notranslate"><span class="pre">ao-volume</span></code> 起效，也可能未实现。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-codec</span></code></dt><dd><p>被选择用于解码的音频编解码器。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-codec-name</span></code></dt><dd><p>音频编解码器。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-params</span></code></dt><dd><p>由音频解码器输出的音频格式。这有一系列子属性：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">audio-params/format</span></code></dt><dd><p>采样格式的字符串。这与mpv其它地方使用的名称相同</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-params/samplerate</span></code></dt><dd><p>采样率</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-params/channels</span></code></dt><dd><p>声道布局的字符串。这与 <code class="docutils literal notranslate"><span class="pre">--audio-channels</span></code> 接受的内容相似</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-params/hr-channels</span></code></dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">channels</span></code> ，但不是发送至音频设备的可能的隐秘的实际布局，而是返回一个希望更容易被人阅读的形式（通常只有 <code class="docutils literal notranslate"><span class="pre">audio-out-params/hr-channels</span></code> 有意义）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-params/channel-count</span></code></dt><dd><p>音频声道的数量。这与上面描述的 <code class="docutils literal notranslate"><span class="pre">channels</span></code> 字段是重复的</p>
</dd>
</dl>
<p>当用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，这将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_MAP</span>
    <span class="s2">&quot;format&quot;</span>            <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;samplerate&quot;</span>        <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;channels&quot;</span>          <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;channel-count&quot;</span>     <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;hr-channels&quot;</span>       <span class="n">MPV_FORMAT_STRING</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-out-params</span></code></dt><dd><p>和 <code class="docutils literal notranslate"><span class="pre">audio-params</span></code> 相同，但却是写入到音频API的数据格式。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colormatrix</span></code></dt><dd><p>重定向到 <code class="docutils literal notranslate"><span class="pre">video-params/colormatrix</span></code> 。这个参数（以及类似的参数）可以被 <code class="docutils literal notranslate"><span class="pre">format</span></code> 视频滤镜覆盖。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">colormatrix-input-range</span></code></dt><dd><p>参见 <code class="docutils literal notranslate"><span class="pre">colormatrix</span></code> 。</p>
</dd>
<dt><cite>·colormatrix-primaries`</cite></dt><dd><p>参见 <code class="docutils literal notranslate"><span class="pre">colormatrix</span></code> 。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwdec</span></code> (RW)</dt><dd><p>反映 <code class="docutils literal notranslate"><span class="pre">--hwdec</span></code> 选项。</p>
<p>如果可能的话，对它的写入可以改变当前使用的硬件解码器（在内部，播放器可能会重新初始化解码器，并将执行一次跳转以正确刷新视频）。你可以关注其他的hwdec属性来观察这是否成功。</p>
<p>与mpv0.9.x及之前的版本不同的是，这并不返回当前激活的硬件解码器。从mpv0.18.0开始， <code class="docutils literal notranslate"><span class="pre">hwdec-current</span></code> 可用于此目的。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwdec-current</span></code></dt><dd><p>当前正在使用的硬件解码。如果解码是激活的，返回 <code class="docutils literal notranslate"><span class="pre">hwdec</span></code> 选项/属性所使用的值之一。 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false表示软件解码。如果没有加载解码器，该属性不可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwdec-interop</span></code></dt><dd><p>这将返回当前加载的硬件解码/输出interop驱动程序。这只有在视频输出程序被打开后才知道（也可能是后来）。对于某些视频输出（如 <code class="docutils literal notranslate"><span class="pre">gpu</span></code> ），这可能永远不会提前知道，而只在解码器成功尝试创建硬件解码器时才知道（使用 <code class="docutils literal notranslate"><span class="pre">--gpu-hwdec-interop</span></code> 可以加急加载）。如果有多个驱动程序被加载，它们将以 <code class="docutils literal notranslate"><span class="pre">,</span></code> 分隔。</p>
<p>如果没有视频输出被激活或没有已知的interop驱动，这个属性就不可用。</p>
<p>这不一定使用与 <code class="docutils literal notranslate"><span class="pre">hwdec</span></code> 相同的值。同一硬件解码器可以有多个interop驱动，这取决于平台和视频输出。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-format</span></code></dt><dd><p>视频格式的字符串。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-codec</span></code></dt><dd><p>被选择的用于解码的视频编解码器。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code></dt><dd><p>视频尺寸。这使用解码后的视频尺寸，或者如果还没有解码的视频帧，则使用（可能不正确的）容器显示的尺寸。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params</span></code></dt><dd><p>视频参数，由解码器输出（和覆写的例如应用的长宽比等）。这有一系列子属性：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">video-params/pixelformat</span></code></dt><dd><p>像素格式的字符串。这与mpv的其它地方使用的名称相同</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/hw-pixelformat</span></code></dt><dd><p>基本像素格式的字符串。这与某些硬件解码的情况有关，否则无法使用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/average-bpp</span></code></dt><dd><p>每像素的平均比特数，为整数。子采样的平面格式使用不同的分辨率，这就是这个值有时会很奇怪或令人困惑的原因。在某些格式中可能不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/w</span></code>, <code class="docutils literal notranslate"><span class="pre">video-params/h</span></code></dt><dd><p>视频尺寸为整数，没有应用长宽比校正</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/dw</span></code>, <code class="docutils literal notranslate"><span class="pre">video-params/dh</span></code></dt><dd><p>视频尺寸为整数，按正确的长宽比进行缩放</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/aspect</span></code></dt><dd><p>显示长宽比为浮点数</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/par</span></code></dt><dd><p>像素长宽比</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/colormatrix</span></code></dt><dd><p>使用中的色彩矩阵的字符串（精确值可能会变化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/colorlevels</span></code></dt><dd><p>动态范围的字符串（精确值可能会变化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/primaries</span></code></dt><dd><p>使用中的色彩原色的字符串（精确值可能会变化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/gamma</span></code></dt><dd><p>使用中的伽马函数的字符串（精确值可能会变化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/sig-peak</span></code></dt><dd><p>视频文件标记的信号峰值，以浮点数表示</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/light</span></code></dt><dd><p>使用中的亮度类型的字符串（精确值可能会变化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/chroma-location</span></code></dt><dd><p>色度采样的字符串（精确值可能会变化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/rotate</span></code></dt><dd><p>预设的显示旋转度数（顺时针）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/stereo-in</span></code></dt><dd><p>源文件的立体3D模式（参见 <code class="docutils literal notranslate"><span class="pre">format</span></code> 视频滤镜的 <code class="docutils literal notranslate"><span class="pre">stereo-in</span></code> 选项）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-params/alpha</span></code></dt><dd><p>透明度类型。如果格式没有透明通道，这将是不可用的（但在未来的版本中，它可能变为 <code class="docutils literal notranslate"><span class="pre">no</span></code> ）。如果有，这将被设置为 <code class="docutils literal notranslate"><span class="pre">straight</span></code> 或 <code class="docutils literal notranslate"><span class="pre">premul</span></code></p>
</dd>
</dl>
<p>当使用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性时，或者用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_MAP</span>
    <span class="s2">&quot;pixelformat&quot;</span>       <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;hw-pixelformat&quot;</span>    <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;w&quot;</span>                 <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;h&quot;</span>                 <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;dw&quot;</span>                <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;dh&quot;</span>                <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;aspect&quot;</span>            <span class="n">MPV_FORMAT_DOUBLE</span>
    <span class="s2">&quot;par&quot;</span>               <span class="n">MPV_FORMAT_DOUBLE</span>
    <span class="s2">&quot;colormatrix&quot;</span>       <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;colorlevels&quot;</span>       <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;primaries&quot;</span>         <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;gamma&quot;</span>             <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;sig-peak&quot;</span>          <span class="n">MPV_FORMAT_DOUBLE</span>
    <span class="s2">&quot;light&quot;</span>             <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;chroma-location&quot;</span>   <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;rotate&quot;</span>            <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;stereo-in&quot;</span>         <span class="n">MPV_FORMAT_STRING</span>
    <span class="s2">&quot;average-bpp&quot;</span>       <span class="n">MPV_FORMAT_INT64</span>
    <span class="s2">&quot;alpha&quot;</span>             <span class="n">MPV_FORMAT_STRING</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dwidth</span></code>, <code class="docutils literal notranslate"><span class="pre">dheight</span></code></dt><dd><p>视频显示尺寸。这是应用了滤镜和长宽比缩放之后的视频尺寸。实际的视频窗口大小仍可能与此不同，例如，如果用户手动调整视频窗口的大小。</p>
<p>这些值与 <code class="docutils literal notranslate"><span class="pre">video-out-params/dw</span></code> 和 <code class="docutils literal notranslate"><span class="pre">video-out-params/dh</span></code> 相同。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-dec-params</span></code></dt><dd><p>非常类似 <code class="docutils literal notranslate"><span class="pre">video-params</span></code> ，但不应用覆写。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-out-params</span></code></dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">video-params</span></code> 相同，但在视频滤镜被应用后。如果没有使用视频滤镜，这将包含与 <code class="docutils literal notranslate"><span class="pre">video-params</span></code> 相同的值。请注意，这仍然不一定是视频窗口所使用的，因为用户可以改变窗口的大小，所有真正的视频输出驱动都独立于滤镜链而自行缩放。</p>
<p>拥有与 <code class="docutils literal notranslate"><span class="pre">video-params</span></code> 相同的子属性。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-frame-info</span></code></dt><dd><p>当前帧的大致信息。请注意，如果在OSD上使用这些信息，由于OSD重绘和帧显示有些脱节，信息可能会有几帧的偏差，你可能不得不暂停并强制重绘。</p>
<p>这有一系列子属性：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">video-frame-info/picture-type</span></code></dt><dd><p>图片的类型。它可以是 “I”（关键）、”P”（前向参考）、”B”（双向参考）或不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-frame-info/interlaced</span></code></dt><dd><p>帧的内容是否交错</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-frame-info/tff</span></code></dt><dd><p>如果内容是隔行扫描，是否先显示顶场</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-frame-info/repeat</span></code></dt><dd><p>解码时是否必须延迟帧数</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">container-fps</span></code></dt><dd><p>容器FPS。这很容易包含假的值。对于使用现代容器格式或视频编解码器的视频，这往往是不正确的。</p>
<p>（由 <code class="docutils literal notranslate"><span class="pre">fps</span></code> 重命名）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">estimated-vf-fps</span></code></dt><dd><p>视频滤镜链输出的估计/测量的FPS（如果没有使用滤镜，这对应解码器输出）。这使用过去10帧的平均时间来计算FPS。如果涉及到丢帧，它将是不准确的（比如当明确的启用了framedrop，或在精确跳转之后）。具有不精确时间戳的文件（如Matroska）可能导致不稳定的结果。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">window-scale</span></code> (RW)</dt><dd><p>窗口大小的乘数。设置它将调整视频窗口的大小，使之与 <code class="docutils literal notranslate"><span class="pre">dwidth</span></code> 和 <code class="docutils literal notranslate"><span class="pre">dheight</span></code> 中包含的值相乘，并与此属性设置的值相乘。设置 <code class="docutils literal notranslate"><span class="pre">1</span></code> 将调整到原始视频尺寸（或者准确地说，视频滤镜输出的尺寸）。 <code class="docutils literal notranslate"><span class="pre">2</span></code> 将设置双倍大小， <code class="docutils literal notranslate"><span class="pre">0.5</span></code> 将减半。</p>
<p>注意，设置一个与之前相同的值不会调整窗口的大小。这是因为这个属性反映了 <code class="docutils literal notranslate"><span class="pre">window-scale</span></code> 选项，设置一个选项为它之前的值会被忽略。如果这个值是在窗口处于全屏状态时设置的，那么乘数不会被应用，直到窗口脱离该状态。在一个最大化的窗口中写入这个属性，可以使窗口取消最大化，这取决于操作系统和窗口管理器。如果该窗口没有取消最大化，那么如果用户之后取消最大化，倍数将被应用。</p>
<p>参见 <code class="docutils literal notranslate"><span class="pre">current-window-scale</span></code> 以了解从实际窗口大小得出的数值。</p>
<p>从mpv0.31.0开始，这总是返回先前设置的值（或默认值），而不是实际窗口大小所暗示的值。在mpv0.31.0之前，在窗口创建后，它返回 <code class="docutils literal notranslate"><span class="pre">current-window-scale</span></code> 的值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current-window-scale</span></code> (RW)</dt><dd><p>根据当前窗口大小计算的 <code class="docutils literal notranslate"><span class="pre">window-scale</span></code> 值。如果窗口大小在设置选项后没有改变，并且窗口大小没有受到其他方面的限制，那么这个值与 <code class="docutils literal notranslate"><span class="pre">window-scale</span></code> 相同。如果窗口是全屏的，这将返回从窗口的最后一次非全屏尺寸计算出来的比例值。如果没有视频被激活，该属性不可用。</p>
<p>在全屏或最大化状态下设置该属性时，其行为与window-scale相同。在所有这些情况下，设置该属性的值将始终调整窗口的大小。这不影响 <code class="docutils literal notranslate"><span class="pre">window-scale</span></code> 的值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">focused</span></code></dt><dd><p>窗口是否处于焦点。可能并非所有视频输出驱动都支持。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">display-names</span></code></dt><dd><p>mpv窗口所包含的显示器的名称。在X11上，这些是xrandr名称（LVDS1, HDMI1, DP1, VGA1, 等等）。在Windows上，这些是GDI名称（\.DISPLAY1，\.DISPLAY2，等等），列表中的第一个显示器将是Windows认为与该窗口相关的（由MonitorFromWindow API决定）。 在macOS上，这些是系统信息中使用的显示产品名称，只有一个显示名称被返回，因为一个窗口只能在一个屏幕上。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">display-fps</span></code></dt><dd><p>当前显示器的刷新率。目前，这是视频涵盖的任何显示器的最低FPS，由底层系统API检索（例如X11的xrandr）。它不是测量的FPS。它不一定在所有平台上都可用。注意，任何列出的事实都可能在没有警告的情况下随时改变。</p>
<p>写入此属性已过时。它与写入 <code class="docutils literal notranslate"><span class="pre">overrid-display-fps</span></code> 的效果相同。从mpv0.31.0开始，如果没有显示器FPS的报告，这个属性就不可用（例如，如果没有视频被激活），而在旧版本中，它返回 <code class="docutils literal notranslate"><span class="pre">--display-fps</span></code> 选项的值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">estimated-display-fps</span></code></dt><dd><p>显示器刷新的实际速度，由系统时间测量。只有在display-sync模式（由 <code class="docutils literal notranslate"><span class="pre">--video-sync</span></code> 选择）激活时才可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vsync-jitter</span></code></dt><dd><p>垂直同步持续时间的估计偏差系数。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">display-width</span></code>, <code class="docutils literal notranslate"><span class="pre">display-height</span></code></dt><dd><p>当前显示器的水平和垂直分辨率，以像素为单位。这些值是否在mpv窗口改变显示时更新，取决于窗口化后端。它并非在所有平台上都可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">display-hidpi-scale</span></code></dt><dd><p>由窗口后端报告的HiDPI比例系数。如果没有视频输出程序被激活，或者视频输出没有报告一个值，这个属性是不可用的。报告一个绝对的DPI可能更合理，然而，这是大多数操作系统API实现HiDPI支持的方式。另参见 <code class="docutils literal notranslate"><span class="pre">--hidpi-window-scale</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-aspect</span></code> (RW)</dt><dd><p>已废弃。该选项与 <code class="docutils literal notranslate"><span class="pre">--video-aspect-override</span></code> 相关，但如果视频处于激活状态，则总是报告当前的视频长宽比。</p>
<p>这个选项的读和写部分可分别拆为 <code class="docutils literal notranslate"><span class="pre">--video-params/aspect</span></code> 和 <code class="docutils literal notranslate"><span class="pre">--video-aspect-override</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-width</span></code>, <code class="docutils literal notranslate"><span class="pre">osd-height</span></code></dt><dd><p>最近的已知的OSD宽度（可以是0）。如果你想使用 <code class="docutils literal notranslate"><span class="pre">overlay-add</span></code> 命令，就需要这个。它给你实际的OSD/窗口尺寸（不包括操作系统窗口管理器绘制的装饰）。</p>
<p>是 <code class="docutils literal notranslate"><span class="pre">osd-dimensions/w</span></code> 和 <code class="docutils literal notranslate"><span class="pre">osd-dimensions/h</span></code> 的别名</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-par</span></code></dt><dd><p>最近的已知的OSD显示像素长宽比（可以是0）。</p>
<p>是 <code class="docutils literal notranslate"><span class="pre">osd-dimensions/osd-par</span></code> 的别名</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-dimensions</span></code></dt><dd><p>最近的已知的OSD尺寸。</p>
<p>有以下子属性（可以作为 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 或Lua表用 <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> 读取）：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">osd-dimensions/w</span></code></dt><dd><p>OSD渲染单元中的视频输出驱动窗口的尺寸（通常是像素，但也可以用视频输出例如 <code class="docutils literal notranslate"><span class="pre">xv</span></code> 的缩放像素）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-dimensions/h</span></code></dt><dd><p>OSD渲染单元中的视频输出驱动窗口的尺寸</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-dimensions/par</span></code></dt><dd><p>OSD的像素长宽比（通常为1）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-dimensions/aspect</span></code></dt><dd><p>视频输出驱动窗口的显示长宽比（用上面的属性计算）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-dimensions/mt</span></code>, <code class="docutils literal notranslate"><span class="pre">osd-dimensions/mb</span></code>, <code class="docutils literal notranslate"><span class="pre">osd-dimensions/ml</span></code>, <code class="docutils literal notranslate"><span class="pre">osd-dimensions/mr</span></code></dt><dd><p>OSD到视频的（上、下、左、右）空白距离。这描述了视频被渲染的区域</p>
</dd>
</dl>
<p>如果视频输出窗口没有被创建或不可见，这些属性中的任何一个都可能不可用或被设为伪值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">window-id</span></code></dt><dd><p>只读的 - mpv的窗口ID。可能并不总是可用的，例如，由于窗口尚未被打开或不被视频输出驱动支持。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mouse-pos</span></code></dt><dd><p>只读 —— 最近的已知的鼠标位置，根据OSD尺寸常规化。</p>
<p>有以下子属性（可以用 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 或 <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> 读取Lua表）：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mouse-pos/x</span></code>, <code class="docutils literal notranslate"><span class="pre">mouse-pos/y</span></code></dt><dd><p>鼠标指针的最后已知坐标</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mouse-pos/hover</span></code></dt><dd><p>布尔值 —— 鼠标指针是否悬停在视频窗口上。当此值为false时，坐标应被忽略，因为视频后端只有在指针悬停窗口时才会更新坐标</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-text</span></code></dt><dd><p>当前的字幕文本，不管字幕是否可见。格式被剥离。如果字幕不是基于文本的（例如DVD/BD字幕），将返回一个空字符串。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-text-ass</span></code></dt><dd><p>类似 <code class="docutils literal notranslate"><span class="pre">sub-text</span></code> ，但返回ASS格式的文本。其他格式的文本字幕会被转换。对于原生ASS字幕，不包含任何文本（但是矢量图等）的事件不会被过滤掉。如果多个事件与当前播放时间相匹配，它们会用换行符连接起来。只包含事件的“文本”部分。</p>
<p>这个属性不足以正确渲染ASS字幕，因为ASS header和每个事件的元数据没有被返回。你可能需要对返回的字符串做进一步的过滤以使其有用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">secondary-sub-text</span></code></dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">sub-text</span></code> 相同，但用于次字幕。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-start</span></code></dt><dd><p>当前字幕的开始时间（以秒为单位）。如果有多个当前字幕，返回第一个的开始时间。如果没有当前的字幕被呈现，将返回null。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">secondary-sub-start</span></code></dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">sub-start</span></code> 相同，但用于次字幕。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub-end</span></code></dt><dd><p>当前字幕的结束时间（以秒为单位）。如果有多个当前字幕，返回最后的结束时间。如果没有当前的字幕被呈现，或者有呈现但持续时间未知或不正确，则返回null。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">secondary-sub-end</span></code></dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">sub-end</span></code> 相同，但用于次字幕。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-pos</span></code> (RW)</dt><dd><p>当前在播放列表中的位置。第一个条目是在0的位置。写入这个属性将在新位置开始播放。</p>
<p>在某些情况下，这不必是当前播放的文件。参见  <code class="docutils literal notranslate"><span class="pre">playlist</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">current</span></code> 和 <code class="docutils literal notranslate"><span class="pre">playing</span></code>  标志的解释。</p>
<p>如果播放列表是空的，或者如果它不是空的，但没有条目是 “current” 的，这个属性就会返回-1。同样，写入-1将使播放器进入空闲模式（如果没有启用空闲模式则退出播放）。（在mpv0.33.0之前，如果没有播放列表条目是“当前的”，这个属性就不可用）</p>
<p>将当前值写入回该属性是有可能改变的。目前，它将重新启动播放列表条目的播放。但在未来，写入回当前值将被忽略。使用 <code class="docutils literal notranslate"><span class="pre">playlist-play-index</span></code> 命令来获得保证的行为。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-pos-1</span></code> (RW)</dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">playlist-pos</span></code> 相同，但基于1。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-current-pos</span></code> (RW)</dt><dd><p>播放列表中的 “current” 项目的索引。这通常是，但不必是当前正在播放的项目（参见 <code class="docutils literal notranslate"><span class="pre">playlist-playing-pos</span></code> ）。根据播放器的确切内部状态，它可能指的是下一个要播放的播放列表项目，或者用于决定下一个播放内容的播放列表项目。</p>
<p>对于读取，这与 <code class="docutils literal notranslate"><span class="pre">playlist-pos</span></code> 完全相同。</p>
<p>对于写入，这 <em>只</em> 设置 “current” 项目的位置，而不停止当前文件的播放（或者开始播放，如果这是在空闲模式下进行的）。使用-1来移除当前标志。</p>
<p>这个属性只是隐约有用。如果在播放过程中设置，它通常会导致播放列表中 <em>后</em> 的条目被接下来播放。另一个可能很奇怪的观察状态是，如果在播放过程中运行 <code class="docutils literal notranslate"><span class="pre">playlist-next</span></code> ，这个属性会被设置为下一个要播放的播放列表条目（与前面的情况不同）。有一个内部标志来决定是播放当前的播放列表条目还是下一个，这个标志目前对API用户来说是不可访问的（这种行为是否会被保留，可能会有变化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-playing-pos</span></code></dt><dd><p>播放列表中 “正在播放” 的项目的索引。如果一个播放列表项目正在加载、实际播放或正在卸载，它就是 “playing” 。这个属性在 <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_START_FILE</span></code> ( <code class="docutils literal notranslate"><span class="pre">start-file</span></code> ) 和 <code class="docutils literal notranslate"><span class="pre">MPV_EVENT_START_END</span></code> ( <code class="docutils literal notranslate"><span class="pre">end-file</span></code> ) 事件中被设置。除此以外，它返回-1。如果播放列表条目在播放过程中被移除，但播放还没有停止，或正在停止，它也会返回-1（这至少在状态转换时可能发生）。</p>
<p>在“正在播放”状态下，这通常与 <code class="docutils literal notranslate"><span class="pre">playlist-pos</span></code> 相同，除了在状态转换时，或者如果 <code class="docutils literal notranslate"><span class="pre">playlist-current-pos</span></code> 被明确写入。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist-count</span></code></dt><dd><p>总共的播放列表条目的数量。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist</span></code></dt><dd><p>播放列表，当前标记的条目。目前，原始属性值是无用的。</p>
<p>这有一系列子属性。用基于0代替 <code class="docutils literal notranslate"><span class="pre">N</span></code> 的播放列表条目索引</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">playlist/count</span></code></dt><dd><p>播放列表条目的数量（与 <code class="docutils literal notranslate"><span class="pre">playlist-count</span></code> 相同）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist/N/filename</span></code></dt><dd><p>第N个条目的文件名</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist/N/playing</span></code></dt><dd><p>如果 <code class="docutils literal notranslate"><span class="pre">playlist-playing-pos</span></code> 属性指向此条目，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist/N/current</span></code></dt><dd><p>如果 <code class="docutils literal notranslate"><span class="pre">playlist-current-pos</span></code> 属性指向此条目，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist/N/title</span></code></dt><dd><p>第N个条目的名称。只有当播放列表文件包含这样的字段时才可用，并且只有当mpv的解析器支持指定的播放列表格式时才可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist/N/id</span></code></dt><dd><p>这个条目的唯一ID。这是一个自动分配的整数ID，在当前mpv核心实例的整个生命周期中是唯一的。其他命令、事件等使用它作为 <code class="docutils literal notranslate"><span class="pre">playlist_entry_id</span></code> 字段</p>
</dd>
</dl>
<p>当client API使用 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性时，或者用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，这将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">(</span><span class="k">for</span> <span class="n">each</span> <span class="n">playlist</span> <span class="n">entry</span><span class="p">)</span>
        <span class="s2">&quot;filename&quot;</span>  <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;current&quot;</span>   <span class="n">MPV_FORMAT_FLAG</span> <span class="p">(</span><span class="n">might</span> <span class="n">be</span> <span class="n">missing</span><span class="p">;</span> <span class="n">since</span> <span class="n">mpv</span> <span class="mf">0.7.0</span><span class="p">)</span>
        <span class="s2">&quot;playing&quot;</span>   <span class="n">MPV_FORMAT_FLAG</span> <span class="p">(</span><span class="n">same</span><span class="p">)</span>
        <span class="s2">&quot;title&quot;</span>     <span class="n">MPV_FORMAT_STRING</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span>
        <span class="s2">&quot;id&quot;</span>        <span class="n">MPV_FORMAT_INT64</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list</span></code></dt><dd><p>音频/视频/字幕的轨道列表，当前条目被标记。目前，原始属性值是无用的。</p>
<p>这有一系列子属性。用基于0代替 <code class="docutils literal notranslate"><span class="pre">N</span></code> 的轨道索引。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">track-list/count</span></code></dt><dd><p>轨道的总数</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/id</span></code></dt><dd><p>用于 <code class="docutils literal notranslate"><span class="pre">--sid</span></code>/<code class="docutils literal notranslate"><span class="pre">--aid</span></code>/<code class="docutils literal notranslate"><span class="pre">--vid</span></code> 的ID。这在同一类型的轨道中是唯一的（字幕/音频/视频），但在其他方面不是</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/type</span></code></dt><dd><p>描述媒体类型的字符串。 <code class="docutils literal notranslate"><span class="pre">audio</span></code>, <code class="docutils literal notranslate"><span class="pre">video</span></code>, <code class="docutils literal notranslate"><span class="pre">sub</span></code> 之一</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/src-id</span></code></dt><dd><p>源文件中使用的轨道ID。不总是可用的（如果格式没有原生ID，如果轨道是一个伪轨道，在实际文件中不存在这种方式，或者如果格式由libavformat处理，而格式没有被列入有轨道ID的白名单，它就会丢失）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/title</span></code></dt><dd><p>储存在文件中的轨道标题。并非总是可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/lang</span></code></dt><dd><p>文件中标识的轨道语言。并非总是可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/image</span></code></dt><dd><p>如果这是一个由单一图片组成的视频轨道，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用。用来确定一个流是否是图像的启发式方法并不尝试检测通常用于视频的编解码器中的图像。否则，它是可靠的</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/albumart</span></code></dt><dd><p>如果这是一个嵌入音频文件或外部的封面图像，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/default</span></code></dt><dd><p>如果该轨道在文件中设置了默认标志，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/forced</span></code></dt><dd><p>如果文件中设置了force标志，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/codec</span></code></dt><dd><p>该轨道使用的编解码器名称，例如 <code class="docutils literal notranslate"><span class="pre">h264</span></code> 。在某些罕见情况下不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/external</span></code></dt><dd><p>如果该轨道是一个外部文件，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用。这是为独立的字幕文件设置的</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/external-filename</span></code></dt><dd><p>如果轨道来自外部文件的文件名，否则不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/selected</span></code></dt><dd><p>如果该轨道目前已被解码，则为 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，否则为 <code class="docutils literal notranslate"><span class="pre">no</span></code> /false或不可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/main-selection</span></code></dt><dd><p>它表示同一类型的轨道的选择顺序。如果一个轨道没有被选中，或被 <code class="docutils literal notranslate"><span class="pre">--lavfi-complex</span></code> 选中，它就不可用。对于字幕轨道， <code class="docutils literal notranslate"><span class="pre">0</span></code> 代表 <code class="docutils literal notranslate"><span class="pre">sid</span></code> ， <code class="docutils literal notranslate"><span class="pre">1</span></code> 代表 <code class="docutils literal notranslate"><span class="pre">secondary-sid</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/ff-index</span></code></dt><dd><p>通常由FFmpeg工具使用的流索引。注意，如果使用libavformat（ <code class="docutils literal notranslate"><span class="pre">--demuxer=lavf</span></code> ）以外的解复用器，可能会出现错误。对于mkv文件，即使使用默认（内置）的解复用器，索引通常也会匹配，但并不能保证</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/decoder-desc</span></code></dt><dd><p>如果这个轨道正在被解码，则是人性化的可读的解码器名称</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-w</span></code>, <code class="docutils literal notranslate"><span class="pre">track-list/N/demux-h</span></code></dt><dd><p>容器显示的视频尺寸提示（不总是准确）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-channel-count</span></code></dt><dd><p>容器显示的音频声道数量（并不总是准确 —— 特别是音轨可能被解码为不同数量）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-channels</span></code></dt><dd><p>容器显示的声道布局（不总是准确）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-samplerate</span></code></dt><dd><p>容器显示的音频采样率（不总是准确）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-fps</span></code></dt><dd><p>容器显示的视频FPS（不总是准确）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-bitrate</span></code></dt><dd><p>音频平均比特率，以每秒比特为单位（不总是准确）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-rotation</span></code></dt><dd><p>视频顺时针旋转元数据，以度为单位</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/demux-par</span></code></dt><dd><p>像素长宽比</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/audio-channels</span></code> （已过时）</dt><dd><p>过时的 <code class="docutils literal notranslate"><span class="pre">track-list/N/demux-channel-count</span></code> 的别名</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/replaygain-track-peak</span></code>, <code class="docutils literal notranslate"><span class="pre">track-list/N/replaygain-track-gain</span></code></dt><dd><p>每条轨道的回放增益值。只适用于源文件中存储有相应信息的音轨</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">track-list/N/replaygain-album-peak</span></code>, <code class="docutils literal notranslate"><span class="pre">track-list/N/replaygain-album-gain</span></code></dt><dd><p>每张专辑的回放增益值。如果文件有每个音轨但没有每个专辑的信息，每个专辑的值将从目前的每个音轨的值中复制。在这种情况下，未来的mpv版本有可能使这些属性反而不可用。</p>
</dd>
</dl>
<p>当用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性时，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，这将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">(</span><span class="k">for</span> <span class="n">each</span> <span class="n">track</span><span class="p">)</span>
        <span class="s2">&quot;id&quot;</span>                <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;type&quot;</span>              <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;src-id&quot;</span>            <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;title&quot;</span>             <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;lang&quot;</span>              <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;image&quot;</span>             <span class="n">MPV_FORMAT_FLAG</span>
        <span class="s2">&quot;albumart&quot;</span>          <span class="n">MPV_FORMAT_FLAG</span>
        <span class="s2">&quot;default&quot;</span>           <span class="n">MPV_FORMAT_FLAG</span>
        <span class="s2">&quot;forced&quot;</span>            <span class="n">MPV_FORMAT_FLAG</span>
        <span class="s2">&quot;selected&quot;</span>          <span class="n">MPV_FORMAT_FLAG</span>
        <span class="s2">&quot;main-selection&quot;</span>    <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;external&quot;</span>          <span class="n">MPV_FORMAT_FLAG</span>
        <span class="s2">&quot;external-filename&quot;</span> <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;codec&quot;</span>             <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;ff-index&quot;</span>          <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;decoder-desc&quot;</span>      <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;demux-w&quot;</span>           <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;demux-h&quot;</span>           <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;demux-channel-count&quot;</span> <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;demux-channels&quot;</span>    <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;demux-samplerate&quot;</span>  <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;demux-fps&quot;</span>         <span class="n">MPV_FORMAT_DOUBLE</span>
        <span class="s2">&quot;demux-bitrate&quot;</span>     <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;demux-rotation&quot;</span>    <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;demux-par&quot;</span>         <span class="n">MPV_FORMAT_DOUBLE</span>
        <span class="s2">&quot;audio-channels&quot;</span>    <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;replaygain-track-peak&quot;</span> <span class="n">MPV_FORMAT_DOUBLE</span>
        <span class="s2">&quot;replaygain-track-gain&quot;</span> <span class="n">MPV_FORMAT_DOUBLE</span>
        <span class="s2">&quot;replaygain-album-peak&quot;</span> <span class="n">MPV_FORMAT_DOUBLE</span>
        <span class="s2">&quot;replaygain-album-gain&quot;</span> <span class="n">MPV_FORMAT_DOUBLE</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current-tracks/...</span></code></dt><dd><p>这可以访问当前选择的轨道。它重定向到 <code class="docutils literal notranslate"><span class="pre">track-list</span></code> 中的正确条目。</p>
<p>定义了以下子条目： <code class="docutils literal notranslate"><span class="pre">video</span></code>, <code class="docutils literal notranslate"><span class="pre">audio</span></code>, <code class="docutils literal notranslate"><span class="pre">sub</span></code>, <code class="docutils literal notranslate"><span class="pre">sub2</span></code></p>
<p>例如， <code class="docutils literal notranslate"><span class="pre">current-tracks/audio/lang</span></code> 返回当前音轨的语言字段（与 <code class="docutils literal notranslate"><span class="pre">track-list/N/lang</span></code> 的值相同）。</p>
<p>如果通过 <code class="docutils literal notranslate"><span class="pre">--lavfi-complex</span></code> 选择了所要求的类型的轨道，将返回第一个。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chapter-list</span></code> (RW)</dt><dd><p>章节列表，当前条目被标记。目前，原始属性值是无用的。</p>
<p>这有一系列子属性。用基于0代替 <code class="docutils literal notranslate"><span class="pre">N</span></code> 的章节索引。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">chapter-list/count</span></code></dt><dd><p>章节的数量</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chapter-list/N/title</span></code></dt><dd><p>存储在文件中的章节标题。并非总是可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">chapter-list/N/time</span></code></dt><dd><p>章节的开始时间，单位是浮点数的秒</p>
</dd>
</dl>
<p>当用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性，或用Lua  <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">(</span><span class="k">for</span> <span class="n">each</span> <span class="n">chapter</span><span class="p">)</span>
        <span class="s2">&quot;title&quot;</span> <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;time&quot;</span>  <span class="n">MPV_FORMAT_DOUBLE</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">af</span></code>, <code class="docutils literal notranslate"><span class="pre">vf</span></code> (RW)</dt><dd><p>参见 <code class="docutils literal notranslate"><span class="pre">--vf</span></code> / <code class="docutils literal notranslate"><span class="pre">--af</span></code> 和 <code class="docutils literal notranslate"><span class="pre">vf</span></code> / <code class="docutils literal notranslate"><span class="pre">af</span></code> 命令。</p>
<p>当用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">(</span><span class="k">for</span> <span class="n">each</span> <span class="nb">filter</span> <span class="n">entry</span><span class="p">)</span>
        <span class="s2">&quot;name&quot;</span>      <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;label&quot;</span>     <span class="n">MPV_FORMAT_STRING</span> <span class="p">[</span><span class="n">optional</span><span class="p">]</span>
        <span class="s2">&quot;enabled&quot;</span>   <span class="n">MPV_FORMAT_FLAG</span> <span class="p">[</span><span class="n">optional</span><span class="p">]</span>
        <span class="s2">&quot;params&quot;</span>    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">[</span><span class="n">optional</span><span class="p">]</span>
            <span class="s2">&quot;key&quot;</span>   <span class="n">MPV_FORMAT_STRING</span>
            <span class="s2">&quot;value&quot;</span> <span class="n">MPV_FORMAT_STRING</span>
</pre></div>
</div>
<p>也可以用这种格式来写入属性。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seekable</span></code></dt><dd><p>通常是否可以在当前文件中跳转。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">partially-seekable</span></code></dt><dd><p>当前文件是否被认为是跳转的，但只因为缓存是激活的。这意味着小的相对跳转可能是可行的，但较大的跳转可能会失败。跳转是否会成功，通常是不能预先知道的。</p>
<p>如果这个属性返回 <code class="docutils literal notranslate"><span class="pre">yes</span></code> /true，那么 <code class="docutils literal notranslate"><span class="pre">seekable</span></code> 也会返回。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playback-abort</span></code></dt><dd><p>播放是否已经停止或将要停止（在不明显的情况下很有用，比如在 <code class="docutils literal notranslate"><span class="pre">on_load</span></code> hook处理过程中，用户可以停止播放，但脚本必须明确结束处理）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cursor-autohide</span></code> (RW)</dt><dd><p>参见 <code class="docutils literal notranslate"><span class="pre">--cursor-autohide</span></code> 。将此设置为一个新的值将总是更新光标，并重置内部的计时器。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-sym-cc</span></code></dt><dd><p>将当前的OSD符号作为不透明的OSD控制代码（cc）插入。这只对 <code class="docutils literal notranslate"><span class="pre">show-text</span></code> 命令或设置OSD信息的选项有意义。控制代码是具体实施的，对其他事情没有用处。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">osd-ass-cc</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">${osd-ass-cc/0}</span></code> 在OSD中禁止转义ASS序列的文本， <code class="docutils literal notranslate"><span class="pre">${osd-ass-cc/1}</span></code> 再次启用。默认情况下，ASS序列被转义以避免意外的格式化，该属性可以禁用这一行为。注意，这些属性会返回一个不透明的OSD控制代码，这只对 <code class="docutils literal notranslate"><span class="pre">show-text</span></code> 命令或设置OSD信息的选项有意义。</p>
<div class="admonition- admonition">
<p class="admonition-title">示例</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--osd-msg3='This</span> <span class="pre">is</span> <span class="pre">${osd-ass-cc/0}{\\b1}bold</span> <span class="pre">text'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show-text</span> <span class="pre">&quot;This</span> <span class="pre">is</span> <span class="pre">${osd-ass-cc/0}{\\b1}bold</span> <span class="pre">text&quot;</span></code></p></li>
</ul>
</div>
<p>任何由libass理解的ASS覆写标签都可以使用。</p>
<p>注意，你需要转义 <code class="docutils literal notranslate"><span class="pre">\</span></code> 字符，因为字符串在传递给OSD代码之前会被处理为C转义序列。详见 <a class="reference internal" href="#flat">Flat命令语法</a></p>
<p>标签的列表可以在这里找到：
<a class="reference external" href="https://aeg-dev.github.io/AegiSite/docs/3.2/ass_tags/">https://aeg-dev.github.io/AegiSite/docs/3.2/ass_tags/</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-configured</span></code></dt><dd><p>当前视频输出驱动是否被配置了。通常这与视频窗口是否可见相对应。如果使用了 <code class="docutils literal notranslate"><span class="pre">--force-window</span></code> 选项，通常总是返回``yes`` /true。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes</span></code></dt><dd><p>包含对视频输出的活动渲染传递及其执行时间的内省。并非所有的视频输出驱动都能实现。</p>
<p>这被进一步细分为两种帧类型， <code class="docutils literal notranslate"><span class="pre">vo-passes/fresh</span></code> 用于刷新的帧（必须已被上传、缩放等）， <code class="docutils literal notranslate"><span class="pre">vo-passes/redraw</span></code> 用于重新绘制的帧（只需要已被重绘）。任何指定的子类型的传递次数可以从一帧到另一帧发生变化，因此不应依赖以上。</p>
<p>每个帧类型都有一系列进一步的子属性。用帧类型代替 <code class="docutils literal notranslate"><span class="pre">TYPE</span></code> ， <code class="docutils literal notranslate"><span class="pre">N</span></code> 代替基于0的传递索引， <code class="docutils literal notranslate"><span class="pre">M</span></code> 代替基于0的采样索引。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes/TYPE/count</span></code></dt><dd><p>传递的数量</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes/TYPE/N/desc</span></code></dt><dd><p>传递的人性化描述</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes/TYPE/N/last</span></code></dt><dd><p>最近的测量的执行时间，以纳秒为单位</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes/TYPE/N/avg</span></code></dt><dd><p>该传递的平均执行时间，以纳秒为单位。确切的时间范围是可变的，但一般应该是几秒钟</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes/TYPE/N/peak</span></code></dt><dd><p>该平均范围内的峰值执行时间（最高值），以纳秒为单位</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes/TYPE/N/count</span></code></dt><dd><p>该通道的采样</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vo-passes/TYPE/N/samples/M</span></code></dt><dd><p>该通道的特定采样的原始执行时间，以纳秒为单位</p>
</dd>
</dl>
<p>当用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性时，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_MAP</span>
<span class="s2">&quot;TYPE&quot;</span> <span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span>
        <span class="s2">&quot;desc&quot;</span>    <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;last&quot;</span>    <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;avg&quot;</span>     <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;peak&quot;</span>    <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;count&quot;</span>   <span class="n">MPV_FORMAT_INT64</span>
        <span class="s2">&quot;samples&quot;</span> <span class="n">MPV_FORMAT_NODE_ARRAY</span>
             <span class="n">MP_FORMAT_INT64</span>
</pre></div>
</div>
<p>注意，不支持通过subkeys直接访问这个结构，唯一的访问方式是通过前面提到的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">perf-info</span></code></dt><dd><p>进一步的性能数据。查询这个属性会触发一些数据的内部收集，可能会拖慢播放器。每次查询都会重置一些内部状态。属性变化通知没有也不会起作用。所有这些都可能在未来改变，所以不要使用这个。内置的 <code class="docutils literal notranslate"><span class="pre">stats</span></code> 脚本应该是唯一的用户；因为它是和源代码捆绑在一起的，它可以使用mpv内部的知识来正确渲染信息。一些细节参见 <code class="docutils literal notranslate"><span class="pre">stats</span></code> 脚本描述。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">video-bitrate</span></code>, <code class="docutils literal notranslate"><span class="pre">audio-bitrate</span></code>, <code class="docutils literal notranslate"><span class="pre">sub-bitrate</span></code></dt><dd><p>在数据包层面上计算的比特率值。它的工作原理是将两个关键帧之间的所有数据包的比特大小除以它们的演示时间戳距离（这使用时间戳存储在文件中，所以例如播放速度不会影响返回值）。特别是，视频比特率将只在每个关键帧更新，并显示 “past” 的比特率。为了使该属性对用户界面更友好，对这些属性的更新会以某种方式进行节制。</p>
<p>单位是比特/秒。OSD格式将这些值变成千比特（或兆比特，如果合适的话），这可以通过使用原始属性值来防止，例如，用 <code class="docutils literal notranslate"><span class="pre">${=video-bitrate}</span></code></p>
<p>请注意，这些属性的准确性受到一些因素的影响。如果底层的解复用器在解复用时重写了数据包（对某些文件格式做了重写），比特率可能略有偏差。如果时间戳不好或抖动（如在Matroska中），即使是恒定的比特率流也可能显示波动的比特率。</p>
<p>这些值到底是如何计算的，将来可能会改变。</p>
<p>在mpv的早期版本中，这些属性使用一个完全不同的方法返回一个静态（但不好）的猜测。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">packet-video-bitrate</span></code>, <code class="docutils literal notranslate"><span class="pre">packet-audio-bitrate</span></code>, <code class="docutils literal notranslate"><span class="pre">packet-sub-bitrate</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">video-bitrate</span></code>, <code class="docutils literal notranslate"><span class="pre">audio-bitrate</span></code>, <code class="docutils literal notranslate"><span class="pre">sub-bitrate</span></code> 的旧版的过时的属性。它们的表现完全相同，但返回的是以千比特为单位的值。另外，它们没有任何OSD格式，尽管同样可以用例如 <code class="docutils literal notranslate"><span class="pre">${=video-bitrate}</span></code> 来实现。</p>
<p>这些属性不应该再被使用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-device-list</span></code></dt><dd><p>已发现的音频设备的列表。这主要用于client API，并反映了命令行播放器 <code class="docutils literal notranslate"><span class="pre">--audio-device=help</span></code> 返回的内容。</p>
<p>当用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询属性时，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">(</span><span class="k">for</span> <span class="n">each</span> <span class="n">device</span> <span class="n">entry</span><span class="p">)</span>
        <span class="s2">&quot;name&quot;</span>          <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;description&quot;</span>   <span class="n">MPV_FORMAT_STRING</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">name</span></code> 是要传递给 <code class="docutils literal notranslate"><span class="pre">--audio-device</span></code> 选项的东西（通常是一个相当神秘的音频API特定ID），而 <code class="docutils literal notranslate"><span class="pre">description</span></code> 是人性化的可读的自由格式文本。如果没有描述，或者描述本来就是一个空字符串，那么描述将被设置为设备名称（减去mpv特有的 <code class="docutils literal notranslate"><span class="pre">&lt;driver&gt;/</span></code> 前缀）。</p>
<p>名称设置为 <code class="docutils literal notranslate"><span class="pre">auto</span></code> 的特殊条目选择默认的音频输出驱动和默认设备。</p>
<p>该属性可以通过client API和Lua脚本中的属性观察机制进行查看（从技术上讲，在第一次读取这个属性时就会启用变化通知）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">audio-device</span></code> (RW)</dt><dd><p>设置音频设备。这直接读取/写入 <code class="docutils literal notranslate"><span class="pre">--audio-device</span></code> 选项，但在写入访问时，音频输出将被安排重新加载。</p>
<p>在没有音频输出的情况下写入这个属性，不会自动启用音频（在先前写入访问 <code class="docutils literal notranslate"><span class="pre">audio-device</span></code> 后，由于重新初始化失败而禁用音频的情况下也是如此）。</p>
<p>这个属性也不会告诉你哪个音频设备在被实际使用中。</p>
<p>这些细节的处理方式在未来可能会改变。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current-vo</span></code></dt><dd><p>当前的视频输出驱动（与 <code class="docutils literal notranslate"><span class="pre">--vo</span></code> 一起使用的名称）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">current-ao</span></code></dt><dd><p>当前的音频输出驱动（与 <code class="docutils literal notranslate"><span class="pre">--ao</span></code> 一起使用的名称）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shared-script-properties</span></code> (RW)</dt><dd><p>这是一个提供通用的任意字符串的按键/值映射，在脚本之间共享。播放器本身不使用其中的任何数据（尽管一些内置脚本可能会）。该属性在播放器重新启动时不会被保存。</p>
<p>这是非常原始的，低效的，而且使用起来很烦人。这是一个临时的解决方案，随时可能消失（例如，当一个更好的解决方案出现时）。这也是为什么这个属性有一个令人讨厌的名字。你应该避免使用它，除非你绝对需要。</p>
<p>Lua脚本有以 <code class="docutils literal notranslate"><span class="pre">utils.shared_script_property_</span></code> 开头的辅助工具。它们是没有文档的，因为你不应该使用这个属性。如果你仍然认为你必须使用，你应该使用辅助工具而不是直接使用这个属性。</p>
<p>你应该使用 <code class="docutils literal notranslate"><span class="pre">change-list</span></code> 命令来修改内容。如果两个脚本同时更新不同的按键，由于缺乏同步性，手动读取、修改和写入属性可能会造成数据丢失。Lua辅助工具可以解决这个问题。</p>
<p>（如果两个脚本试图同时更新同一个按键，则没有办法确保同步性）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">user-data</span></code> (RW)</dt><dd><p>这是一个在客户端之间共享的任意节点的递归按键/值图表，以供一般使用（即脚本、IPC客户端、主机应用程序等）。播放器自身不使用其中的任何数据（尽管一些内置脚本可能使用）。该属性在播放器重新启动后不会被保留。</p>
<p>这是比 <code class="docutils literal notranslate"><span class="pre">shared-script-properties</span></code> 更强大的替代品。</p>
<p>子路径可以被直接访问；例如， <code class="docutils literal notranslate"><span class="pre">user-data/my-script/state/a</span></code> 可被读取、写入或观测。</p>
<p>top-level 对象本身不能被直接写入；而是写入到子路径。</p>
<p>将此属性或其子属性转换为字符串，这将得到一个JSON的呈现。如果转换一个 leaf-level 对象（即不是图表或数组）并且不使用 raw 模式，将给出底层内容（例如，字符串将被直接输出，而没有引号或JSON转义）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">working-directory</span></code></dt><dd><p>mpv进程的工作目录。对JSON IPC用户可能有用，因为命令行播放器通常使用相对路径。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">protocol-list</span></code></dt><dd><p>可能被播放器识别的协议前缀列表。它们被返回，没有尾部的 <code class="docutils literal notranslate"><span class="pre">://</span></code> 后缀（但仍然总是需要）。在某些情况下，协议实际上是不被支持的（如果ffmpeg在编译时不支持TLS，可以考虑 <code class="docutils literal notranslate"><span class="pre">https</span></code> ）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">decoder-list</span></code></dt><dd><p>支持的解码器的列表。这列出了可以传递给 <code class="docutils literal notranslate"><span class="pre">--vd</span></code> 和 <code class="docutils literal notranslate"><span class="pre">--ad</span></code> 的解码器。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">codec</span></code></dt><dd><p>典型的编解码器名称，用于识别解码器可以处理的格式</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver</span></code></dt><dd><p>解码器本身的名称。通常，这与 <code class="docutils literal notranslate"><span class="pre">codec</span></code> 相同。有时它可能不同。它用于区分同一编解码器的多个解码器</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">description</span></code></dt><dd><p>解码器和编解码器的人性化的可读描述</p>
</dd>
</dl>
<p>当用client API的 <code class="docutils literal notranslate"><span class="pre">MPV_FORMAT_NODE</span></code> 查询该属性，或用Lua <code class="docutils literal notranslate"><span class="pre">mp.get_property_native</span></code> ，将返回一个mpv_node，内容如下：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MPV_FORMAT_NODE_ARRAY</span>
    <span class="n">MPV_FORMAT_NODE_MAP</span> <span class="p">(</span><span class="k">for</span> <span class="n">each</span> <span class="n">decoder</span> <span class="n">entry</span><span class="p">)</span>
        <span class="s2">&quot;codec&quot;</span>         <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;driver&quot;</span>        <span class="n">MPV_FORMAT_STRING</span>
        <span class="s2">&quot;description&quot;</span>   <span class="n">MPV_FORMAT_STRING</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encoder-list</span></code></dt><dd><p>libavcodec编码器的列表。这与 <code class="docutils literal notranslate"><span class="pre">decoder-list</span></code> 的格式相同。编码器名称（ <code class="docutils literal notranslate"><span class="pre">driver</span></code> 条目）可以传递给 <code class="docutils literal notranslate"><span class="pre">--ovc</span></code> 和 <code class="docutils literal notranslate"><span class="pre">--oac</span></code> （没有 <code class="docutils literal notranslate"><span class="pre">--vd</span></code> 和 <code class="docutils literal notranslate"><span class="pre">--ad</span></code> 要求的 <code class="docutils literal notranslate"><span class="pre">lavc:</span></code> 前缀）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">demuxer-lavf-list</span></code></dt><dd><p>可用的libavformat解复用器名称的列表。这可以用来检查对特定格式的支持或与 <code class="docutils literal notranslate"><span class="pre">--demuxer-lavf-format</span></code> 一起使用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input-key-list</span></code></dt><dd><p><a class="reference internal" href="#id3">按键名称</a> 列表，与 <code class="docutils literal notranslate"><span class="pre">--input-keylist</span></code> 的输出相同。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mpv-version</span></code></dt><dd><p>mpv版本/版权字符串。根据二进制文件的构建方式，它可能包含一个发布版本号，或者只是一个git哈希值。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mpv-configuration</span></code></dt><dd><p>传递给构建系统的配置参数（通常是调用 <code class="docutils literal notranslate"><span class="pre">./waf</span> <span class="pre">configure</span> <span class="pre">...</span></code> 的方式）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ffmpeg-version</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">av_version_info()</span></code> API调用的内容。这是一个以某种方式标识构建的字符串，可以是发布版本号，也可以是git哈希值。这也适用于Libav（这个属性的名字还是一样的）。如果mpv与较早的FFmpeg和Libav版本链接，这个属性就不可用。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">libass-version</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">ass_library_version()</span></code> 的值。这是一个整数，以有点奇怪的形式编码（显然是 “hex BCD”），表示链接到mpv的libass库的发布版本。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">options/&lt;name&gt;</span></code> (RW)</dt><dd><p>选项 <code class="docutils literal notranslate"><span class="pre">--&lt;name&gt;</span></code> 的值。大多数选项可以在运行时通过写到这个属性来改变。请注意，许多选项需要重新加载文件以使更改生效。如果有同等的属性，最好设置该属性。</p>
<p>应该没有任何理由访问 <code class="docutils literal notranslate"><span class="pre">options/&lt;name&gt;</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> ，除非这些属性有不同的行为或冲突的语义。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file-local-options/&lt;name&gt;</span></code> (RW)</dt><dd><p>类似于 <code class="docutils literal notranslate"><span class="pre">options/&lt;name&gt;</span></code> ，但是当通过该属性设置一个选项时，一旦当前文件停止播放，该选项将被重置为旧值。当没有文件正在播放（或正在加载）时，尝试写入一个选项会导致错误。</p>
<p>（注意，如果一个选项被标记为file-local，即使是 <code class="docutils literal notranslate"><span class="pre">options/</span></code> 也会访问本地值，而 <code class="docutils literal notranslate"><span class="pre">old</span></code> 值将在播放结束时被恢复，在播放结束前不能被读取或写入）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;</span></code></dt><dd><p>每个选项的额外信息。</p>
<p>这有一系列子属性。用顶层选项的名称替换 <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> 。不保证这些子属性的稳定性 —— 它们可能在功能中发生根本性变化。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/name</span></code></dt><dd><p>选项的名称</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/type</span></code></dt><dd><p>选项类型的名称，如 <code class="docutils literal notranslate"><span class="pre">String</span></code> 或 <code class="docutils literal notranslate"><span class="pre">Integer</span></code> 。对于许多复杂的类型，这并不是很准确</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/set-from-commandline</span></code></dt><dd><p>该选项是否从mpv命令行设置。如果选项在运行时被改变，这个选项将被设置为undefined（意味着它可能在将来改变）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/set-locally</span></code></dt><dd><p>该选项是否按单文件设置。自动加载的设置文件、文件-目录的设置和其他情况都是如此。这意味着当播放结束时，选项的值将被恢复到播放开始前的值</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/default-value</span></code></dt><dd><p>该选项的默认值。可能并非总是可用</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/min</span></code>, <code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/max</span></code></dt><dd><p>选项允许的最小和最大整数值。只有在选项是数字的情况下才可用，并且最小/最大值已在内部设置。也有可能只设置了其中一个</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">option-info/&lt;name&gt;/choices</span></code></dt><dd><p>如果该选项是一个可选择的选项，可能可选。整数的选择可能包括也可能不包括（它们可以由 <code class="docutils literal notranslate"><span class="pre">min</span></code> 和 <code class="docutils literal notranslate"><span class="pre">max</span></code> 暗示）。请注意，那些表现得像选项的选项，但内部不是实际的选项，可能没有这个信息</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">property-list</span></code></dt><dd><p>顶层属性的列表</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">profile-list</span></code></dt><dd><p>配置预设和其内容的列表。这是高度特定于此的实现，并可能随时改变。目前，它为每个配置预设返回一个选项数组。每个选项有一个名称和一个值，目前值总是一个字符串。请注意，选项数组不是一个表，因为顺序很重要，有可能出现重复的条目。递归的配置预设不被展开，并显示为特殊的 <code class="docutils literal notranslate"><span class="pre">profile</span></code> 选项。</p>
<p>如果 <code class="docutils literal notranslate"><span class="pre">profile</span> <span class="pre">restore</span></code> 字段包含默认值（可能是因为它没有设置，或者显式设置为 <code class="docutils literal notranslate"><span class="pre">default</span></code> ），则当前缺少该字段，但将来可能会包含值 <code class="docutils literal notranslate"><span class="pre">default</span></code> 。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command-list</span></code></dt><dd><p>输入命令的列表。这将返回一个数组表，其中每个表节点代表一个命令。这个表目前只有一个条目。 <code class="docutils literal notranslate"><span class="pre">name</span></code> 代表命令的名称（这个属性应该是对 <code class="docutils literal notranslate"><span class="pre">--input-cmdlist</span></code> 的替代。该选项转储了一些更多的信息，但如果需要的话，扩展这个属性是一个有效的功能请求）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input-bindings</span></code></dt><dd><p>当前输入按键键绑定的列表。这将返回一个数组，其中每个表节点代表一个单一的按键键/命令的绑定。这个表有以下条目：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>按键的名称。这是标准化的，可能与源文件中的指定方式略有不同（例如，在input.conf中）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cmd</span></code></dt><dd><p>映射到按键上的命令（目前，这与源文件中指定的字符串完全相同，只是删除了空格和注释。将来有可能被规范化）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">is_weak</span></code></dt><dd><p>如果设置为 yes，任何现有的和激活的用户绑定将被优先考虑</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">owner</span></code></dt><dd><p>如果此条目存在，则是添加此绑定的脚本（或类似）的名称</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">section</span></code></dt><dd><p>该绑定属于某个部分的名称。这是一个很少使用的机制。这个条目可能会被删除或在将来改变含义</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priority</span></code></dt><dd><p>一个数字。数值高的绑定比数值低的绑定优先。如果该值为负数，这个绑定是未激活的，不会被输入触发。注意，mpv内部不使用这个值，在某些情况下，绑定的匹配工作可能略有不同。此外，这个值是动态的，可以在运行时改变。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">comment</span></code></dt><dd><p>如果存在的话，在同一行的命令后面的注释（例如，input.conf条目 <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">cycle</span> <span class="pre">bla</span> <span class="pre">#</span> <span class="pre">toggle</span> <span class="pre">bla</span></code> 会产生一个条目 <code class="docutils literal notranslate"><span class="pre">comment</span> <span class="pre">=</span> <span class="pre">&quot;toggle</span> <span class="pre">bla&quot;,</span> <span class="pre">cmd</span> <span class="pre">=</span> <span class="pre">&quot;cycle</span> <span class="pre">bla&quot;</span></code> ）</p>
</dd>
</dl>
<p>这个属性是只读的，不支持更改提醒。目前，除了脚本添加或删除自己的绑定外，没有任何机制可以在运行时改变按键绑定。</p>
</dd>
</dl>
</section>
<section id="id15">
<h2>选项和属性之间的不一致处<a class="headerlink" href="#id15" title="此标题的永久链接">#</a></h2>
<p>你可以把（几乎）所有的选项作为属性来访问，尽管有些属性有一些注意事项（由于历史原因）。</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">vid</span></code>, <code class="docutils literal notranslate"><span class="pre">aid</span></code>, <code class="docutils literal notranslate"><span class="pre">sid</span></code></dt><dd><p>当播放处于激活状态时，这些属性返回实际激活的轨道。例如，如果你设置了 <code class="docutils literal notranslate"><span class="pre">aid=5</span></code> ，而当前播放的文件不包含ID为5的音轨， <code class="docutils literal notranslate"><span class="pre">aid</span></code> 属性将返回 <code class="docutils literal notranslate"><span class="pre">no</span></code></p>
<p>在mpv0.31.0之前，你只能在运行时设置存在的音轨。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">display-fps</span></code></dt><dd><p>这种不一致的行为已过时。弃用后，报告值和选项值被干净地分离开（选项值为 <code class="docutils literal notranslate"><span class="pre">overrid-display-fps</span></code> ）。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">vf</span></code>, <code class="docutils literal notranslate"><span class="pre">af</span></code></dt><dd><p>如果你在播放过程中设置了这些属性，而滤镜链未能成功重新初始化，选项将被设置，但运行时的滤镜链不会改变。另一方面，下一个要播放的视频会失败，因为初始的滤镜链不能被创建。</p>
<p>这种行为在mpv0.31.0中有所改变。在此之前， <em>如果</em> 一个视频（对于 <code class="docutils literal notranslate"><span class="pre">vf</span></code> ）或一个音频（对于 <code class="docutils literal notranslate"><span class="pre">af</span></code> ）轨道是激活的，新的值被拒绝。如果播放没有激活，行为与当前相同。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">playlist</span></code></dt><dd><p>该属性是只读的，返回当前的内部播放列表。该选项是为了在命令行解析时加载播放列表。对于client API的用户，你应该使用 <code class="docutils literal notranslate"><span class="pre">loadlist</span></code> 命令代替。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">profile</span></code>, <code class="docutils literal notranslate"><span class="pre">include</span></code></dt><dd><p>这些都是只写入的，并将执行被写入的动作，就像在mpv CLI命令行上使用一样。它们唯一的用途是在 <code class="docutils literal notranslate"><span class="pre">mpv_initialize()</span></code> 之前使用libmpv，而这可能只在转码模式下有用。普通的libmpv用户应该使用其它机制，比如 <code class="docutils literal notranslate"><span class="pre">apply-profile</span></code> 命令，以及 <code class="docutils literal notranslate"><span class="pre">mpv_load_config_file</span></code> API函数。避免使用这些属性。</p>
</dd>
</dl>
</section>
<section id="id16">
<h2>属性扩展<a class="headerlink" href="#id16" title="此标题的永久链接">#</a></h2>
<p>所有输入命令的字符串参数以及某些选项（如 <code class="docutils literal notranslate"><span class="pre">--term-playing-msg</span></code> ）都要符合属性扩展。需要注意的是，属性扩展在一些地方不起作用，例如，数字参数是预期的（例如， <code class="docutils literal notranslate"><span class="pre">add</span></code> 命令不做属性扩展。 <code class="docutils literal notranslate"><span class="pre">set</span></code> 命令是一个例外，而非一般规则）。</p>
<div class="admonition-input-conf admonition">
<p class="admonition-title">input.conf示例</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">show-text</span> <span class="pre">&quot;Filename:</span> <span class="pre">${filename}&quot;</span></code></dt><dd><p>当按下 <code class="docutils literal notranslate"><span class="pre">i</span></code> 键时显示当前文件的文件名。</p>
</dd>
</dl>
</div>
<p>属性扩展是否默认启用取决于使用的哪种API（参见 <a class="reference internal" href="#flat">Flat命令语法</a> <a class="reference internal" href="#id4">指定为数组的命令</a> <a class="reference internal" href="#id5">命名参数</a> ），但它总是可以用  <code class="docutils literal notranslate"><span class="pre">expand-properties</span></code> 前缀启用，或用 <code class="docutils literal notranslate"><span class="pre">raw</span></code> 前缀禁用，如 <a class="reference internal" href="#id9">输入命令前缀</a> 所述。</p>
<p>支持以下扩展：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">${NAME}</span></code></dt><dd><p>展开到属性 <code class="docutils literal notranslate"><span class="pre">NAME</span></code> 的值。如果检索该属性失败，则扩展为错误字符串。（使用 <code class="docutils literal notranslate"><span class="pre">${NAME:}</span></code> 带尾巴的 <code class="docutils literal notranslate"><span class="pre">:</span></code> 来扩展到一个空字符串）。如果 <code class="docutils literal notranslate"><span class="pre">NAME</span></code> 前缀为 <code class="docutils literal notranslate"><span class="pre">=</span></code> ，则展开为该属性的原始值（见下文）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">${NAME:STR}</span></code></dt><dd><p>展开到属性 <code class="docutils literal notranslate"><span class="pre">NAME</span></code> 的值，如果不能检索到该属性，则展开到 <code class="docutils literal notranslate"><span class="pre">STR</span></code> 。 <code class="docutils literal notranslate"><span class="pre">STR</span></code> 是递归展开的</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">${?NAME:STR}</span></code></dt><dd><p>如果有 <code class="docutils literal notranslate"><span class="pre">NAME</span></code> 属性，则扩展到 <code class="docutils literal notranslate"><span class="pre">STR</span></code> （递归）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">${!NAME:STR}</span></code></dt><dd><p>如果不能检索到 <code class="docutils literal notranslate"><span class="pre">NAME</span></code> 属性，则扩展为 <code class="docutils literal notranslate"><span class="pre">STR</span></code> （递归）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">${?NAME==VALUE:STR}</span></code></dt><dd><p>如果属性 <code class="docutils literal notranslate"><span class="pre">NAME</span></code> 扩展为等于 <code class="docutils literal notranslate"><span class="pre">VALUE</span></code> 的字符串，则扩展为 <code class="docutils literal notranslate"><span class="pre">STR</span></code> （递归）。你可以在 <code class="docutils literal notranslate"><span class="pre">NAME</span></code> 前加上 <code class="docutils literal notranslate"><span class="pre">=</span></code> ，以便比较一个属性的原始值（见下文）。如果该属性不可用，或者在检索时发生其他错误，该值永远不会被视为相等。注意， <code class="docutils literal notranslate"><span class="pre">VALUE</span></code> 不能包含任何 <code class="docutils literal notranslate"><span class="pre">:</span></code> 或 <code class="docutils literal notranslate"><span class="pre">}</span></code> 字符。另外，如果有需要，将来可能会增加用 <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> 或 <code class="docutils literal notranslate"><span class="pre">%</span></code> 转义的功能</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">${!NAME==VALUE:STR}</span></code></dt><dd><p>与 <code class="docutils literal notranslate"><span class="pre">?</span></code> 变体相同，但是如果值不相等， <code class="docutils literal notranslate"><span class="pre">STR</span></code> 将被展开（使用与 <code class="docutils literal notranslate"><span class="pre">?</span></code> 相同的语义）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">$$</span></code></dt><dd><p>展开为 <code class="docutils literal notranslate"><span class="pre">$</span></code></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">$}</span></code></dt><dd><p>展开为 <code class="docutils literal notranslate"><span class="pre">}</span></code> （要在递归扩展中产生这个字符）</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">$&gt;</span></code></dt><dd><p>禁用属性扩展和对字符串其余部分的 <code class="docutils literal notranslate"><span class="pre">$</span></code> 的特殊处理</p>
</dd>
</dl>
<p>在允许属性扩展的地方，通常也接受C-style转义。例如：</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\n</span></code> 成为一个换行符</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\\</span></code> 扩展为 <code class="docutils literal notranslate"><span class="pre">\</span></code></p></li>
</ul>
</div></blockquote>
</section>
<section id="id17">
<h2>原始和格式化的属性<a class="headerlink" href="#id17" title="此标题的永久链接">#</a></h2>
<p>通常情况下，属性被格式化为人性化的可读文本，旨在显示在OSD或终端上。通过在属性名称前加上 <code class="docutils literal notranslate"><span class="pre">=</span></code> ，可以从一个属性中获取未格式化的（原始）值。这些原始值可以被其他程序解析，并遵循与属性相关的选项相同的惯例。</p>
<div class="admonition- admonition">
<p class="admonition-title">示例</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">${time-pos}</span></code> 扩展为 <code class="docutils literal notranslate"><span class="pre">00:14:23</span></code> （如果播放位置在14分23秒）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">${=time-pos}``扩展为</span> <span class="pre">``863.4</span></code> （同样的时间，加上400毫秒 —— 在格式化的情况下通常不显示毫秒）</p></li>
</ul>
</div>
<p>有时，原始属性值和格式化的属性值所携带的信息量的差异可能相当大。在某些情况下，原始值有更多的信息，比如比秒更精确的 <code class="docutils literal notranslate"><span class="pre">time-pos</span></code> 。有时情况正好相反，例如 <code class="docutils literal notranslate"><span class="pre">aid</span></code> 在格式化的情况下显示音轨标题和语言，但如果是原始值，则只显示音轨号码。</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, hooke007
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">命令接口</a><ul>
<li><a class="reference internal" href="#input-conf">input.conf</a></li>
<li><a class="reference internal" href="#id2">input.conf语法</a></li>
<li><a class="reference internal" href="#id3">按键名称</a></li>
<li><a class="reference internal" href="#flat">Flat命令语法</a></li>
<li><a class="reference internal" href="#id4">指定为数组的命令</a></li>
<li><a class="reference internal" href="#id5">命名参数</a></li>
<li><a class="reference internal" href="#id6">输入命令列表</a></li>
<li><a class="reference internal" href="#id7">可能变更的输入命令</a><ul>
<li><a class="reference internal" href="#id8">事件列表</a></li>
<li><a class="reference internal" href="#hooks">Hooks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">输入命令前缀</a></li>
<li><a class="reference internal" href="#id10">同步与异步</a></li>
<li><a class="reference internal" href="#id11">异步命令详情</a></li>
<li><a class="reference internal" href="#id12">输入区</a></li>
<li><a class="reference internal" href="#id13">属性</a></li>
<li><a class="reference internal" href="#id14">属性列表</a></li>
<li><a class="reference internal" href="#id15">选项和属性之间的不一致处</a></li>
<li><a class="reference internal" href="#id16">属性扩展</a></li>
<li><a class="reference internal" href="#id17">原始和格式化的属性</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/translations.js"></script>
    </body>
</html>